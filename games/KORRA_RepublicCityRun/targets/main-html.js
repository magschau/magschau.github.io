/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){var O,da,c,p,i,h,d,G,u,m,S,ba,n,y,A,H,B,U,T,W,ha,z,t,Y,Z,ea,L,x,fa,D,P,l,f,e,ca,q,Q,J,E,o,K,M;function w(a,b){function g(){}g.prototype=a;var c=new g,d;for(d in b)c[d]=b[d];b.toString!==Object.prototype.toString&&(c.toString=b.toString);return c}function ja(a){return a instanceof Array?function(){return F.iter(a)}:"function"==typeof a.iterator?v(a,a.iterator):a.iterator}function v(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=ma++);var g;null==a.hx__closures__?a.hx__closures__=
{}:g=a.hx__closures__[b.__id__];null==g&&(g=function(){return g.method.apply(g.scope,arguments)},g.scope=a,g.method=b,a.hx__closures__[b.__id__]=g);return g}var j={},k=function(){return L.__string_rec(this,"")},$=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};j.EReg=$;$.__name__=["EReg"];$.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];
else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:$};var F=function(){};j.HxOverrides=F;F.__name__=["HxOverrides"];F.dateStr=function(a){var b=a.getMonth()+1,g=a.getDate(),c=a.getHours(),d=a.getMinutes(),e=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>g?"0"+g:""+g)+" "+(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)};F.strDate=function(a){switch(a.length){case 8:var a=
a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+a;}};F.cca=function(a,b){var g=a.charCodeAt(b);return g!=g?void 0:g};F.substr=function(a,b,g){if(null!=b&&0!=b&&null!=g&&0>g)return"";null==g&&(g=a.length);0>b?(b=a.length+b,0>b&&(b=
0)):0>g&&(g=a.length+g-b);return a.substr(b,g)};F.remove=function(a,b){for(var g=0,c=a.length;g<c;){if(a[g]==b)return a.splice(g,1),!0;g++}return!1};F.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var ia=function(){};j.Lambda=ia;ia.__name__=["Lambda"];ia.array=function(a){for(var b=[],a=ja(a)();a.hasNext();){var g=a.next();b.push(g)}return b};ia.count=function(a,b){var g=0;if(null==b)for(var c=ja(a)();c.hasNext();)c.next(),
g++;else for(c=ja(a)();c.hasNext();){var d=c.next();b(d)&&g++}return g};var aa=function(){this.length=0};j.List=aa;aa.__name__=["List"];aa.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:aa};var ga=function(){};
j.IMap=ga;ga.__name__=["IMap"];var R=function(){};j.Reflect=R;R.__name__=["Reflect"];R.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};R.field=function(a,b){var g=null;try{g=a[b]}catch(c){}return g};R.fields=function(a){var b=[];if(null!=a){var g=Object.prototype.hasOwnProperty,c;for(c in a)"__id__"!=c&&"hx__closures__"!=c&&g.call(a,c)&&b.push(c)}return b};R.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};R.compareMethods=function(a,b){return a==
b?!0:!R.isFunction(a)||!R.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};R.deleteField=function(a,b){if(!R.hasField(a,b))return!1;delete a[b];return!0};var r=function(){};j.Std=r;r.__name__=["Std"];r.string=function(a){return L.__string_rec(a,"")};r.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==F.cca(a,1)||88==F.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};r.parseFloat=function(a){return parseFloat(a)};r.random=function(a){return 0>=a?0:Math.floor(Math.random()*
a)};var X=function(){this.b=""};j.StringBuf=X;X.__name__=["StringBuf"];X.prototype={addSub:function(a,b,g){this.b+=null==g?F.substr(a,b,null):F.substr(a,b,g)},__class__:X};var V=function(){};j.StringTools=V;V.__name__=["StringTools"];V.urlEncode=function(a){return encodeURIComponent(a)};V.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};V.isSpace=function(a,b){var g=F.cca(a,b);return 8<g&&14>g||32==g};V.ltrim=function(a){for(var b=a.length,g=0;g<b&&V.isSpace(a,g);)g++;return 0<
g?F.substr(a,g,b-g):a};V.rtrim=function(a){for(var b=a.length,g=0;g<b&&V.isSpace(a,b-g-1);)g++;return 0<g?F.substr(a,0,b-g):a};V.trim=function(a){return V.ltrim(V.rtrim(a))};var I=j.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};I.TNull=["TNull",0];I.TNull.toString=k;I.TNull.__enum__=I;I.TInt=["TInt",1];I.TInt.toString=k;I.TInt.__enum__=I;I.TFloat=["TFloat",2];I.TFloat.toString=k;I.TFloat.__enum__=I;I.TBool=["TBool",
3];I.TBool.toString=k;I.TBool.__enum__=I;I.TObject=["TObject",4];I.TObject.toString=k;I.TObject.__enum__=I;I.TFunction=["TFunction",5];I.TFunction.toString=k;I.TFunction.__enum__=I;I.TClass=function(a){a=["TClass",6,a];a.__enum__=I;a.toString=k;return a};I.TEnum=function(a){a=["TEnum",7,a];a.__enum__=I;a.toString=k;return a};I.TUnknown=["TUnknown",8];I.TUnknown.toString=k;I.TUnknown.__enum__=I;var N=function(){};j.Type=N;N.__name__=["Type"];N.getClass=function(a){return null==a?null:a.__class__};
N.getClassName=function(a){return a.__name__.join(".")};N.getEnumName=function(a){return a.__ename__.join(".")};N.resolveClass=function(a){a=j[a];return null==a||!a.__name__?null:a};N.resolveEnum=function(a){a=j[a];return null==a||!a.__ename__?null:a};N.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],
b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};N.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};N.createEnum=function(a,b,g){var c=R.field(a,b);if(null==c)throw"No such constructor "+b;if(R.isFunction(c)){if(null==g)throw"Constructor "+b+" need parameters";return c.apply(a,g)}if(null!=g&&0!=g.length)throw"Constructor "+b+" does not need parameters";
return c};N.getEnumConstructs=function(a){return a.__constructs__.slice()};N["typeof"]=function(a){switch(typeof a){case "boolean":return I.TBool;case "string":return I.TClass(String);case "number":return Math.ceil(a)==a%2147483648?I.TInt:I.TFloat;case "object":if(null==a)return I.TNull;var b=a.__enum__;if(null!=b)return I.TEnum(b);a=a.__class__;return null!=a?I.TClass(a):I.TObject;case "function":return a.__name__||a.__ename__?I.TObject:I.TFunction;case "undefined":return I.TNull;default:return I.TUnknown}};
j.XmlType={__ename__:["XmlType"],__constructs__:[]};var C=function(){};j.Xml=C;C.__name__=["Xml"];C.parse=function(a){return H.Parser.parse(a)};C.createElement=function(a){var b=new C;b.nodeType=C.Element;b._children=[];b._attributes=new B.StringMap;b.set_nodeName(a);return b};C.createPCData=function(a){var b=new C;b.nodeType=C.PCData;b.set_nodeValue(a);return b};C.createCData=function(a){var b=new C;b.nodeType=C.CData;b.set_nodeValue(a);return b};C.createComment=function(a){var b=new C;b.nodeType=
C.Comment;b.set_nodeValue(a);return b};C.createDocType=function(a){var b=new C;b.nodeType=C.DocType;b.set_nodeValue(a);return b};C.createProcessingInstruction=function(a){var b=new C;b.nodeType=C.ProcessingInstruction;b.set_nodeValue(a);return b};C.createDocument=function(){var a=new C;a.nodeType=C.Document;a._children=[];return a};C.prototype={addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&F.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==
this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var g=this._children[a];if(g.nodeType==C.Element)return g;a++}return null},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,g=this.x.length;b<g;){var c=this.x[b];if(c.nodeType==C.Element&&c._nodeName==a)break;b++}this.cur=b;return b<g},next:function(){for(var b=this.cur,g=this.x.length;b<g;){var c=this.x[b];b++;if(c.nodeType==C.Element&&
c._nodeName==a)return this.cur=b,c}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=C.Element)throw"bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=C.Element)throw"bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=C.Element)throw"bad nodeType";return this._attributes.get(a)},
set_nodeValue:function(a){if(this.nodeType==C.Element||this.nodeType==C.Document)throw"bad nodeType";return this._nodeValue=a},get_nodeValue:function(){if(this.nodeType==C.Element||this.nodeType==C.Document)throw"bad nodeType";return this._nodeValue},set_nodeName:function(a){if(this.nodeType!=C.Element)throw"bad nodeType";return this._nodeName=a},get_nodeName:function(){if(this.nodeType!=C.Element)throw"bad nodeType";return this._nodeName},__class__:C};O=function(){};da=void 0;c=void 0;p=void 0;i=
void 0;h=void 0;j["com.nick.legend_of_korra.republic_city_run.DocumentApp"]=O;O.__name__=["com","nick","legend_of_korra","republic_city_run","DocumentApp"];O.main=function(){D.init();O._fillEntity=new P;O._fillSprite=new l.FillSprite(0,960,560);O._fillEntity.add(O._fillSprite);D.root.addChild(O._fillEntity);d.JSEmbedProxy.get_isCrossdomain()?d.WorkinCloud.instance.get_assets().setCrossdomainBaseUrl(O.appendAssetsToUrl(d.JSEmbedProxy.get_base())):d.WorkinCloud.instance.get_assets().set_baseUrl(O.trimUrl(d.JSEmbedProxy.get_base()));
d.WorkinCloud.instance.get_dispatcher().addEventListener(G.ConstantsCloud.EVENT_FILES_LOADED,O._onBootstrapLoad);d.WorkinCloud.instance.get_assets().addPackDef("bootstrap");d.WorkinCloud.instance.get_assets().loadPack("bootstrap")};O._onBootstrapLoad=function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(G.ConstantsCloud.EVENT_FILES_LOADED,O._onBootstrapLoad);O._initServices();U.delay(O._initMain,800)};O._initMain=function(){O._main=new da};O._initServices=function(){for(var a=d.WorkinCloud.instance.get_assets().getXML(c.constants.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=
a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&(d.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics"),u.ServiceAnalytics.init(b.att.resolve("id").toString()))}}};O.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=F.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=F.substr(a,b,a.length-b);return a=O.appendAssetsToUrl(a)};
O.appendAssetsToUrl=function(a){if(0==a.length)return a;"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<a.length-9&&(a+="assets/");return a};p=function(){};j["com.nick.legend_of_korra.republic_city_run.EulaManager"]=p;p.__name__=["com","nick","legend_of_korra","republic_city_run","EulaManager"];p.showEulaLinks=function(){p._flagConstructed||p._constructEula();p._eulaLink.hidden=!1;p._privacyLink.hidden=!1;p._invisLink.hidden=!0};p.hideEulaLinks=function(){p._eulaLink.hidden=!0;p._privacyLink.hidden=
!0;p._invisLink.hidden=!1};p._openEula=function(){p._eulaLink.removeEventListener("click",p._onEventShowEulaFrame,!1);p._eulaLink.addEventListener("click",p._onEventHideEulaFrame,!1);p._fillerFrame.hidden=!1;p._eulaFrame.src=p._eulaURL;p._eulaFrame.addEventListener("load",p._onEventEulaFrameLoad,!1);p._eulaLink.innerHTML="EULA [X]";p._privacyLink.hidden=!0};p._closeEula=function(){p._eulaFrame.hidden=!0;p._fillerFrame.hidden=!0;p._eulaLink.removeEventListener("click",p._onEventHideEulaFrame,!1);p._eulaLink.addEventListener("click",
p._onEventShowEulaFrame,!1);p._eulaFrame.removeEventListener("load",p._onEventEulaFrameLoad,!1);p._eulaLinkOpened=!0;p._eulaLink.innerHTML="EULA";p._privacyLink.hidden=!1};p._openPrivacyPolicy=function(){p._privacyLink.removeEventListener("click",p._onEventShowPrivacyPolicyFrame,!1);p._privacyLink.addEventListener("click",p._onEventHidePrivacyPolicyFrame,!1);p._fillerFrame.hidden=!1;p._privacyFrame.src=p._privacyURL;p._privacyFrame.addEventListener("load",p._onEventPrivacyPolicyFrameLoad,!1);p._privacyLink.innerHTML=
"PRIVACY POLICY [X]";p._eulaLink.hidden=!0};p._closePrivacyPolicy=function(){p._privacyFrame.hidden=!0;p._fillerFrame.hidden=!0;p._privacyLink.removeEventListener("click",p._onEventHidePrivacyPolicyFrame,!1);p._privacyLink.addEventListener("click",p._onEventShowPrivacyPolicyFrame,!1);p._privacyFrame.removeEventListener("load",p._onEventPrivacyPolicyFrameLoad,!1);p._privacyLinkOpened=!0;p._privacyLink.innerHTML="PRIVACY POLICY";p._eulaLink.hidden=!1};p._onEventShowEulaFrame=function(){p._openEula()};
p._onEventHideEulaFrame=function(){p._closeEula()};p._onEventPrivacyPolicyFrameLoad=function(){p._privacyFrame.hidden=!1};p._onEventEulaFrameLoad=function(){p._eulaFrame.hidden=!1};p._onEventShowPrivacyPolicyFrame=function(){p._openPrivacyPolicy()};p._onEventHidePrivacyPolicyFrame=function(){p._closePrivacyPolicy()};p._constructEula=function(){if(!p._flagConstructed){var a=d.WorkinCloud.instance.get_assets().getXML(c.constants.ConstantsApp.CONFIG_XML_PATH).node.resolve("eula");a.att.resolve("align");
r.parseFloat(a.att.resolve("offsetx"));r.parseFloat(a.att.resolve("offsety"));a.att.resolve("eulaurl");p._eulaURL=a.att.resolve("eulaurl");p._privacyURL=a.att.resolve("privacyurl");p._flagConstructed=!0;p._invisLink=x.document.createElement("div");p._invisLink.style.width="100px";p._invisLink.style.height="40px";p._invisLink.style.right="-15px";p._invisLink.style.top="100px";p._invisLink.style.position="absolute";p._invisLink.style.zIndex=2;p._invisLink.style.color="#2A4CFF";p._invisLink.innerHTML=
"";x.document.getElementById("embedtarget").appendChild(p._invisLink);p._eulaLink=x.document.createElement("div");p._eulaLink.style.width="100px";p._eulaLink.style.height="40px";p._eulaLink.style.right="-15px";p._eulaLink.style.top="5px";p._eulaLink.style.position="absolute";p._eulaLink.style.zIndex=2;p._eulaLink.style.color="#2A4CFF";p._eulaLink.innerHTML="EULA";x.document.getElementById("embedtarget").appendChild(p._eulaLink);p._eulaLink.addEventListener("click",p._onEventShowEulaFrame,!1);p._privacyLink=
x.document.createElement("div");p._privacyLink.style.width="150px";p._privacyLink.style.height="40px";p._privacyLink.style.right="22px";p._privacyLink.style.top="35px";p._privacyLink.style.position="absolute";p._privacyLink.style.zIndex=2;p._privacyLink.style.color="#2A4CFF";p._privacyLink.innerHTML="PRIVACY POLICY";a=x.document.getElementById("embedtarget");a.appendChild(p._privacyLink);p._privacyLink.addEventListener("click",p._onEventShowPrivacyPolicyFrame,!1);d.WorkinCloud.instance.get_assets().get_baseUrl();
"200"==eval("\n\t\t\t\ttry{\n\t\t\t\t\tvar testURL = new XMLHttpRequest(true, true);\n\t\t\t\t\ttestURL.open('GET', '"+p._eulaURL+"', false); \n\t\t\t\t\ttestURL.send();\t\t\n\t\t\t\t\ttestURL;\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\tcatch(NetworkError){\n\t\t\t\t\t//alert(NetworkError);\n\t\t\t\t\tfalse;\n\t\t\t\t}").status?null:p._eulaURL="";"200"==eval("\n\t\t\t\ttry{\n\t\t\t\t\tvar testURL = new XMLHttpRequest(true, true);\n\t\t\t\t\ttestURL.open('GET', '"+p._privacyURL+"', false); \n\t\t\t\t\ttestURL.send();\t\t\n\t\t\t\t\ttestURL;\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\tcatch(NetworkError){\n\t\t\t\t\t//alert(NetworkError);\n\t\t\t\t\tfalse;\n\t\t\t\t}").status?
null:p._privacyURL="";p._eulaFrame=x.document.createElement("iframe");p._privacyFrame=x.document.createElement("iframe");""!=p._eulaURL&&(p._eulaFrame.src=p._eulaURL);p._fillerFrame=x.document.createElement("div");p._fillerFrame.style.cssText=" \n\t\t\t\twidth: 100%; \n\t\t\t\theight: 100%; \n\t\t\t\tleft: 0px; top: 0px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground-color: #FFFFFF;\n\t\t\t";p._fillerFrame.hidden=!0;a.appendChild(p._fillerFrame);p._eulaFrame.style.cssText=" \n\t\t\t\twidth: 100%; \n\t\t\t\theight: 100%; \n\t\t\t\tleft: 0px; top: 0px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground-color: #FFFFFF;\n\t\t\t";
p._eulaFrame.hidden=!0;a.appendChild(p._eulaFrame);""!=p._privacyURL&&(p._privacyFrame.src=p._privacyURL);p._privacyFrame.style.cssText=" \n\t\t\t\twidth: 100%; \n\t\t\t\theight: 100%; \n\t\t\t\tleft: 0px; top: 0px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground-color: #FFFFFF;\n\t\t\t";p._privacyFrame.hidden=!0;a.appendChild(p._privacyFrame)}};da=function(){this._RATE_REFRESH_SCALE=0.4;this._screen=D.root;this._timeline=new P;this._screen.addChild(this._timeline);this._flagStartMusicOnInput=!1;
D.uncaughtError.connect(v(this,this.errorHandler));d.WorkinCloud.instance.get_input().prime();this._layerWorld=new P;this._layerUI=new P;this._scaleSprite=new l.Sprite;this._timeline.add(this._scaleSprite);this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._timerRefreshScale=0.0010;this._flagJSEmbedExists=this._flagJSEmbedPauseState=this._flagGameplayPaused=this._flagInitialLoadComplete=this._flagWebAudioUnlocked=this._isListeningForLoading=this._isUIActive=this._isWorldActive=
!1;L.__instanceof(D._platform.getStage(),f.html.HtmlStage)&&(c.constants.ConstantsApp.scaleFactor=L.__cast(D._platform.getStage(),f.html.HtmlStage).scaleFactor);this._flagJSEmbedExists=d.JSEmbedProxy.get_exists();d.WorkinCloud.instance.log("[Main] ScaleFactor : "+L.__cast(D._platform.getStage(),f.html.HtmlStage).scaleFactor);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MOUSE_PRESSED,!1);this._flowstack=[];this._beginEngine();this._addEventListeners()};j["com.nick.legend_of_korra.republic_city_run.Main"]=
da;da.__name__=["com","nick","legend_of_korra","republic_city_run","Main"];da.prototype={_worldDestroy:function(){this._isWorldActive&&(this._isWorldActive=!1,this._world.dispose(),this._world=null)},_generateWorld:function(){this._isWorldActive&&this._worldDestroy();this._isWorldActive=!0;this._world=new i.World(this._layerWorld);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_GENERATEWORLD))},_doSaveGame:function(){d.WorkinCloud.instance.log("[Main] Saving...");
this._sharedObject.get_data().levelFire=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE);this._sharedObject.get_data().levelWater=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_WATER);this._sharedObject.get_data().levelEarth=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_EARTH);this._sharedObject.get_data().levelAir=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_AIR);this._sharedObject.get_data().levelCollector=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR);
this._sharedObject.get_data().levelNaga=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_NAGA);this._sharedObject.get_data().levelSkyBison=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON);this._sharedObject.get_data().levelFireFerret=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET);this._sharedObject.get_data().yuans=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_YUAN_TOTAL);this._sharedObject.get_data().distance=
d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE_BEST);this._sharedObject.flush()},_onSaveGame:function(){this._doSaveGame()},_doLoadGame:function(){this._sharedObject=S.WMSharedObject.getLocal(c.constants.ConstantsApp.SHARED_OBJECT_ID);d.WorkinCloud.instance.log("[Main] _doLoadGame -  "+r.string(null==this._sharedObject.get_data())+", "+r.string(this._sharedObject.get_data().levelFire));null!=this._sharedObject.get_data().levelFire?(d.WorkinCloud.instance.log("[Main] Loading..."),
d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE,this._sharedObject.get_data().levelFire),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_WATER,this._sharedObject.get_data().levelWater),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_EARTH,this._sharedObject.get_data().levelEarth),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_AIR,this._sharedObject.get_data().levelAir),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR,
this._sharedObject.get_data().levelCollector),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_NAGA,this._sharedObject.get_data().levelNaga),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON,this._sharedObject.get_data().levelSkyBison),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET,this._sharedObject.get_data().levelFireFerret),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,this._sharedObject.get_data().yuans),
d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE_BEST,this._sharedObject.get_data().distance)):(d.WorkinCloud.instance.log("[Main] Resetting..."),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_WATER,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_EARTH,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_AIR,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR,
0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_NAGA,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET,0),c.constants.ConstantsApp.DEBUG_MODE?d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,1E4):d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE_BEST,
0))},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,d.WorkinCloud.instance.get_sound().playSound("audio/silent"))},_hideOrientationAlert:function(){d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(d.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape."),d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!1),d.JSEmbedProxy.unpause(),d.JSEmbedProxy.alertOff())},_showOrientationAlert:function(){d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)||
(d.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!"),d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!0),d.JSEmbedProxy.pause(),d.JSEmbedProxy.alertOn(d.WorkinCloud.instance.get_localize().getData("orientation_landscape").get_string()))},_onEventInput:function(a){this._handleWebAudioUnlock();if(!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)){if(this._flagStartMusicOnInput)switch(a.input){case c.constants.ConstantsApp.INPUT_CLICK:this._flagStartMusicOnInput=
!1,d.WorkinCloud.instance.get_sound().playMusic("audio/music_korra",0.5)}this._ui.handleInput(a)&&this._isWorldActive&&this._world.handleInput(a)}},_generateUI:function(){this._isUIActive=!0;var a="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_LOADING,h.screens.ScreenLoading,a?"ui/AssetScreenLoadLevel":"ui/AssetScreenSplashLocal");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_SPLASH,h.screens.ScreenSplash,a?"ui/AssetScreenSplash":
"ui/AssetScreenSplashLocal");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD,h.screens.ScreenGameplayHUD,"ui/AssetBlank");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU,h.screens.ScreenGameplayMenu,a?"ui/AssetScreenGameplayMenu":"ui_unbaked/AssetScreenGameplayMenu");D._platform.getTouch().get_supported()?this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_HELP,h.screens.ScreenHelp,a?"ui/AssetScreenHelp.jpg":"ui_unbaked/AssetScreenHelp"):this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_HELP,
h.screens.ScreenHelp,a?"ui/AssetScreenHelpDesktop.jpg":"ui_unbaked/AssetScreenHelp");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM,h.screens.ScreenQuitConfirm,a?"ui/AssetScreenQuitConfirm":"ui_unbaked/AssetScreenQuitConfirm");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_END_GAME,h.screens.ScreenEndGame,a?"ui/AssetScreenEndGame":"ui_unbaked/AssetScreenEndGame");this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_MASTER_BENDING,h.screens.ScreenMasterBending,"ui/AssetScreenOverlay");
this._ui.addScreen(c.constants.ConstantsScreen.SCREEN_SHOP,h.screens.ScreenShop,a?"ui/AssetScreenShop":"ui_unbaked/AssetScreenShop")},_enableInput:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(m.WMEventInput.EVENT_INPUT,v(this,this._onEventInput))},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(m.WMEventUpdate.EVENT_UPDATE,v(this,this._onEventUpdate));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_MUTE_TOGGLE,
v(this,this._onMuteToggle));d.WorkinCloud.instance.get_dispatcher().addEventListener(m.WMEventFlow.EVENT_FLOW,v(this,this._onFlowEvent));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SAVE_GAME,v(this,this._onSaveGame))},_runFlowStack:function(){if(0!=this._flowstack.length)for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},
_onMuteToggle:function(){},_onEventUpdate:function(a){this._dt=a.get_dt();0.12<this._dt&&(this._dt=0.12);if(this._flagJSEmbedExists&&(d.JSEmbedProxy.get_isPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=d.JSEmbedProxy.get_isPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=this._dt,0>=this._timerRefreshScale)){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&D._platform.getTouch().get_supported()){if(d.JSEmbedProxy.get_canvasHeight()>
d.JSEmbedProxy.get_canvasWidth()){this._showOrientationAlert();return}if(d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();return}}this._flagJSEmbedExists&&(a=d.JSEmbedProxy.get_canvasScale()*c.constants.ConstantsApp.scaleFactor,a!=this._scaleSprite.scaleX._value&&(this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(a)),d.WorkinCloud.instance.get_input().set_scale(a)))}this._isUIActive&&this._ui.update(this._dt);this._isWorldActive&&
(this._world.update(this._dt),this._world.render());d.WorkinCloud.instance.get_sound().update(this._dt);d.WorkinCloud.instance.get_input().update(this._dt);d.WorkinCloud.instance.updateStack(this._dt);d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):
d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));this._runFlowStack()},_resetFlagsResults:function(){d.WorkinCloud.instance.resetValue(c.constants.ConstantsApp.BOOL_GAME_LOSE);d.WorkinCloud.instance.resetValue(c.constants.ConstantsApp.BOOL_GAME_WIN);
d.WorkinCloud.instance.resetValue(c.constants.ConstantsApp.BOOL_LEVEL_LOSE);d.WorkinCloud.instance.resetValue(c.constants.ConstantsApp.BOOL_LEVEL_WIN)},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_PAUSED,!1)},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_PAUSED,!0)},_onGameNew:function(){d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_SCORE,
0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_COMBO,0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_SPEED,0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_CHI,c.constants.ConstantsApp.LIMIT_CHI);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_ENVIRONMENT,r.random(3)+1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_HEALTH,
3);this._resetFlagsResults()},_gotoEndGame:function(){d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE)>d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE_BEST)&&d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE_BEST,d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE));d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_YUAN));this._doSaveGame();
this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_END_GAME);this._worldDestroy();u.ServiceAnalytics.sendMilestone("custom7")},_replay:function(){this._doSaveGame();this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD);this._unpauseGameplay();this._onGameNew();this._gotoAndPlayGame()},_gotoSplash:function(){this._enableInput();this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_SPLASH,!1);u.ServiceAnalytics.sendMilestone("custom2")},_skipSplashGoToAndPlayGame:function(){this._enableInput();
u.ServiceAnalytics.sendMilestone("custom2");c.constants.ConstantsApp.OPTION_SKIP_SPLASH&&(this._flagStartMusicOnInput=!0);this._gotoAndPlayGame()},_onGenerateWorld:function(){this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!1);u.ServiceAnalytics.sendMilestone("custom6");d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_GENERATEWORLD,v(this,this._onGenerateWorld))},_gotoAndPlayGame:function(){var a="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);
if(G.ConstantsCloud.getIsAndroid()){if(!this._loadChunks(["gameplay_no_audio"],v(this,this._eventLoadCompleteGameplay)))return}else if(!this._loadChunks([a?"gameplay":"gameplay_international"],v(this,this._eventLoadCompleteGameplay)))return;d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_GENERATEWORLD,v(this,this._onGenerateWorld));this._generateWorld()},_executeFlowStack:function(a){switch(a){case c.constants.ConstantsScreen.FLOW_SPLASH_PLAY:this._gotoAndPlayGame();
d.WorkinCloud.instance.get_sound().playMusic("audio/music_korra",0.5);break;case c.constants.ConstantsScreen.FLOW_CHARACTER_SELECT_SPLASH:this._gotoAndPlayGame();break;case c.constants.ConstantsScreen.FLOW_GAME_START:d.WorkinCloud.instance.get_sound().playMusic("audio/music_korra",0.5);this._gotoAndPlayGame();break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_OPEN:d.WorkinCloud.instance.get_sound().playSound("audio/impact_deep");this._ui.openScreen(c.constants.ConstantsScreen.SCREEN_MASTER_BENDING,
!1);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED,!0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER,4);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE:this._ui.closeScreen(c.constants.ConstantsScreen.SCREEN_MASTER_BENDING,!1);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED,!1);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER,0);break;case c.constants.ConstantsScreen.FLOW_SHOP_OPEN:this._ui.openScreen(c.constants.ConstantsScreen.SCREEN_SHOP,
!1);break;case c.constants.ConstantsScreen.FLOW_SHOP_CLOSE:this._ui.closeScreen(c.constants.ConstantsScreen.SCREEN_SHOP,!1);this._doSaveGame();break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU:this._pauseGameplay();this._ui.openScreen(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.closeScreen(c.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(c.constants.ConstantsScreen.SCREEN_HELP,
!1);u.ServiceAnalytics.sendMilestone("custom3");break;case c.constants.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(c.constants.ConstantsScreen.SCREEN_HELP);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(c.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:this._resetFlagsResults();this._gotoEndGame(!1);break;case c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(c.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM);
break;case c.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);break;case c.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_LOADING),this._replay()}},errorHandler:function(a){d.WorkinCloud.instance.log("Error:"+a)},_registerInput:function(){d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_SPACE,[e.Key.Space]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_LEFT,
[e.Key.Left,e.Key.A]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_RIGHT,[e.Key.Right,e.Key.D]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_UP,[e.Key.Up,e.Key.W]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_DOWN,[e.Key.Down,e.Key.S]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_E,[e.Key.E]);d.WorkinCloud.instance.get_input().registerInput(c.constants.ConstantsApp.INPUT_Z,
[e.Key.Z])},_eventLoadCompleteInitial:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(G.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);this._flagInitialLoadComplete=!0;c.constants.ConstantsApp.OPTION_SKIP_SPLASH?U.delay(v(this,this._skipSplashGoToAndPlayGame),800):U.delay(v(this,this._gotoSplash),800)},_eventLoadCompleteGameplay:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(G.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);U.delay(v(this,
this._gotoAndPlayGame),800)},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0)},_loadChunks:function(a,b,g){null==g&&(g=800);for(var s=0,e=!0;s<a.length;)d.WorkinCloud.instance.get_assets().isChunkLoaded(a[s])||(e=!1),s++;if(e)return!0;this._loadChunksCurrent=a;this._loadCallbackMethod=b;if(0<g)return U.delay(v(this,this._loadChunksDelayCallback),g),this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_LOADING,!1),!1;d.WorkinCloud.instance.get_dispatcher().addEventListener(G.ConstantsCloud.EVENT_FILES_LOADED,
this._loadCallbackMethod);for(s=0;s<a.length;)d.WorkinCloud.instance.get_assets().isChunkLoaded(a[s])||d.WorkinCloud.instance.get_assets().loadChunk(a[s]),s++;this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_LOADING,!1);return!1},_beginInitialLoad:function(){this._loadChunks(["initial"+(c.constants.ConstantsApp.OPTION_RETINA?"_hd":"")],v(this,this._eventLoadCompleteInitial),800);d.WorkinCloud.instance.get_assets().loadFolder("fonts_"+d.WorkinCloud.instance.getString(G.ConstantsCloud.STRING_REGION_ID))},
_parseConfigXML:function(){d.WorkinCloud.instance.log("[Main](_parseConfigXML) Parse Config XML: "+c.constants.ConstantsApp.CONFIG_XML_PATH);for(var a=d.WorkinCloud.instance.get_assets().getXML(c.constants.ConstantsApp.CONFIG_XML_PATH),b=a.node.resolve("packs").nodes.resolve("pack").iterator();b.hasNext();){for(var g=b.next(),s=[],e=g.nodes.resolve("flump").iterator();e.hasNext();){var f=e.next();s.push(f.att.resolve("id").toString())}d.WorkinCloud.instance.get_assets().addPackDef(g.att.resolve("id").toString(),
s)}for(b=a.node.resolve("chunks").nodes.resolve("chunk").iterator();b.hasNext();)g=b.next(),d.WorkinCloud.instance.get_assets().addChunk(g.att.resolve("id").toString(),g);d.WorkinCloud.instance.setString(G.ConstantsCloud.STRING_REGION_ID,r.string(a.node.resolve("localization").node.resolve("region").get_innerData()));d.WorkinCloud.instance.log("[Main] Localization : Set Region: "+d.WorkinCloud.instance.getString(G.ConstantsCloud.STRING_REGION_ID))},_beginEngine:function(){d.WorkinCloud.instance.log("[Main](_beginEngine)");
d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_CANVAS_SCALE,1);d.WorkinCloud.instance.setDefault(c.constants.ConstantsApp.BOOL_PAUSED,0);d.WorkinCloud.instance.setDefault(c.constants.ConstantsApp.BOOL_MUTED,0);d.WorkinCloud.instance.setDefault(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED,0);d.WorkinCloud.instance.setDefault(c.constants.ConstantsApp.BOOL_MASTER_BENDING,0);d.WorkinCloud.instance.setDefault(c.constants.ConstantsApp.BOOL_SHOW_TIP_MASTER,0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_SCORE,
0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_COMBO,0);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_CHI,c.constants.ConstantsApp.LIMIT_CHI);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_ENVIRONMENT,r.random(3)+1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE_BEST,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,
0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_HEALTH,c.constants.ConstantsApp.HEALTH_MAX);d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_UPGRADE_ID,c.constants.ConstantsApp.INT_LEVEL_COLLECTOR);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.BOOL_LOW_QUAL_MODE,!0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE,1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_WATER,1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_AIR,
1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_EARTH,1);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_NAGA,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON,0);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET,0);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,
c.constants.ConstantsApp.ELEMENT_EARTH);this._parseConfigXML();this._timeline.add(new ba.Updater);this._registerInput();this._ui=new h.ScreenManager(this._layerUI);this._generateUI();this._ui.changeScreenTo(c.constants.ConstantsScreen.SCREEN_LOADING);this._doLoadGame();this._beginInitialLoad()},__class__:da};c={constants:{}};c.constants.ConstantsApp=function(){};j["com.nick.legend_of_korra.republic_city_run.data.constants.ConstantsApp"]=c.constants.ConstantsApp;c.constants.ConstantsApp.__name__="com,nick,legend_of_korra,republic_city_run,data,constants,ConstantsApp".split(",");
c.constants.ConstantsApp.canUseMasterMenu=function(){return(0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE)||0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_WATER)||0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_EARTH)||0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_AIR))&&0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH)&&!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED)&&
!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING)};c.constants.ConstantsApp.playEqualizerGrunt=function(){var a=r.random(3)+1;d.WorkinCloud.instance.get_sound().playSound("audio/equalizer_hit_0"+a)};c.constants.ConstantsApp.getRandomElement=function(){switch(r.random(4)){case 1:return c.constants.ConstantsApp.ELEMENT_WATER;case 2:return c.constants.ConstantsApp.ELEMENT_EARTH;case 3:return c.constants.ConstantsApp.ELEMENT_FIRE}return c.constants.ConstantsApp.ELEMENT_AIR};
c.constants.ConstantsScreen=function(){};j["com.nick.legend_of_korra.republic_city_run.data.constants.ConstantsScreen"]=c.constants.ConstantsScreen;c.constants.ConstantsScreen.__name__="com,nick,legend_of_korra,republic_city_run,data,constants,ConstantsScreen".split(",");d={};G=void 0;u=void 0;m=void 0;S=void 0;ba=void 0;n=void 0;y=void 0;A=void 0;d.WMEventDispatcher=function(){this._signals=new B.StringMap};j["com.workinman.utils.WMEventDispatcher"]=d.WMEventDispatcher;d.WMEventDispatcher.__name__=
["com","workinman","utils","WMEventDispatcher"];d.WMEventDispatcher.prototype={dispose:function(){for(var a=function(a){return function(){return a.iterator()}}(this._signals)();a.hasNext();)a.next().dispose();this._signals=null},dispatchEvent:function(a){this._signals.exists(a.get_eventId())&&this._signals.get(a.get_eventId()).dispatchEvent(a)},removeEventListener:function(a,b){this._signals.exists(a)&&(this._signals.get(a).removeEventListener(b),this._signals.get(a).isEmtpy()&&(this._signals.get(a).dispose(),
this._signals.remove(a)))},addEventListener:function(a,b){this._signals.exists(a)||this._signals.set(a,new d._WMEventDispatcher.WMEventTracker);this._signals.get(a).addEventListener(b)},__class__:d.WMEventDispatcher};h={ScreenManager:function(a){d.WMEventDispatcher.call(this);this._container=a;this._layerScreen=new P;this._layerTransition=new P;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=
[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1}};j["com.nick.legend_of_korra.republic_city_run.ui.ScreenManager"]=h.ScreenManager;h.ScreenManager.__name__="com,nick,legend_of_korra,republic_city_run,ui,ScreenManager".split(",");h.ScreenManager.__super__=d.WMEventDispatcher;h.ScreenManager.prototype=w(d.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();
this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition.get_entity()),this._transition.get_dispatcher().removeEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,v(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;this._removeTransition()}this._transition=new h.transitions.TransitionBase(a);
this._transition.hide();this._transition.get_dispatcher().addEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,v(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition.get_entity());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case c.constants.ConstantsScreen.TRANSITION_SCROLL:var b=this._transitionScreenHeadedOut.get_display().x;b.set__(b._value-2E3*a);b=this._transitionScreenHeadedIn.get_display().x;b.set__(b._value-2E3*
a);0>=this._transitionScreenHeadedIn.get_display().x._value&&(this._transitionScreenHeadedIn.get_display().x.set__(0),this._flagHasTransition=!1,this._onQueueConditionMet(c.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.constants.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,
b){this.dispatchEvent(new m.WMEventInterfaceChange(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var g=0;g<this._screensQueue.length;)this._screensQueue[g].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[g].screenData),this._screensQueue.splice(g,1)),g++},dispose:function(){for(var a=0;a<this._screensOpen.length;)this._disposeScreen(this._screensOpen[a].id),a++;this._screens=this._screensQueue=null;this._removeTransition();this._container.removeChild(this._layerScreen);
this._container.removeChild(this._layerTransition);this._layerTransition=this._layerScreen=null;d.WMEventDispatcher.prototype.dispose.call(this)},get_ScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}d.WorkinCloud.instance.log("[ScreenManager](get_ScreenData) ERROR: Screen >"+a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==
a)return!0;b--}return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot.get_entity()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){d.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},_onEventTransitionOutput:function(a){a.flowId==c.constants.ConstantsScreen.OUTPUT_OPENED?(d.WorkinCloud.instance.log("[ScreenManager] Transition Midway..."),
this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=!1),this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1),this._removeScreenshot(),this._onQueueConditionMet(c.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==c.constants.ConstantsScreen.OUTPUT_CLOSED&&(d.WorkinCloud.instance.log("[ScreenManager] Transition Complete."),
this._removeScreenshot(),this._onQueueConditionMet(c.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==c.constants.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==c.constants.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_CLOSE_COMPLETE,a.screenId),this._onQueueConditionMet(c.constants.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,
a.screenId),this._flagHasTransition&&this._transitionType==c.constants.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b].get_dispatcher().removeEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,v(this,this._onEventScreenOutput));this._screensOpen[b].dispose();this._removeScreenDisplay(this._screensOpen[b].get_entity());this._screensOpen[b].disposeDisplay();this._screensOpen.splice(b,
1);break}b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{var b=N.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);if(null==b)d.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{this._screensOpen.push(b);this._addScreenDisplay(b.get_entity());if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=
b,this._transitionType){case c.constants.ConstantsScreen.TRANSITION_SCROLL:b.get_display().x.set__(c.constants.ConstantsApp.STAGE_WIDTH)}b.get_dispatcher().addEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,v(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},_addScreenToQueue:function(a,b,g){null==g&&(g="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new h.screens.data.ScreenQueueData(a,b,g))},removeAllQueuedScreens:function(){for(var a=
this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a)return!0;b--}return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return!0;b--}return!1},getQueuedScreen:function(a){null==
a&&(a="");if(0==this._screensQueue.length)return d.WorkinCloud.instance.log("[ScreenManager](getQueuedScreen) ERROR: no screens are queued. Unable to getQueuedScreen()"),null;if(""==a)return this._screensQueue[this._screensQueue.length-1].screenData;for(var b=0;b<this._screensQueue.length;){if(this._screensQueue[b].screenData.id==a)return this._screensQueue[b].screenData;b++}d.WorkinCloud.instance.log("[ScreenManager](getQueuedScreen) ERROR: Unable to find screen >"+a+"< getQueuedScreen() returning NULL.");
return null},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return d.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}d.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+a+"< is not open or does not exist. getScreen() returning NULL.");
return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(c.constants.ConstantsScreen.CONDITION_CLOSED_ALL)),this._loop--}},unpause:function(){this._isPaused=!1},pause:function(){this._isPaused=
!0},changeScreenTo:function(a,b,g,s){null==s&&(s="");null==g&&(g=-1);null==b&&(b=!1);d.WorkinCloud.instance.log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){d.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");for(b=this._screensOpen.length-1;0<=b;)this._screensOpen[b].id!=a&&this.closeScreen(this._screensOpen[b].id,!1,b),b--;this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a);this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE,
a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){d.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);var e=c.constants.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<g)switch(this._transitionType=g,this._transitionType){case c.constants.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();this._transitionPlay();break;case c.constants.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=
!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=c.constants.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.constants.ConstantsScreen.TRANSITION_FADE:this._addTransition(s,this._flagHasTransition?this._transition.get_isOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),e=c.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?
this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))for(b=1;b<this._screensOpen.length;)this.closeScreen(this._screensOpen[b].id,!1,this._screensOpen.length),b++;this._flagOpenScreenAfterTransition?(d.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,e)}else this.openScreen(a,!1)},_moveScreenToTop:function(a){var b=
this.getScreen(a);if(null==b)d.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+a+"< is not open or does not exist. Cancelling move.");else{b.isClosing()&&b.open(!1);for(var g=this._screensOpen.length-1;0<=g&&!(this._screensOpen[g].id==a);)g--;this._screensOpen.splice(g,1);b.reset();this._removeScreenDisplay(b.get_entity());this._addScreenDisplay(b.get_entity());this._screensOpen.push(b)}},openScreen:function(a,b,g,s){null==s&&(s="");null==g&&(g=0);null==b&&(b=!0);d.WorkinCloud.instance.log("[ScreenManager](openScreen) "+
a);if(this._hasScreenData(a))if(this.isScreenOpen(a))this._moveScreenToTop(a);else{if(g!=c.constants.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this.get_ScreenData(a),g,s);return}if((g==c.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||g==c.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this.get_ScreenData(a),g,s);return}}this._generateScreen(this.get_ScreenData(a))}else d.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+
a+"< does not exist. Cancelling open().")},closeAllScreens:function(a){null==a&&(a=!1);for(var b=this._screensOpen.length-1;0<=b;)this.closeScreen(this._screensOpen[b].id,a,b),b--},closeScreen:function(a,b,g){null==g&&(g=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);else{if(""==a)g=this._screensOpen[this._screensOpen.length-1];else if(0<=g&&g<this._screensOpen.length)g=this._screensOpen[g];else if(g=this.getScreen(a),null==g){this.removeQueuedScreen(a);
return}g.close(b);this._dispatchEventChange(c.constants.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=!0,g=this._screensOpen.length-1;0<=g;)this._screensOpen[g].handleInput(a)||(b=!1),g--;return b},addScreen:function(a,b,g,c,d){null==c&&(c=0);null==g&&(g="");this._screens.push(new h.screens.data.ScreenData(a,b,g,c,d))},__class__:h.ScreenManager});h.UserInterfaceElement=function(a,b,g,c,e){null==c&&(c="");this.sorted=!1;this._dispatcher=new d.WMEventDispatcher;this._entity=
new P;this._textElements=[];this._tweens=[];this._position=new n.WorkinPoint(a,b);this._layer=g;this._flagChangePosition=!1;!0==this._flagBitmapAdded?(this._assetBase=c,this._flagHasAssetBase=""==this._assetBase):(this._flagBitmapAdded=!1,this._bitmapAssetCurrent="",this._assetBase=c,""==this._assetBase?this._flagHasAssetBase=!1:(this._flagHasAssetBase=!0,this._addBitmap(this._assetBase)));null!=this._display&&null!=e&&this._display.setAnchor(e.x,e.y)};j["com.nick.legend_of_korra.republic_city_run.ui.UserInterfaceElement"]=
h.UserInterfaceElement;h.UserInterfaceElement.__name__="com,nick,legend_of_korra,republic_city_run,ui,UserInterfaceElement".split(",");h.UserInterfaceElement.prototype={_addLocalTextElement:function(a){this._entity.addChild(a.get_entity());this._textElements.push(a.get_entity())},_doMotionPoint:function(a){a=a.get_pos().copy();0==a.x%1&&(a.x+=0.0010);0==a.y%1&&(a.y+=0.0010);return a},_doMotionFloat:function(a){a=a.get_pos().x;0==a%1&&(a+=0.0010);return a},disposeDisplay:function(){this._display=null},
dispose:function(){d.WorkinCloud.instance.log("[UserInterfaceElement] dispose begun");this._entity.dispose();this._disposeBitmapContainer();this._dispatcher.dispose();for(var a=0,b=0;a<this._textElements.length;)this._entity.removeChild(this._textElements[a]),this._textElements[a].dispose(),a++;this._textElements=null;for(a=0;a<this._tweens.length;){for(b=0;b<this._tweens[a].length;)this._tweens[a][b].dispose(),b++;this._tweens[a]=null;a++}this._position=this._entity=this._dispatcher=this._display=
this._tweens=null},_disposeBitmapContainer:function(){!1!=this._flagBitmapAdded&&(this._flagBitmapAdded=!1,this._display.dispose())},_addBitmap:function(a){if(this._flagBitmapAdded){if(this._bitmapAssetCurrent==a)return;this._disposeBitmapContainer()}this._bitmapAssetCurrent=a;""!=this._bitmapAssetCurrent&&(this._flagBitmapAdded=!0,this._display=new l.ImageSprite(d.WorkinCloud.instance.get_assets().getTexture(this._bitmapAssetCurrent)),this._entity.add(this._display),this.renderPosition())},_initializeTween:function(a){switch(a.get_type()){case "tx":a.setStartFast(this._position.x,
this._position.x);break;case "ty":a.setStartFast(this._position.y,this._position.y);break;case "rtx":a.setStartFast(this._position.x,this._position.x);break;case "rty":a.setStartFast(this._position.y,this._position.y);break;case "":a.setStart(this._position);break;case "t":a.setStart(this._position);break;case "sx":a.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "sy":a.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "s":a.setStartFast(this._display.scaleX._value,
this._display.scaleY._value);break;case "a":a.setStartFast(this._display.alpha._value,this._display.alpha._value);break;case "r":a.setStartFast(this._display.rotation._value,this._display.rotation._value)}},_applyTween:function(a,b){this._flagChangePosition=!0;switch(b.get_type()){case "tx":if(b.isReady()){var g=this._doMotionFloat(b,a);0!=g%1&&(this._position.x=g)}else this._initializeTween(b);break;case "ty":b.isReady()?this._position.y=this._doMotionFloat(b,a):this._initializeTween(b);break;case "rtx":b.isReady()?
(g=this._doMotionFloat(b,a),0!=g%1&&(this._position.x=g)):this._initializeTween(b);break;case "rty":b.isReady()?this._position.y=this._doMotionFloat(b,a):this._initializeTween(b);break;case "":b.isReady()?this._position.toPoint(this._doMotionPoint(b,a)):this._initializeTween(b);break;case "t":b.isReady()?this._position.toPoint(this._doMotionPoint(b,a)):this._initializeTween(b);break;case "sx":b.isReady()?this._display.scaleX.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "sy":b.isReady()?
this._display.scaleY.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "s":b.isReady()?(g=this._doMotionPoint(b,a),this._display.scaleX.set__(g.x),this._display.scaleY.set__(g.y)):this._initializeTween(b);break;case "a":b.isReady()?this._display.alpha.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "r":b.isReady()?this._display.rotation.set__(this._doMotionFloat(b,a)):this._initializeTween(b)}},_updatePositionFromTween:function(a){for(var b=this._tweens[0].length;0<=
b;)this._tweens[0][b].update(a),this._applyTween(a,this._tweens[0][b]),this._tweens[0][b].complete&&(this._tweens[0].splice(b,1),this._onTweenStageComplete()),b--;0==this._tweens[0].length&&(this._tweens.shift(),0==this._tweens.length&&this._onTweenAllComplete())},_onTweenAllComplete:function(){},_onTweenStageComplete:function(){},update:function(a){0<this._tweens.length&&this._updatePositionFromTween(a);this._flagChangePosition&&this.renderPosition()},renderPosition:function(){this._flagBitmapAdded&&
(this._display.x.set__(this._position.x),this._display.y.set__(this._position.y),this._flagChangePosition=!1)},get_display:function(){return this._display},get_dispatcher:function(){return this._dispatcher},get_entity:function(){return this._entity},__class__:h.UserInterfaceElement};h.buttons={};h.buttons.ButtonBase=function(a,b,g,c,d,e,f,i){null==i&&(i="");null==c&&(c="");null==g&&(g=0);this._DEBUG_SHOW_HITBOX=!1;e=d=c;h.UserInterfaceElement.call(this,a,b,g,"",f);this._assetUp=""==c?this.get_DefaultAssetUp():
c;this._assetOver=""==d?this.get_DefaultAssetOver():d;this._assetDown=""==e?this.get_DefaultAssetDown():e;this._assetDisabled=""==i?this.get_DefaultAssetDisabled():i;this._bitmapAssetCurrent="";this._flagDragged=this._flagDown=this._flagBitmapAdded=this._flagEventListenersAdded=!1;this.enable();this._buildHitBox();this._addEventListeners()};j["com.nick.legend_of_korra.republic_city_run.ui.buttons.ButtonBase"]=h.buttons.ButtonBase;h.buttons.ButtonBase.__name__="com,nick,legend_of_korra,republic_city_run,ui,buttons,ButtonBase".split(",");
h.buttons.ButtonBase.__super__=h.UserInterfaceElement;h.buttons.ButtonBase.prototype=w(h.UserInterfaceElement.prototype,{_removeEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(m.WMEventUpdate.EVENT_UPDATE,v(this,this._onEventUpdate))},_onEventUpdate:function(a){this.update(a.get_dt())},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(m.WMEventUpdate.EVENT_UPDATE,v(this,this._onEventUpdate))},renderPosition:function(){h.UserInterfaceElement.prototype.renderPosition.call(this)},
_renderDisabled:function(){},_renderReturnUp:function(){this._renderUp()},_renderDown:function(){this._addBitmap(this._assetDown)},_renderUp:function(){this._addBitmap(this._assetUp)},update:function(a){h.UserInterfaceElement.prototype.update.call(this,a);this._flagDown&&!1==d.WorkinCloud.instance.get_input().getInput(c.constants.ConstantsApp.INPUT_CLICK)&&(null!=this._upConnection&&this._upConnection.dispose(),this._renderReturnUp())},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(h.buttons.ButtonBase.CANCEL_DRAG)},
_onUp:function(){this._flagDown&&(this._upConnection.dispose(),this._upConnection=null,this._flagDown=!1,this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(h.buttons.ButtonBase.UP))},_onDown:function(){this._flagDown=!0;this._renderDown();this._upConnection=this._hitBox.get_pointerUp().connect(v(this,this._onUpEvent));this._dispatch(h.buttons.ButtonBase.DOWN)},_click:function(){this._flagEnabled&&!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)&&
(this._dispatch(h.buttons.ButtonBase.CLICK),""!=this.get__clickFlow()&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(this.get__clickFlow())),""!=this.get__clickEvent()&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(this.get__clickEvent())))},forceClick:function(){this._click()},_dispatch:function(a){this.get__DO_DISPATCH()&&this._flagEnabled&&this._dispatcher.dispatchEvent(new m.WMEvent(a))},_onUpEvent:function(a){this._onUp(a.viewX,a.viewY)},_onDownEvent:function(a){this._onDown(a.viewX,
a.viewY)},get__clickFlow:function(){return""},get__clickEvent:function(){return""},get__DO_DISPATCH:function(){return!0},get_DefaultAssetDisabled:function(){return""},get_DefaultAssetDown:function(){return""},get_DefaultAssetOver:function(){return""},get_DefaultAssetUp:function(){return""},dispose:function(){this.disable();this._downConnection.dispose();this._downConnection=null;this._flagDown&&(this._upConnection.dispose(),this._upConnection=null);this._hitBox.dispose();this._removeEventListeners()},
_buildHitBox:function(){this._DEBUG_SHOW_HITBOX?this._hitBox=new l.FillSprite(16711680,this._display.getNaturalWidth()|0,this._display.getNaturalHeight()|0):(this._hitBox=new l.ImageSprite(D.createTexture(this._display.getNaturalWidth()|0,this._display.getNaturalHeight()|0)),this._hitBox.alpha.set__(0));var a=new P;a.add(this._hitBox);this._entity.addChild(a);this._downConnection=this._hitBox.get_pointerDown().connect(v(this,this._onDownEvent))},disable:function(){this._flagEnabled=!1;this._renderDisabled()},
enable:function(){this._flagEnabled||(this._flagEnabled=!0,this._renderUp())},__class__:h.buttons.ButtonBase});h.buttons.ButtonElement=function(a,b,g,c,e,f,i){null==c&&(c=0);this._onAssets=e;this._offAssets=f;this._elementLevelConst=a;e=(a=0<d.WorkinCloud.instance.getValue(this._elementLevelConst))?this._onAssets:this._offAssets;h.buttons.ButtonBase.call(this,b,g,c,e[0],e[1],e[3==e.length?2:1],i);this._flagEnabled=a};j["com.nick.legend_of_korra.republic_city_run.ui.buttons.ButtonElement"]=h.buttons.ButtonElement;
h.buttons.ButtonElement.__name__="com,nick,legend_of_korra,republic_city_run,ui,buttons,ButtonElement".split(",");h.buttons.ButtonElement.__super__=h.buttons.ButtonBase;h.buttons.ButtonElement.prototype=w(h.buttons.ButtonBase.prototype,{get__clickEvent:function(){var a=0<d.WorkinCloud.instance.getValue(this._elementLevelConst),b=a?this._onAssets:this._offAssets;this._assetUp=b[0];this._assetOver=b[1];this._assetDown=b[3==b.length?2:1];this._flagEnabled=a;return c.constants.ConstantsApp.EVENT_MUTE_TOGGLE},
__class__:h.buttons.ButtonElement});h.buttons.ButtonSoundToggle=function(a,b,g,s,e,f){null==g&&(g=0);this._onAssets=s;this._offAssets=e;s=d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MUTED)?this._offAssets:this._onAssets;this._assetUp=s[0];this._assetOver=s[1];this._assetDown=s[3==s.length?2:1];h.buttons.ButtonBase.call(this,a,b,g,s[0],s[1],s[3==s.length?2:1],f)};j["com.nick.legend_of_korra.republic_city_run.ui.buttons.ButtonSoundToggle"]=h.buttons.ButtonSoundToggle;h.buttons.ButtonSoundToggle.__name__=
"com,nick,legend_of_korra,republic_city_run,ui,buttons,ButtonSoundToggle".split(",");h.buttons.ButtonSoundToggle.__super__=h.buttons.ButtonBase;h.buttons.ButtonSoundToggle.prototype=w(h.buttons.ButtonBase.prototype,{get__clickEvent:function(){return""},_click:function(){if(this._flagEnabled){d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MUTED,!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MUTED));d.WorkinCloud.instance.get_sound().setMute(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MUTED));
d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MUTED)||d.WorkinCloud.instance.get_sound().playMusic("audio/music_korra",0.5);var a=d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MUTED)?this._offAssets:this._onAssets;this._assetUp=a[0];this._assetOver=a[1];this._assetDown=a[3==a.length?2:1];this._renderReturnUp()}},__class__:h.buttons.ButtonSoundToggle});h.buttons.ButtonUpgrade=function(a,b,g,s,e,f,i){null==s&&(s=0);this._upgradeID=a;this._onAssets=e;this._offAssets=f;a=
d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_UPGRADE_ID)==this._upgradeID?this._onAssets:this._offAssets;h.buttons.ButtonBase.call(this,b,g,s,a[0],a[1],a[3==a.length?2:1],i)};j["com.nick.legend_of_korra.republic_city_run.ui.buttons.ButtonUpgrade"]=h.buttons.ButtonUpgrade;h.buttons.ButtonUpgrade.__name__="com,nick,legend_of_korra,republic_city_run,ui,buttons,ButtonUpgrade".split(",");h.buttons.ButtonUpgrade.__super__=h.buttons.ButtonBase;h.buttons.ButtonUpgrade.prototype=w(h.buttons.ButtonBase.prototype,
{get__clickEvent:function(){return c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID},_eventUpdateUpgradeID:function(){var a=d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_UPGRADE_ID)==this._upgradeID?this._onAssets:this._offAssets;this._assetUp=a[0];this._assetOver=a[1];this._assetDown=a[3==a.length?2:1];this._renderReturnUp()},_onDownClick:function(){var a=d.WorkinCloud.instance.getValue(this._upgradeID);d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_COST,100*
(a+1));d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_UPGRADE_LEVEL,a);d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_UPGRADE_ID,this._upgradeID);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID))},_removeEventListeners:function(){h.buttons.ButtonBase.prototype._removeEventListeners.call(this);this._dispatcher.removeEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onDownClick));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID,
v(this,this._eventUpdateUpgradeID))},_addEventListeners:function(){h.buttons.ButtonBase.prototype._addEventListeners.call(this);this._dispatcher.addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onDownClick));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID,v(this,this._eventUpdateUpgradeID))},__class__:h.buttons.ButtonUpgrade});h.displays={};h.displays.Display=function(a,b,g,c,d){null==c&&(c="");this._flagRefresh=!0;h.UserInterfaceElement.call(this,
a,b,g,c,d);this._addEventListeners()};j["com.nick.legend_of_korra.republic_city_run.ui.displays.Display"]=h.displays.Display;h.displays.Display.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,Display".split(",");h.displays.Display.__super__=h.UserInterfaceElement;h.displays.Display.prototype=w(h.UserInterfaceElement.prototype,{dispose:function(){h.UserInterfaceElement.prototype.dispose.call(this);this._removeEventListeners()},_updateValue:function(){return""},_refresh:function(){},
_onUpdateDisplay:function(a){this._flagRefresh&&a.get_data().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,v(this,this._onUpdateDisplay))},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,v(this,this._onUpdateDisplay))},__class__:h.displays.Display});h.displays.DisplayChi=function(a,
b,g,c,d){null==c&&(c="");h.displays.Display.call(this,a,b,g,c,d);this._xStart=a};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayChi"]=h.displays.DisplayChi;h.displays.DisplayChi.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayChi".split(",");h.displays.DisplayChi.__super__=h.displays.Display;h.displays.DisplayChi.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.FLOAT_CHI},_refresh:function(){this._position.x=
this._xStart-200*(1-d.WorkinCloud.instance.getFloat(this._updateValue())/c.constants.ConstantsApp.LIMIT_CHI)},__class__:h.displays.DisplayChi});h.displays.DisplayDescription=function(a,b,g,s,e){null==s&&(s="");this._english="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.displays.Display.call(this,a,b,g,this._english?s:"ui/AssetBlank",e);this._topText=new y.TextLocalized(250,14,"debugtext","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,
0.5)});this._middleText=new y.TextLocalized(250,64,"debugtext","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)});this._botomText=new y.TextLocalized(250,95,"debugtext","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)});this._english||(this._addLocalTextElement(this._topText),this._addLocalTextElement(this._botomText),this._addLocalTextElement(this._middleText));this._refresh()};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayDescription"]=
h.displays.DisplayDescription;h.displays.DisplayDescription.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayDescription".split(",");h.displays.DisplayDescription.__super__=h.displays.Display;h.displays.DisplayDescription.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.STRING_UPGRADE_ID},_refresh:function(){this._upgradeID=d.WorkinCloud.instance.getString(this._updateValue());switch(this._upgradeID){case c.constants.ConstantsApp.INT_LEVEL_COLLECTOR:this._english&&
this._addBitmap("ui/upgrade_yuans");this._topText.set_text("shop_yuanU1");this._middleText.set_text("shop_yuanU2");this._botomText.set_text("shop_yuanU3");break;case c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET:this._english&&this._addBitmap("ui/upgrade_ferret");this._topText.set_text("shop_ferretU1");this._middleText.set_text("shop_ferretU2");this._botomText.set_text("shop_ferretU3");break;case c.constants.ConstantsApp.INT_LEVEL_NAGA:this._english&&this._addBitmap("ui/upgrade_naga");this._topText.set_text("shop_nagaU1");
this._middleText.set_text("shop_nagaU2");this._botomText.set_text("shop_nagaU3");break;case c.constants.ConstantsApp.INT_LEVEL_SKY_BISON:this._english&&this._addBitmap("ui/upgrade_bison");this._topText.set_text("shop_bisonU1");this._middleText.set_text("shop_bisonU2");this._botomText.set_text("shop_bisonU3");break;case c.constants.ConstantsApp.INT_LEVEL_FIRE:this._english&&this._addBitmap("ui/upgrade_fire");this._topText.set_text("shop_master");this._middleText.set_text("shop_fireU2");this._botomText.set_text("shop_fireU3");
break;case c.constants.ConstantsApp.INT_LEVEL_EARTH:this._topText.set_text("shop_master");this._middleText.set_text("shop_earthU2");this._botomText.set_text("shop_earthU3");this._english&&this._addBitmap("ui/upgrade_earth");break;case c.constants.ConstantsApp.INT_LEVEL_WATER:this._topText.set_text("shop_master");this._middleText.set_text("shop_waterU2");this._botomText.set_text("shop_waterU3");this._english&&this._addBitmap("ui/upgrade_water");break;case c.constants.ConstantsApp.INT_LEVEL_AIR:this._topText.set_text("shop_master"),
this._middleText.set_text("shop_airU2"),this._botomText.set_text("shop_airU3"),this._english&&this._addBitmap("ui/upgrade_air")}},__class__:h.displays.DisplayDescription});h.displays.DisplayDistance=function(a,b,g,c,e,f){null==f&&(f=!0);null==c&&(c="");this._showFPS=!1;h.displays.Display.call(this,a,b,g,c,e);this._flagRefresh=f;this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.scaleX.set__(1.2);this._text.scaleY.set__(1.2);
this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display);this._showFPS&&(this._fps=new ca.FpsDisplay,this._entity.add(this._fps));this._text.set_text(d.WorkinCloud.instance.getFloat(this._updateValue())+"")};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayDistance"]=h.displays.DisplayDistance;h.displays.DisplayDistance.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayDistance".split(",");h.displays.DisplayDistance.__super__=
h.displays.Display;h.displays.DisplayDistance.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_DISTANCE},_refresh:function(){this._showFPS||this._text.set_text(d.WorkinCloud.instance.getFloat(this._updateValue())+"")},__class__:h.displays.DisplayDistance});h.displays.DisplayDistanceBest=function(a,b,g,c,e,f){null==f&&(f=!0);null==c&&(c="");h.displays.Display.call(this,a,b,g,c,e);this._flagRefresh=f;this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),
""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.scaleX.set__(1.2);this._text.scaleY.set__(1.2);this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayDistanceBest"]=h.displays.DisplayDistanceBest;h.displays.DisplayDistanceBest.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayDistanceBest".split(",");h.displays.DisplayDistanceBest.__super__=h.displays.Display;
h.displays.DisplayDistanceBest.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_DISTANCE_BEST},_refresh:function(){this._text.set_text(""+d.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayDistanceBest});h.displays.DisplayHeart=function(a,b,g,c,d,e){null==e&&(e=0);null==c&&(c="");this._displayHealth=3;this._displayHealth=e;h.displays.Display.call(this,a,b,g,c,d)};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayHeart"]=
h.displays.DisplayHeart;h.displays.DisplayHeart.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayHeart".split(",");h.displays.DisplayHeart.__super__=h.displays.Display;h.displays.DisplayHeart.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_HEALTH},_refresh:function(){d.WorkinCloud.instance.getFloat(this._updateValue())<this._displayHealth?this._addBitmap("ui/hud_health_off"):this._addBitmap("ui/hud_health_on")},__class__:h.displays.DisplayHeart});
h.displays.DisplayLevel=function(a,b,g,s,e){null==s&&(s="");h.displays.Display.call(this,a,b,g,s,e);this._display=this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.x.set__(a+100);this._text.y.set__(b);this._entity.add(this._display);this._addLocalTextElement(new y.TextLocalized(-100,0,"rank","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0,0)}));this._refresh()};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayLevel"]=
h.displays.DisplayLevel;h.displays.DisplayLevel.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayLevel".split(",");h.displays.DisplayLevel.__super__=h.displays.Display;h.displays.DisplayLevel.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_UPGRADE_LEVEL},dispose:function(){this._text=null;h.displays.Display.prototype.dispose.call(this)},_refresh:function(){this._text.set_text(""+d.WorkinCloud.instance.getFloat(this._updateValue()))},
__class__:h.displays.DisplayLevel});h.displays.DisplayYuan=function(a,b,g,c,e,f){null==f&&(f=!0);null==c&&(c="");h.displays.Display.call(this,a,b,g,c,e);this._flagRefresh=f;this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.scaleX.set__(1.2);this._text.scaleY.set__(1.2);this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display);this._text.set_text(""+d.WorkinCloud.instance.getFloat(this._updateValue()))};
j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayYuan"]=h.displays.DisplayYuan;h.displays.DisplayYuan.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayYuan".split(",");h.displays.DisplayYuan.__super__=h.displays.Display;h.displays.DisplayYuan.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_YUAN},dispose:function(){this._text=null;h.displays.Display.prototype.dispose.call(this)},_refresh:function(){this._text.set_text(""+
d.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayYuan});h.displays.DisplayYuanCost=function(a,b,g,c,e){null==c&&(c="");h.displays.Display.call(this,a,b,g,c,e);this._display=this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayYuanCost"]=h.displays.DisplayYuanCost;
h.displays.DisplayYuanCost.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayYuanCost".split(",");h.displays.DisplayYuanCost.__super__=h.displays.Display;h.displays.DisplayYuanCost.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_YUAN_COST},dispose:function(){this._text=null;h.displays.Display.prototype.dispose.call(this)},_refresh:function(){var a=d.WorkinCloud.instance.getFloat(this._updateValue());0==a?this._text.set_text("Fully upgraded!"):
this._text.set_text(""+a)},__class__:h.displays.DisplayYuanCost});h.displays.DisplayYuanTotal=function(a,b,g,c,e,f){null==f&&(f=!0);null==c&&(c="");h.displays.Display.call(this,a,b,g,c,e);this._flagRefresh=f;this._text=new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont("Basic"),""+d.WorkinCloud.instance.getFloat(this._updateValue()));this._text.scaleX.set__(1.2);this._text.scaleY.set__(1.2);this._display=this._text;this._text.x.set__(a);this._text.y.set__(b);this._entity.add(this._display)};
j["com.nick.legend_of_korra.republic_city_run.ui.displays.DisplayYuanTotal"]=h.displays.DisplayYuanTotal;h.displays.DisplayYuanTotal.__name__="com,nick,legend_of_korra,republic_city_run,ui,displays,DisplayYuanTotal".split(",");h.displays.DisplayYuanTotal.__super__=h.displays.Display;h.displays.DisplayYuanTotal.prototype=w(h.displays.Display.prototype,{_updateValue:function(){return c.constants.ConstantsApp.INT_YUAN_TOTAL},dispose:function(){this._text=null;h.displays.Display.prototype.dispose.call(this)},
_refresh:function(){this._text.set_text(""+d.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayYuanTotal});h.screens={};h.screens.ScreenBase=function(a,b,g){null==g&&(g=0);null==b&&(b="");this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";""==b&&(b=this.get_assetId());this.id=a;h.UserInterfaceElement.call(this,0,0,g,b);this._addEventListeners();this._buttons=[];this._buildButtons();this._flagStateAnimationComplete=this._flagStateCompleteTemp=this.flagDispose=
!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState()};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenBase"]=h.screens.ScreenBase;h.screens.ScreenBase.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenBase".split(",");h.screens.ScreenBase.__super__=h.UserInterfaceElement;h.screens.ScreenBase.prototype=w(h.UserInterfaceElement.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;""!=this._states[this._stateIndex].outFunc&&
d.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");switch(this._states[this._stateIndex].actionOnComplete){case h.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.constants.ConstantsScreen.OUTPUT_OPENED,this.id));break;case h.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.constants.ConstantsScreen.OUTPUT_CLOSED,
this.id));break;case h.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);break;case h.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new m.WMEvent(this._states[this._stateIndex].actionData));break;case h.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData)}},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}return-1},
getState:function(){return this.get_state()},get_state:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var g=this._findStateIndex(a);if(0>g)d.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),d.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");else if(b||g!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=g},_addState:function(a,b,g,c,d,e){null==
e&&(e="");null==d&&(d="");null==c&&(c="");null==g&&(g=0);this._states.push(new h.screens.data.ScreenStateData(a,b,g,c,d,e))},isClosing:function(){return this.getState()==this._STATE_OUT},isOpening:function(){return this.getState()==this._STATE_IN},disable:function(){},enable:function(){},close:function(){this.setFlagDispose();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.constants.ConstantsScreen.OUTPUT_CLOSED,this.id))},open:function(){this._setOpenedState();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.constants.ConstantsScreen.OUTPUT_OPENED,
this.id))},dispose:function(){for(var a=0,b=this._buttons;a<b.length;){var g=b[a];++a;g.dispose()}this._buttons=null;this._removeEventListeners();this._states=null;h.UserInterfaceElement.prototype.dispose.call(this)},reset:function(){this._setFirstState()},handleInput:function(a){var b=!0;switch(a.input){case c.constants.ConstantsApp.INPUT_CLICK:switch(a.phase){case 1:this._onInputDown(a.x,a.y)||(b=!1);break;case 2:this._onInputMove(a.x,a.y)||(b=!1);break;case 0:this._onInputUp(a.x,a.y)||(b=!1)}break;
default:this._onInput(a)||(b=!1)}return b},update:function(a){h.UserInterfaceElement.prototype.update.call(this,a);for(var a=0,b=this._buttons;a<b.length;){var g=b[a];++a;g.renderPosition()}this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(a))},_addButton:function(a){this._buttons.push(a);this._entity.addChild(a.get_entity());return a},_buildButtons:function(){},_removeEventListeners:function(){},
_addEventListeners:function(){},_onInput:function(){return!0},_onInputMove:function(){return!0},_onInputUp:function(){return!0},_onInputDown:function(){return!0},_generateStates:function(){this._addState(this._STATE_IN,"in",h.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",h.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setCloseState:function(){this.getState()!=
this._STATE_OUT&&this._setState(this._STATE_OUT)},_setInState:function(){this.getState()!=this._STATE_IN&&this._setState(this._STATE_IN)},_setFirstState:function(){this._setState(this._STATE_IN)},setFlagDispose:function(){this.flagDispose=!0},get_assetId:function(){return"MovieClip"},__class__:h.screens.ScreenBase});h.screens.ScreenEndGame=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,g,s);this._buttonShop=new h.buttons.ButtonBase(c.constants.ConstantsApp.STAGE_WIDTH-
220,c.constants.ConstantsApp.STAGE_HEIGHT-235,0,"ui/shop_button_up.png","ui/shop_button_over.png","ui/shop_button_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonShop.get_entity());this._buttonShop.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onShopClick));this._buttonPlayAgain=new h.buttons.ButtonBase(c.constants.ConstantsApp.STAGE_WIDTH-210,c.constants.ConstantsApp.STAGE_HEIGHT-115,0,"ui/endgame_button_play_up.png","ui/endgame_button_play_over.png",
"ui/endgame_button_play_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonPlayAgain.get_entity());this._buttonPlayAgain.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onPlayAgainClick));d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE)==d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE_BEST)&&("en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID)?this._addButton(new h.UserInterfaceElement(335,
125,0,"ui/popup_new_record_small")):this._addLocalTextElement(new y.TextLocalized(475,125,"endGame_distance_rec","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),d.WorkinCloud.instance.get_sound().playSound("audio/levelup"));"en"!=d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID)&&(this._localTextGameOver=new y.TextLocalized(475,70,"game_over","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._localTextDistance=
new y.TextLocalized(475,175,"endGame_distance","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._localTextBestDistance=new y.TextLocalized(475,260,"endGame_best_distance","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._localTextYuan=new y.TextLocalized(475,345,"endGame_yuans","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._localTextTotalYuan=new y.TextLocalized(475,
430,"endGame_total_yuans","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._addLocalTextElement(this._localTextGameOver),this._addLocalTextElement(this._localTextDistance),this._addLocalTextElement(this._localTextBestDistance),this._addLocalTextElement(this._localTextYuan),this._addLocalTextElement(this._localTextTotalYuan));this._addButton(new h.displays.DisplayDistance(435,193,0,"",null,!1));this._addButton(new h.displays.DisplayDistanceBest(435,277,
0,"",null,!1));this._addButton(new h.displays.DisplayYuan(435,368,0,"",null,!1));this._addButton(new h.displays.DisplayYuanTotal(435,454,0,"",null,!1))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenEndGame"]=h.screens.ScreenEndGame;h.screens.ScreenEndGame.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenEndGame".split(",");h.screens.ScreenEndGame.__super__=h.screens.ScreenBase;h.screens.ScreenEndGame.prototype=w(h.screens.ScreenBase.prototype,{_onPlayAgainClick:function(){G.ConstantsCloud.getIsAndroid()&&
d.WorkinCloud.instance.get_sound().setSystemMute(!1);this._doFlowEvent(c.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN)},_onShopClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_SHOP_OPEN)},dispose:function(){this._buttonShop.dispose();this._buttonShop=null;this._buttonPlayAgain.dispose();this._buttonPlayAgain=null;h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenEndGame});h.screens.ScreenGameplayHUD=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");
var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,b,g,s);this._addButton(new h.UserInterfaceElement(375,535,0,"ui/chi_back.png"));this._addButton(new h.displays.DisplayChi(375,535,0,"ui/chi_fill.png"));this._addButton(new h.UserInterfaceElement(0,e?0:440,0,e?"ui/AssetScreenGameplayHud":"ui_unbaked/AssetScreenGameplayHud"));this._addButton(new h.buttons.ButtonBase(5,5,0,"ui/hud_button_pause_up.png","ui/hud_button_pause_over.png","ui/hud_button_pause_down.png",
new n.WorkinPoint(1,0))).get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onPauseClick));this._addButton(new h.displays.DisplayYuan(80,510,0));this._addButton(new h.displays.DisplayDistance(650,510,0));for(a=0;3>a;)b=a++,this._addButton(new h.displays.DisplayHeart(325+105*b,5,0,"ui/hud_health_on",null,b+1));c.constants.ConstantsApp.canUseMasterMenu()&&(this._buttonElements=new h.buttons.ButtonBase(c.constants.ConstantsApp.STAGE_WIDTH-150,-5,0,"ui/hud_master_bend_up.png","ui/hud_master_bend_over.png",
"ui/hud_master_bend_down.png",new n.WorkinPoint(1,0)),this._entity.addChild(this._buttonElements.get_entity()),this._buttonElements.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onClickElements)));e||(e=new y.TextLocalized(475,505,"hud_chi","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),a=new y.TextLocalized(250,540,"hud_yuans","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),b=new y.TextLocalized(850,
540,"hud_distance","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._addLocalTextElement(e),this._addLocalTextElement(a),this._addLocalTextElement(b))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenGameplayHUD"]=h.screens.ScreenGameplayHUD;h.screens.ScreenGameplayHUD.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenGameplayHUD".split(",");h.screens.ScreenGameplayHUD.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayHUD.prototype=
w(h.screens.ScreenBase.prototype,{_onPauseClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU)},_onClickElements:function(){c.constants.ConstantsApp.canUseMasterMenu()?this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_OPEN):d.WorkinCloud.instance.get_sound().playSound("audio/nope")},dispose:function(){c.constants.ConstantsApp.canUseMasterMenu()&&null!=this._buttonElements&&(this._buttonElements.dispose(),this._buttonElements=null);h.screens.ScreenBase.prototype.dispose.call(this)},
__class__:h.screens.ScreenGameplayHUD});h.screens.ScreenGameplayMenu=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,b,g,s);this._buttonBack=new h.buttons.ButtonBase(190,250,0,"ui/menu_button_back_up.png","ui/menu_button_back_over.png","ui/menu_button_back_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonBack.get_entity());this._buttonBack.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,
v(this,this._onBackClick));this._buttonHelp=new h.buttons.ButtonBase(340,250,0,"ui/menu_button_help_up.png","ui/menu_button_help_over.png","ui/menu_button_help_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonHelp.get_entity());this._buttonHelp.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onHelpClick));this._buttonSound=new h.buttons.ButtonSoundToggle(505,260,0,["ui/menu_button_soundon_up.png","ui/menu_button_soundon_up.png","ui/menu_button_soundon_up.png"],
["ui/menu_button_soundoff_up.png","ui/menu_button_soundoff_up.png","ui/menu_button_soundoff_up.png"],new n.WorkinPoint(1,0));this._entity.addChild(this._buttonSound.get_entity());this._buttonQuit=new h.buttons.ButtonBase(650,250,0,"ui/menu_button_quit_up.png","ui/menu_button_quit_over.png","ui/menu_button_quit_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonQuit.get_entity());this._buttonQuit.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onQuitClick));
e||this._addLocalTextElement(new y.TextLocalized(475,170,"paused","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenGameplayMenu"]=h.screens.ScreenGameplayMenu;h.screens.ScreenGameplayMenu.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenGameplayMenu".split(",");h.screens.ScreenGameplayMenu.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayMenu.prototype=w(h.screens.ScreenBase.prototype,
{_onQuitClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT)},_onHelpClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)},_onBackClick:function(){G.ConstantsCloud.getIsAndroid()&&d.WorkinCloud.instance.get_sound().setSystemMute(!1);this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE)},dispose:function(){this._buttonBack.dispose();this._buttonHelp.dispose();this._buttonSound.dispose();this._buttonQuit.dispose();
this._buttonQuit=this._buttonSound=this._buttonHelp=this._buttonBack=null},__class__:h.screens.ScreenGameplayMenu});h.screens.ScreenGeneric=function(a,b,g){null==b&&(b="");h.screens.ScreenBase.call(this,a,b,0,g);this._flagHasSpaceAction=!1};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenGeneric"]=h.screens.ScreenGeneric;h.screens.ScreenGeneric.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenGeneric".split(",");h.screens.ScreenGeneric.__super__=h.screens.ScreenBase;
h.screens.ScreenGeneric.prototype=w(h.screens.ScreenBase.prototype,{__class__:h.screens.ScreenGeneric});h.screens.ScreenHelp=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,b,g,s);this._buttonClose=new h.buttons.ButtonBase(c.constants.ConstantsApp.STAGE_WIDTH-100,0,0,"ui/help_button_close_up.png","ui/help_button_close_over.png","ui/help_button_close_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonClose.get_entity());
this._buttonClose.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onCloseClick));e||(this._addLocalTextElement(new y.TextLocalized(475,50,"how_to_play","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(290,170,"help_jump","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(290,485,"help_tap","Basic",
{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(650,170,"help_shoot","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(650,485,"help_chi","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenHelp"]=h.screens.ScreenHelp;h.screens.ScreenHelp.__name__=
"com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenHelp".split(",");h.screens.ScreenHelp.__super__=h.screens.ScreenBase;h.screens.ScreenHelp.prototype=w(h.screens.ScreenBase.prototype,{_onCloseClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_HELP_CLOSE)},dispose:function(){this._buttonClose.dispose();this._buttonClose=null;h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenHelp});h.screens.ScreenLoading=function(a,b,g){null==b&&(b="");this._FADE_RATE=
2;h.screens.ScreenBase.call(this,a,b,null,g);this._timerSpin=0.25;this._loadSpinner=new y.Element({x:75,y:c.constants.ConstantsApp.STAGE_HEIGHT-70,origin:new n.WorkinPoint(0.5,0.5),asset:"loading_icon"});this._entity.addChild(this._loadSpinner.get_entity());this._alpha=0;this._fadein=!0;this._loadSpinner.update(0);this._loadSpinner.renderPositionWithoutCamera()};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenLoading"]=h.screens.ScreenLoading;h.screens.ScreenLoading.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenLoading".split(",");
h.screens.ScreenLoading.__super__=h.screens.ScreenBase;h.screens.ScreenLoading.prototype=w(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this);this._loadSpinner=null},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._fadein?(this._alpha+=this._FADE_RATE*a,1<=this._alpha&&(this._fadein=!1)):(this._alpha-=this._FADE_RATE*a,0>=this._alpha&&(this._fadein=!0));this._loadSpinner.get_renderable().alpha=this._alpha;this._loadSpinner.update(a);
this._loadSpinner.renderPositionWithoutCamera()},__class__:h.screens.ScreenLoading});h.screens.ScreenMasterBending=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,e?b:"ui/AssetBlank",g,s);a=0.5*c.constants.ConstantsApp.STAGE_WIDTH;b=0.5*c.constants.ConstantsApp.STAGE_HEIGHT;e||this._addLocalTextElement(new y.TextLocalized(c.constants.ConstantsApp.STAGE_CENTER_X,c.constants.ConstantsApp.STAGE_CENTER_Y,
"master_chose","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}));this._buttonFire=new h.buttons.ButtonElement(c.constants.ConstantsApp.INT_LEVEL_FIRE,a-50,b-125-50,0,["ui/button_fire_on.png","ui/button_fire_on.png","ui/button_fire_on.png"],["ui/button_fire_off.png","ui/button_fire_off.png","ui/button_fire_off.png"],new n.WorkinPoint(1,0));this._buttonEarth=new h.buttons.ButtonElement(c.constants.ConstantsApp.INT_LEVEL_EARTH,a+150-50,b-50,0,["ui/button_earth_on.png",
"ui/button_earth_on.png","ui/button_earth_on.png"],["ui/button_earth_off.png","ui/button_earth_off.png","ui/button_earth_off.png"],new n.WorkinPoint(1,0));this._buttonWater=new h.buttons.ButtonElement(c.constants.ConstantsApp.INT_LEVEL_WATER,a-50,b+125-50,0,["ui/button_water_on.png","ui/button_water_on.png","ui/button_water_on.png"],["ui/button_water_off.png","ui/button_water_off.png","ui/button_water_off.png"],new n.WorkinPoint(1,0));this._buttonAir=new h.buttons.ButtonElement(c.constants.ConstantsApp.INT_LEVEL_AIR,
a-150-50,b-50,0,["ui/button_air_on.png","ui/button_air_on.png","ui/button_air_on.png"],["ui/button_air_off.png","ui/button_air_off.png","ui/button_air_off.png"],new n.WorkinPoint(1,0));this._entity.addChild(this._buttonFire.get_entity());this._entity.addChild(this._buttonEarth.get_entity());this._entity.addChild(this._buttonWater.get_entity());this._entity.addChild(this._buttonAir.get_entity());this._buttonFire.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onClickFire));
this._buttonEarth.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onClickEarth));this._buttonWater.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onClickWater));this._buttonAir.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onClickAir))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenMasterBending"]=h.screens.ScreenMasterBending;h.screens.ScreenMasterBending.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenMasterBending".split(",");
h.screens.ScreenMasterBending.__super__=h.screens.ScreenBase;h.screens.ScreenMasterBending.prototype=w(h.screens.ScreenBase.prototype,{_onButtonClick:function(){d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!0);this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE)},_onButtonClickPrep:function(){d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1)},_onClickAir:function(){this._onButtonClickPrep();d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,
c.constants.ConstantsApp.ELEMENT_AIR);this._onButtonClick()},_onClickWater:function(){this._onButtonClickPrep();d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,c.constants.ConstantsApp.ELEMENT_WATER);this._onButtonClick()},_onClickEarth:function(){this._onButtonClickPrep();d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,c.constants.ConstantsApp.ELEMENT_EARTH);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_SHIELD_UP));
this._onButtonClick()},_onClickFire:function(){this._onButtonClickPrep();d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,c.constants.ConstantsApp.ELEMENT_FIRE);this._onButtonClick()},dispose:function(){this._buttonFire.dispose();this._buttonFire=null;this._buttonEarth.dispose();this._buttonEarth=null;this._buttonWater.dispose();this._buttonWater=null;this._buttonAir.dispose();this._buttonAir=null;h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenMasterBending});
h.screens.ScreenQuitConfirm=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,b,g,s);a=e?"ui/quitconfirm_button_yes_up.png":"ui_unbaked/quitconfirm_button_yes_up.png";b=e?"ui/quitconfirm_button_no_up.png":"ui_unbaked/quitconfirm_button_yes_up.png";this._buttonYes=new h.buttons.ButtonBase(340,235,0,a,a,a,new n.WorkinPoint(1,0));this._entity.addChild(this._buttonYes.get_entity());this._buttonYes.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,
v(this,this._onYesClick));this._buttonNo=new h.buttons.ButtonBase(340,330,0,b,b,b,new n.WorkinPoint(1,0));this._entity.addChild(this._buttonNo.get_entity());this._buttonNo.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onNoClick));e||(this._addLocalTextElement(new y.TextLocalized(475,170,"quit_confirm_header","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(475,275,"yes","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,
origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(475,370,"no","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenQuitConfirm"]=h.screens.ScreenQuitConfirm;h.screens.ScreenQuitConfirm.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenQuitConfirm".split(",");h.screens.ScreenQuitConfirm.__super__=h.screens.ScreenBase;h.screens.ScreenQuitConfirm.prototype=
w(h.screens.ScreenBase.prototype,{_onNoClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO)},_onYesClick:function(){this._doFlowEvent(c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES)},dispose:function(){this._buttonYes.dispose();this._buttonYes=null;this._buttonNo.dispose();this._buttonNo=null;h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenQuitConfirm});h.screens.ScreenScreenshot=function(){};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenScreenshot"]=
h.screens.ScreenScreenshot;h.screens.ScreenScreenshot.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenScreenshot".split(",");h.screens.ScreenScreenshot.__super__=h.screens.ScreenBase;h.screens.ScreenScreenshot.prototype=w(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenScreenshot});h.screens.ScreenShop=function(a,b,g,s){null==g&&(g=0);null==b&&(b="");var e="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);
h.screens.ScreenBase.call(this,a,b,g,s);a=95;b=e?"ui/shop_button_buy_up.png":"ui_unbaked/shop_button_buy_up.png";this._buttonBuy=new h.buttons.ButtonBase(690,440,0,b,b,b,new n.WorkinPoint(1,0));this._entity.addChild(this._buttonBuy.get_entity());this._buttonBuy.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onBuyClick));e||(this._addLocalTextElement(new y.TextLocalized(625,40,"shop_shop","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,
0.5)})),this._addLocalTextElement(new y.TextLocalized(625,150,"shop_total","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(625,260,"shop_upgrade","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._buyText=new y.TextLocalized(790,470,"buy","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._addLocalTextElement(this._buyText));
this._buttonsUpgrade=[];this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR,a,55,0,["ui/shop_yuan_down","ui/shop_yuan_down"],["ui/shop_yuan_up","ui/shop_yuan_up"],new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET,a,170,0,["ui/shop_ferret_down","ui/shop_ferret_down"],["ui/shop_ferret_up","ui/shop_ferret_up"],new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_NAGA,
a,285,0,["ui/shop_naga_down","ui/shop_naga_down"],["ui/shop_naga_up","ui/shop_naga_up"],new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON,a,400,0,["ui/shop_bison_down","ui/shop_bison_down"],["ui/shop_bison_up","ui/shop_bison_up"],new n.WorkinPoint(1,0)));a+=120;this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_FIRE,a,55,0,["ui/shop_fire_down","ui/shop_fire_down"],["ui/shop_fire_up","ui/shop_fire_up"],
new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_EARTH,a,170,0,["ui/shop_earth_down","ui/shop_earth_down"],["ui/shop_earth_up","ui/shop_earth_up"],new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_WATER,a,285,0,["ui/shop_water_down","ui/shop_water_down"],["ui/shop_water_up","ui/shop_water_up"],new n.WorkinPoint(1,0)));this._buttonsUpgrade.push(new h.buttons.ButtonUpgrade(c.constants.ConstantsApp.INT_LEVEL_AIR,
a,400,0,["ui/shop_air_down","ui/shop_air_down"],["ui/shop_air_up","ui/shop_air_up"],new n.WorkinPoint(1,0)));e=0;for(a=this._buttonsUpgrade.length;e<a;)this._entity.addChild(this._buttonsUpgrade[e++].get_entity());this._addButton(new h.displays.DisplayYuanTotal(550,185,0));this._addButton(new h.displays.DisplayYuanCost(550,410,0));this._addButton(new h.displays.DisplayLevel(775,300,0));this._addButton(new h.displays.DisplayDescription(375,300,0));this._buttonClose=new h.buttons.ButtonBase(c.constants.ConstantsApp.STAGE_WIDTH-
115,-10,0,"ui/menu_button_quit_up.png","ui/menu_button_quit_over.png","ui/menu_button_quit_down.png",new n.WorkinPoint(1,0));this._entity.addChild(this._buttonClose.get_entity());this._buttonClose.get_dispatcher().addEventListener(h.buttons.ButtonBase.CLICK,v(this,this._onCloseClick));this._updateBuyButton();this._buttonsUpgrade[0].forceClick()};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenShop"]=h.screens.ScreenShop;h.screens.ScreenShop.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenShop".split(",");
h.screens.ScreenShop.__super__=h.screens.ScreenBase;h.screens.ScreenShop.prototype=w(h.screens.ScreenBase.prototype,{_eventUpdateUpgradeID:function(){this._updateBuyButton()},_removeEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID,v(this,this._eventUpdateUpgradeID))},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID,v(this,this._eventUpdateUpgradeID))},
dispose:function(){this._buttonBuy.dispose();this._buttonBuy=null;this._buttonClose.dispose();this._buttonClose=null;for(var a=0;a<this._buttonsUpgrade.length;)this._buttonsUpgrade[a].dispose(),this._buttonsUpgrade[a]=null,a++;this._buttonsUpgrade=null;h.screens.ScreenBase.prototype.dispose.call(this)},_updateBuyButton:function(){var a=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_UPGRADE_LEVEL),b=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_YUAN_TOTAL),a=100*(a+1);
5<=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_UPGRADE_LEVEL)?(this._buttonBuy.disable(),this._buttonBuy.get_display().alpha.set__(0),null!=this._buyText&&this._buyText.get_display().alpha.set__(0),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_COST,0)):a<=b?(this._buttonBuy.enable(),this._buttonBuy.get_display().alpha.set__(1),null!=this._buyText&&this._buyText.get_display().alpha.set__(1)):(this._buttonBuy.disable(),this._buttonBuy.get_display().alpha.set__(0.5),
null!=this._buyText&&this._buyText.get_display().alpha.set__(0.5))},_onCloseClick:function(){d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_SHOP_CLOSE))},_onBuyClick:function(){var a=d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_UPGRADE_ID),b=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_UPGRADE_LEVEL),g=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_YUAN_TOTAL),s=100*(b+1);switch(a){case c.constants.ConstantsApp.INT_LEVEL_FIRE:case c.constants.ConstantsApp.INT_LEVEL_EARTH:case c.constants.ConstantsApp.INT_LEVEL_WATER:case c.constants.ConstantsApp.INT_LEVEL_AIR:d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_SHOW_TIP_MASTER,
!0)}s<=g?(b++,d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_TOTAL,g-s),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_YUAN_COST,100*(b+1)),d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_UPGRADE_LEVEL,b),d.WorkinCloud.instance.setValue(a,b),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID)),d.WorkinCloud.instance.get_sound().playSound("audio/successful")):d.WorkinCloud.instance.get_sound().playSound("audio/nope");
this._updateBuyButton()},__class__:h.screens.ScreenShop});h.screens.ScreenSplash=function(a,b,g){null==b&&(b="");this._TEXT_SCALE=1;this._BLINK_TIME=0.9;var s="en"==d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID);h.screens.ScreenBase.call(this,a,b,0,g);this._blinkTimer=this._BLINK_TIME;this._text=D._platform.getTouch().get_supported()?new y.TextLocalized(c.constants.ConstantsApp.STAGE_CENTER_X,c.constants.ConstantsApp.STAGE_HEIGHT-100,"tap_anywhere","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,
origin:new n.WorkinPoint(0.5,0.5)}):new y.TextLocalized(c.constants.ConstantsApp.STAGE_CENTER_X,c.constants.ConstantsApp.STAGE_HEIGHT-100,"click_anywhere","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)});this._addLocalTextElement(this._text);s||(this._addLocalTextElement(new y.TextLocalized(680,50,"nickelodeon","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(680,120,
"legend_of_korra","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})),this._addLocalTextElement(new y.TextLocalized(680,240,"title_run","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)})))};j["com.nick.legend_of_korra.republic_city_run.ui.screens.ScreenSplash"]=h.screens.ScreenSplash;h.screens.ScreenSplash.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,ScreenSplash".split(",");h.screens.ScreenSplash.__super__=
h.screens.ScreenBase;h.screens.ScreenSplash.prototype=w(h.screens.ScreenBase.prototype,{close:function(a){null==a&&(a=!0);G.ConstantsCloud.getIsNabi()&&p.hideEulaLinks();h.screens.ScreenBase.prototype.close.call(this,a)},open:function(a){null==a&&(a=!0);G.ConstantsCloud.getIsNabi()&&p.showEulaLinks();h.screens.ScreenBase.prototype.open.call(this,a)},_onInputUp:function(){d.WorkinCloud.instance.get_sound().playMusic("audio/music_korra",0.5);this._doFlowEvent(c.constants.ConstantsScreen.FLOW_CHARACTER_SELECT_SPLASH);
return!0},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._blinkDown?(this._blinkTimer-=a,0>=this._blinkTimer&&(this._blinkDown=!1,this._blinkTimer=0)):(this._blinkTimer+=a,1<=this._blinkTimer&&(this._blinkDown=!0,this._blinkTimer=1));this._text.get_display().alpha.set__(this._blinkTimer/1)},dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenSplash});h.screens.data={};h.screens.data.ScreenData=function(a,b,g,c,d){null==c&&(c=
0);null==g&&(g="");this.id=a;this.screenClass=b;this.assetClassName=g;this.layer=c;this.data=null==d?new B.StringMap:d};j["com.nick.legend_of_korra.republic_city_run.ui.screens.data.ScreenData"]=h.screens.data.ScreenData;h.screens.data.ScreenData.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,data,ScreenData".split(",");h.screens.data.ScreenData.prototype={__class__:h.screens.data.ScreenData};h.screens.data.ScreenQueueData=function(a,b,g){null==g&&(g="");this.screenData=a;this.openCondition=
b;this.openTestString=g};j["com.nick.legend_of_korra.republic_city_run.ui.screens.data.ScreenQueueData"]=h.screens.data.ScreenQueueData;h.screens.data.ScreenQueueData.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,data,ScreenQueueData".split(",");h.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:h.screens.data.ScreenQueueData};h.screens.data.ScreenStateData=
function(a,b,g,c,d,e){this.id=a;this.animation=b;this.actionOnComplete=g;this.actionData=c;this.inFunc=d;this.outFunc=e};j["com.nick.legend_of_korra.republic_city_run.ui.screens.data.ScreenStateData"]=h.screens.data.ScreenStateData;h.screens.data.ScreenStateData.__name__="com,nick,legend_of_korra,republic_city_run,ui,screens,data,ScreenStateData".split(",");h.screens.data.ScreenStateData.prototype={__class__:h.screens.data.ScreenStateData};h.transitions={};h.transitions.TransitionBase=function(a,
b,g,c){null==c&&(c="");null==g&&(g=!1);null==b&&(b=!0);this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=c;this._flagOutOnly=g;this.flagDispose=!1;h.UserInterfaceElement.call(this,0,0,1E3,a);b?this.set_State(this._STATE_HIDDEN):this._flagOutOnly?this.set_State(this._STATE_OUT):this.set_State(this._STATE_IN)};j["com.nick.legend_of_korra.republic_city_run.ui.transitions.TransitionBase"]=h.transitions.TransitionBase;h.transitions.TransitionBase.__name__="com,nick,legend_of_korra,republic_city_run,ui,transitions,TransitionBase".split(",");
h.transitions.TransitionBase.__super__=h.UserInterfaceElement;h.transitions.TransitionBase.prototype=w(h.UserInterfaceElement.prototype,{dispose:function(){h.UserInterfaceElement.prototype.dispose.call(this);this._mc=null},set_State:function(a){this._state=a;this._state==this._STATE_HIDDEN&&this.hide()},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this.set_State(this._STATE_IN)},update:function(a){h.UserInterfaceElement.prototype.update.call(this,
a)},get_isOutro:function(){return this._state==this._STATE_OUT},__class__:h.transitions.TransitionBase});i={World:function(a){this._debugAutoFire=0.4;this._fpsFrames=this._fpsFramesTotal=this._fpsFramesAvger=0;this._fpsSecond=1;d.WorkinCloud.instance.log("World Created!");this._timeline=a;this._generate()}};j["com.nick.legend_of_korra.republic_city_run.world.World"]=i.World;i.World.__name__="com,nick,legend_of_korra,republic_city_run,world,World".split(",");i.World.prototype={set_MasterElement:function(a){d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED)&&
(d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,a),d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1),d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!0),a==c.constants.ConstantsApp.ELEMENT_EARTH&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_SHIELD_UP)),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE)))},
handleInput:function(a){if(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_PAUSED)){if(!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED)&&this._flagUnpauseOnlyOnFirstInput&&(a.input==c.constants.ConstantsApp.INPUT_CLICK||a.input==c.constants.ConstantsApp.INPUT_SPACE)&&1==a.phase)this._flagUnpauseOnlyOnFirstInput=!1,this._unpause(),this._removeElement(this._textClickToStart)}else switch(a.input){case c.constants.ConstantsApp.INPUT_SPACE:0==a.phase&&!d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED)&&
!this._player.isMounted()&&!c.constants.ConstantsApp.OPTION_AUTOFIRE&&(c.constants.ConstantsApp.OPTION_STRESS_TEST?(this._player.doShoot(),this._spawnProjectile()):this._modifyChi(-10)&&(this._player.doShoot(),this._spawnProjectile()));break;case c.constants.ConstantsApp.INPUT_CLICK:case c.constants.ConstantsApp.INPUT_UP:if(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED))a.input==c.constants.ConstantsApp.INPUT_UP&&0==a.phase&&0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE)&&
this.set_MasterElement(c.constants.ConstantsApp.ELEMENT_FIRE);else if(1==a.phase)this._player.doDown();else if(0==a.phase){this._player.doUp();var b=!0;if(a.input==c.constants.ConstantsApp.INPUT_CLICK){if(125>a.x&&125>a.y)break;if(a.x>c.constants.ConstantsApp.STAGE_WIDTH-150&&150>a.y)break;a.x<c.constants.ConstantsApp.STAGE_CENTER_X&&(b=!1)}b?this._player.getIsAirborne()?this._modifyChi(-15)&&!this._player.isMounted()&&(this._player.doJump(),this._spawnEffectAirJump()):this._player.doJump():!this._player.isMounted()&&
!c.constants.ConstantsApp.OPTION_AUTOFIRE&&(c.constants.ConstantsApp.OPTION_STRESS_TEST?(this._player.doShoot(),this._spawnProjectile()):this._modifyChi(-10)&&(this._player.doShoot(),this._spawnProjectile()))}break;case c.constants.ConstantsApp.INPUT_DOWN:0==a.phase&&0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_WATER)&&this.set_MasterElement(c.constants.ConstantsApp.ELEMENT_WATER);break;case c.constants.ConstantsApp.INPUT_RIGHT:0==a.phase&&0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_EARTH)&&
this.set_MasterElement(c.constants.ConstantsApp.ELEMENT_EARTH);break;case c.constants.ConstantsApp.INPUT_LEFT:0==a.phase&&0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_AIR)&&this.set_MasterElement(c.constants.ConstantsApp.ELEMENT_AIR);break;case c.constants.ConstantsApp.INPUT_E:0==a.phase&&(c.constants.ConstantsApp.canUseMasterMenu()?d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_OPEN)):d.WorkinCloud.instance.get_sound().playSound("audio/nope"))}},
_unpause:function(){d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.BOOL_PAUSED,!1)},_pause:function(){d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.BOOL_PAUSED,!0)},_onUnpause:function(){this._flagUnpauseOnlyOnFirstInput||this._unpause()},_onPause:function(){this._pause()},_onEventScorePlayBurstClose:function(){for(var a=0;a<this._elements.length;)this._elements[a].getType()==c.constants.ConstantsApp.TYPE_PLAYER_SCORE_BURST&&L.__cast(this._elements[a],i.elements.TrickScoreBurst).close(),
a++},_onUpdateDisplay:function(a){if(a.get_data().valueID==c.constants.ConstantsApp.BOOL_MASTER_BENDING)if(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING))switch(d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT)){case c.constants.ConstantsApp.ELEMENT_WATER:this._timerRegen=c.constants.ConstantsApp.REGEN_TIME;break;case c.constants.ConstantsApp.ELEMENT_FIRE:this._player.setSpeedFire()}else d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_SHIELD_DOWN)),
this._timerRegen=0,this._player.setSpeedNormal()},_onEventShieldUp:function(){d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_SHIELD_DOWN));var a={x:this._player.registrationPos.x,y:this._player.registrationPos.y,leader:this._player,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,type:c.constants.ConstantsApp.TYPE_EFFECT};a.effectName=c.constants.ConstantsApp.EFFECT_BEND_EARTH;this._spawnEffect(a)},_onEventCollectToken:function(a){switch(a.get_data().pickupID){case c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET:this._spawnFireFerret();
break;case c.constants.ConstantsApp.PICKUP_TOKEN_NAGA:d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1);d.WorkinCloud.instance.get_sound().playSound("audio/naga");this._player.doMountNaga();break;case c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON:d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1),d.WorkinCloud.instance.get_sound().playSound("audio/sky_bison"),this._player.doMountSkyBison()}},_onEventCollectChi:function(){this._modifyChi(25,
!1);d.WorkinCloud.instance.get_sound().playSound("audio/pickup")},_onEventSpawnProjectile:function(a){this._addElement(new i.elements.projectiles.ProjectileElectricity({x:a.get_data().x,y:a.get_data().y,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,type:c.constants.ConstantsApp.TYPE_ENEMY}))},_onEventSpawnEffect:function(a){d.WorkinCloud.instance.log("Heard create effect: "+r.string(a.get_data().effectName));this._spawnEffect(a.get_data())},_onEventSpawnYuan:function(a){var b=a.get_data().x,a=a.get_data().y;
this._addElement(new i.elements.pickups.PickupYuan({x:b,y:a,bobs:!1,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}))},_spawnTip:function(){var a=[];a.x=this._camera.get_pos().x;a.y=this._camera.get_pos().y;a.customAsset="ui/popup_master_menu";a.type=c.constants.ConstantsApp.PARTICLE_MASTER_MENU;d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,a))},_spawnNewRecord:function(){var a=[];a.x=this._camera.get_pos().x;a.y=this._camera.get_pos().y;
a.customAsset="ui/popup_new_record";a.type=c.constants.ConstantsApp.PARTICLE_NEW_RECORD;d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,a));d.WorkinCloud.instance.get_sound().playSound("audio/levelup")},_onEventSpawnParticle:function(a){this._spawnParticle(a.get_data())},_spawnParticle:function(a){if(!d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.BOOL_LOW_QUAL_MODE)){var b=[];a.customAsset?b.asset=a.customAsset:(b.asset=
"elements/particles/particle_"+r.string(a.type),a.type==c.constants.ConstantsApp.PARTICLE_FIRE_FERRET&&(b.asset="elements/particles/particle_"+c.constants.ConstantsApp.PARTICLE_FIRE));b.x=a.x;b.y=a.y;b.type=c.constants.ConstantsApp.TYPE_PARTICLE;b.layer=c.constants.ConstantsApp.LAYER_PLAYER;switch(a.type){case c.constants.ConstantsApp.PARTICLE_AIR:if(a.y<c.constants.ConstantsApp.GROUND_Y_BASE-150)return;b.scale=1+Math.random();b.y=c.constants.ConstantsApp.GROUND_Y_BASE+10;b.vy=-150-r.random(50);b.rot=
r.random(360);b.scaleRate=1;b.fadeRate=1;break;case c.constants.ConstantsApp.PARTICLE_SMOKE:b.scale=1+0.25*Math.random();b.x=a.x+85;b.y=a.y+40;b.vy=-150-r.random(50);b.rot=r.random(360);b.scaleRate=1+Math.random();b.fadeRate=1;break;case c.constants.ConstantsApp.PARTICLE_FIRE:b.scale=1+Math.random();b.y=a.y-50;b.vy=-300+r.random(150);0.5>Math.random()&&(b.vy*=-1,b.y+=50);b.gravity=-500;break;case c.constants.ConstantsApp.PARTICLE_FIRE_FERRET:b.scale=1+Math.random();b.y=a.y-50;b.vy=-300+r.random(150);
0.5>Math.random()&&(b.vy*=-1,b.y+=50);b.gravity=-500;break;case c.constants.ConstantsApp.PARTICLE_EARTH:b.scale=0.75+0.75*Math.random();b.y=c.constants.ConstantsApp.GROUND_Y_BASE+10;b.vx=r.random(150);b.vy=-150-r.random(150);b.rot=r.random(360);break;case c.constants.ConstantsApp.PARTICLE_WATER:b.vy=-400-r.random(150);b.gravity=1E3;break;case c.constants.ConstantsApp.PARTICLE_EQUALIZER:b.vx=500+r.random(250);b.vy=-700-r.random(300);b.gravity=2E3;b.scale=1;b.rotRate=500;b.lifespan=2;break;case c.constants.ConstantsApp.PARTICLE_CABBAGE:b.vx=
200+r.random(250);b.vy=-500-r.random(300);b.gravity=2E3;b.scale=1+0.5*Math.random();b.rotRate=-500+r.random(1E3);b.lifespan=2;break;case c.constants.ConstantsApp.PARTICLE_CHI:b.vx=-100+r.random(200);b.vy=200-r.random(400);b.gravity=-500;b.scale=1+0.5*Math.random();b.lifespan=2;break;case c.constants.ConstantsApp.PARTICLE_SPARKLE_WHITE:b.y+=50-r.random(100);b.vx=0;b.vy=50-r.random(100);b.gravity=0;b.scale=0.5+0.5*Math.random();b.lifespan=1;break;case c.constants.ConstantsApp.PARTICLE_NEW_RECORD:b.vx=
d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_SPEED);b.vy=-100;b.gravity=0;b.lifespan=4;b.scale=1;b.followCamera=1;"en"!=d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID)&&(b.local="new_record",b.asset="ui/AssetBlank");break;case c.constants.ConstantsApp.PARTICLE_MASTER_MENU:b.gravity=0,b.lifespan=8,b.scale=1,b.followCamera=1,b.cameraOffsetX=100,b.cameraOffsetY=-105,"en"!=d.WorkinCloud.instance.getValue(G.ConstantsCloud.STRING_REGION_ID)&&(b.local=D._platform.getTouch().get_supported()?
"master_tap":"master_click",b.asset="ui_unbaked/popup_master")}c.constants.ConstantsApp.USE_PARTICLE_POOLING?(this._particles[this._particleIndex].revive(b),this._particleIndex++,this._particleIndex>=c.constants.ConstantsApp.POOL_SIZE_PARTICLES&&(this._particleIndex=0)):this._addElement(new i.elements.particles.Particle(b))}},_onEventPrintOverlay:function(a){this._addElement(new i.elements.effects.EffectBasic({assetAnimate:a.get_data(),x:0,y:0,screenlock:!0,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,
lifespan:1.4,type:c.constants.ConstantsApp.TYPE_EFFECT}))},_onEventSpeedBoost:function(){d.WorkinCloud.instance.log("SPEEEEEEEEEEED BOOOOOOOOOOOOST");this._addElement(new i.elements.effects.EffectBasic({assetAnimate:"elements/AssetEffectSpeedBoost",x:0,y:0,screenlock:!0,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,type:c.constants.ConstantsApp.TYPE_EFFECT,columns:4,rows:5}))},_onEventScorePlayBurst:function(a){this._spawnScorePlayerBurst(a.get_data().x,a.get_data().y,a.get_data().score)},_onEventScreenShake:function(){this._timerScreenShake=
0.4},_onEventSlowMotion:function(a){0<this._timerFreezeFrame||(this._timerSlowMotion=a.get_data())},_onEventFreezeFrame:function(a){this._timerFreezeFrame=a.get_data();this._timerSlowMotion=0},_removeEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_PAUSE,v(this,this._onPause));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UNPAUSE,v(this,this._onUnpause));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_FREEZE_FRAME,
v(this,this._onEventFreezeFrame));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SLOW_MOTION,v(this,this._onEventSlowMotion));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SCREEN_SHAKE,v(this,this._onEventScreenShake));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURST,v(this,this._onEventScorePlayBurst));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURSTS_CLOSE,
v(this,this._onEventScorePlayBurstClose));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SPEED_BOOST,v(this,this._onEventSpeedBoost));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_PRINT_OVERLAY,v(this,this._onEventPrintOverlay));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,v(this,this._onEventSpawnParticle));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SPAWN_EFFECT,
v(this,this._onEventSpawnEffect));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SPAWN_YUAN,v(this,this._onEventSpawnYuan));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SPAWN_PROJECTILE,v(this,this._onEventSpawnProjectile));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_COLLECT_CHI,v(this,this._onEventCollectChi));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_COLLECT_TOKEN,
v(this,this._onEventCollectToken));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_SHIELD_UP,v(this,this._onEventShieldUp));d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,v(this,this._onUpdateDisplay))},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_PAUSE,v(this,this._onPause));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UNPAUSE,
v(this,this._onUnpause));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_FREEZE_FRAME,v(this,this._onEventFreezeFrame));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SLOW_MOTION,v(this,this._onEventSlowMotion));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SCREEN_SHAKE,v(this,this._onEventScreenShake));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURST,
v(this,this._onEventScorePlayBurst));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURSTS_CLOSE,v(this,this._onEventScorePlayBurstClose));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SPEED_BOOST,v(this,this._onEventSpeedBoost));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_PRINT_OVERLAY,v(this,this._onEventPrintOverlay));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,
v(this,this._onEventSpawnParticle));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SPAWN_EFFECT,v(this,this._onEventSpawnEffect));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SPAWN_YUAN,v(this,this._onEventSpawnYuan));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SPAWN_PROJECTILE,v(this,this._onEventSpawnProjectile));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_COLLECT_CHI,
v(this,this._onEventCollectChi));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_COLLECT_TOKEN,v(this,this._onEventCollectToken));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SHIELD_UP,v(this,this._onEventShieldUp));d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,v(this,this._onUpdateDisplay))},render:function(){for(var a=0;a<this._elements.length;)this._elements[a].isPooled()||
this._elements[a].renderPosition(this._camera),a++},getOffscreenXRight:function(){return this._camera.get_pos().x+c.constants.ConstantsApp.STAGE_CENTER_X+100},getCameraPlayerOffsetX:function(){return 250},_runProjectilePlayerCollision:function(a){!this._player.isInvulnerable()&&a.testCollision(this._player.registrationPos,this._player.getCollisionDimensions(),this._player.getCollisionOffset())&&(0<a.damageOnCollision()&&(this._spawnEffect({x:this._player.registrationPos.x,y:this._player.registrationPos.y,
leader:this._player,layer:c.constants.ConstantsApp.LAYER_PLAYER,effectName:c.constants.ConstantsApp.EFFECT_SHOCKED,type:c.constants.ConstantsApp.TYPE_EFFECT}),d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_HEALTH,-a.damageOnCollision()),this._player.doCollision()),a.doDelete=!0)},_onGameover:function(){this._timerEnd=3;this._player.doSlide();d.WorkinCloud.instance.get_sound().playSound("audio/defeated");d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1);
d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE))},_runEnemyPlayerCollision:function(a){!this._player.isInvulnerable()&&a.testCollision(this._player.registrationPos,this._player.getCollisionDimensions(),this._player.getCollisionOffset())&&(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING)&&d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT)==c.constants.ConstantsApp.ELEMENT_EARTH?
(this._modifyChi(12.5*-a.damageOnCollision(),!1,!0),this._player.doCollision(),d.WorkinCloud.instance.get_sound().playSound("audio/explode_rock")):this._player.isMounted()?(a.modifyDurability(100),a.setFinalState(c.constants.ConstantsApp.ELEMENT_AIR),this._spawnYuansAt(a.pos,d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR))):0<a.damageOnCollision()&&(this._spawnEffect({x:this._player.registrationPos.x,y:this._player.registrationPos.y,leader:this._player,layer:c.constants.ConstantsApp.LAYER_PLAYER,
effectName:c.constants.ConstantsApp.EFFECT_SHOCKED,type:c.constants.ConstantsApp.TYPE_EFFECT}),d.WorkinCloud.instance.get_sound().playSound("audio/korra_ugh"),d.WorkinCloud.instance.get_sound().playSound("audio/korra_crackle"),d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_HEALTH,-a.damageOnCollision()),this._player.doCollision(),0>=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH)&&0==this._timerEnd&&this._onGameover()),a.doCollision())},_runEnemyProjectileCollision:function(a){for(var b=
0;b<this._elements.length;)this._elements[b].getType()==c.constants.ConstantsApp.TYPE_PROJECTILE&&this._elements[b].testCollision(a.registrationPos,a.getCollisionDimensions(),a.getCollisionOffset())&&(a.modifyDurability(-L.__cast(this._elements[b],i.elements.projectiles.Projectile).damageOnCollision())&&(a.setFinalState(L.__cast(this._elements[b],i.elements.projectiles.Projectile).getElement()),this._spawnYuansAt(a.pos,d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_COLLECTOR))),
L.__cast(this._elements[b],i.elements.projectiles.Projectile).onCollision()),b++},_runPlayerPickupCollision:function(a){a.isCollectable()&&a.testCollision(this._player.registrationPos,this._player.getCollectionDimensions(),this._player.getCollisionOffset())&&a.doCollect()},getMountTime:function(a){return 70-10*a-r.random(10)+5},_resetMountTimers:function(){var a=[];0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET)&&a.push(c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET);
0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON)&&a.push(c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON);0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_NAGA)&&a.push(c.constants.ConstantsApp.PICKUP_TOKEN_NAGA);if(!(0>=a.length)){for(var b=[],g=0,s=0;s<a.length;){var e=a[s];switch(e){case c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET:g+=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET);break;case c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON:g+=
d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON);break;case c.constants.ConstantsApp.PICKUP_TOKEN_NAGA:g+=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_NAGA)}b.push(g);s++}g*=Math.random();for(s=0;s<a.length&&!(g<b[s]);)s++;this._nextAnimal=a[s];switch(this._nextAnimal){case c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET:this._timerToken=this.getMountTime(d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET));break;case c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON:this._timerToken=
this.getMountTime(d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_SKY_BISON));break;case c.constants.ConstantsApp.PICKUP_TOKEN_NAGA:this._timerToken=this.getMountTime(d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_NAGA))}}},_removeElementAtIndex:function(a){this._elements[a].dispose();this._viewport.removeChild(this._elements[a]);this._elements[a].disposeDisplay();this._elements.splice(a,1)},_removeElement:function(a){for(var b=this._elements.length;0<b;)if(b--,
this._elements[b]==a){this._removeElementAtIndex(b);break}},_addElement:function(a){this._elements.push(a);a.renderPosition(this._camera);this._viewport.addChild(a);null},_modifyChi:function(a,b,g){null==g&&(g=!1);null==b&&(b=!0);if(0>=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH))return!1;if(b&&d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING))return!0;if(!g&&0>d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_CHI)+a)return d.WorkinCloud.instance.get_sound().playSound("audio/nope"),
!1;d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.FLOAT_CHI,a);d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_CHI)>c.constants.ConstantsApp.LIMIT_CHI&&d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_CHI,c.constants.ConstantsApp.LIMIT_CHI);0>d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_CHI)&&d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_CHI,0);return!0},get_ElementLevel:function(){switch(d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT)){case c.constants.ConstantsApp.ELEMENT_AIR:return d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_AIR);
case c.constants.ConstantsApp.ELEMENT_EARTH:return d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_EARTH);case c.constants.ConstantsApp.ELEMENT_FIRE:return d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_FIRE);case c.constants.ConstantsApp.ELEMENT_WATER:return d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_LEVEL_WATER);default:return 0}},set_EnemyStage:function(a){this._enemyStage=a;10<this._enemyStage&&(this._enemyStage=10);this._spawnsAllowed=
[];switch(this._enemyStage){case 10:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 9:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);
this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 8:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);
break;case 7:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 6:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);
this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 5:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);
this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 4:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);
this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_BIKER);break;case 3:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);break;case 2:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_HANGER);this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER);break;case 1:this._spawnsAllowed.push(c.constants.ConstantsApp.ENEMY_RUNNER)}switch(this._enemyStage){case 1:this._spawnPace=
1;this._spawnMonsterChance=0.5;break;case 2:this._spawnPace=0.95;this._spawnMonsterChance=0.75;break;case 3:this._spawnPace=0.9;this._spawnMonsterChance=0.75;break;case 4:this._spawnPace=0.85;this._spawnMonsterChance=0.75;break;case 5:this._spawnPace=0.8;this._spawnMonsterChance=0.75;break;case 6:this._spawnPace=0.85;this._spawnMonsterChance=0.75;break;case 7:this._spawnPace=0.8;this._spawnMonsterChance=0.75;break;case 8:this._spawnMonsterChance=this._spawnPace=0.75;break;case 9:this._spawnPace=0.7;
this._spawnMonsterChance=0.75;break;case 10:this._spawnPace=0.65,this._spawnMonsterChance=0.75}},_increaseEnemyStage:function(a){null==a&&(a=1);this._enemyStage+=a;this.set_EnemyStage(this._enemyStage)},_updateSpawner:function(a){var b=[];b.x=this.getOffscreenXRight();b.y=c.constants.ConstantsApp.GROUND_Y_BASE;b.layer=c.constants.ConstantsApp.LAYER_MAIN;this._timerSpawn+=a;this._timerDifficultyUp+=a;15<this._timerDifficultyUp&&(this._timerDifficultyUp-=15,this._increaseEnemyStage());this._timerCrate+=
a;if(5<this._timerCrate)if(this._timerCrate-=0.5+r.random(5),c.constants.ConstantsApp.USE_PARTICLE_POOLING)this._enemyCrates[this._crateI].revive(b),this._crateI++,this._crateI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._crateI=0);else{var g=new i.elements.enemies.EnemyCrate(b);this._addElement(g)}5<=this._enemyStage&&(this._timerDifficultyRamp+=a,this._timerDifficultyRamp>c.constants.ConstantsApp.TIME_TO_CRAZY&&(this._timerDifficultyRamp=c.constants.ConstantsApp.TIME_TO_CRAZY),this._timerMecha+=
a,30<this._timerMecha&&(this._timerMecha-=15+r.random(10),c.constants.ConstantsApp.USE_PARTICLE_POOLING?(this._enemyMechas[this._mechaI].revive(b),this._mechaI++,this._mechaI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._mechaI=0)):(g=new i.elements.enemies.EnemyMecha(b),this._addElement(g))));if(this._timerSpawn>this._spawnPace-0.25*(this._timerDifficultyRamp/c.constants.ConstantsApp.TIME_TO_CRAZY)&&(a=this._spawnPace-0.25*(this._timerDifficultyRamp/c.constants.ConstantsApp.TIME_TO_CRAZY),
this._player.isMounted()&&(a*=0.5),!c.constants.ConstantsApp.OPTION_STRESS_TEST&&(this._timerSpawn-=a,Math.random()<this._spawnMonsterChance)))if(a=this._spawnsAllowed[r.random(this._spawnsAllowed.length+1)],c.constants.ConstantsApp.USE_PARTICLE_POOLING)switch(a){case c.constants.ConstantsApp.ENEMY_RUNNER:this._enemyRunners[this._runnerI].revive(b);this._runnerI++;this._runnerI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._runnerI=0);break;case c.constants.ConstantsApp.ENEMY_HANGER:this._enemyHangers[this._hangerI].revive(b);
this._hangerI++;this._hangerI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._hangerI=0);break;case c.constants.ConstantsApp.ENEMY_BIKER:this._enemyBikers[this._bikerI].revive(b);this._bikerI++;this._bikerI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._bikerI=0);break;case c.constants.ConstantsApp.ENEMY_MECHA:this._enemyMechas[this._mechaI].revive(b);this._mechaI++;this._mechaI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._mechaI=0);break;case c.constants.ConstantsApp.ENEMY_CRATE:this._enemyCrates[this._crateI].revive(b),
this._crateI++,this._crateI>=c.constants.ConstantsApp.POOL_SIZE_ENEMIES&&(this._crateI=0)}else switch(a){case c.constants.ConstantsApp.ENEMY_RUNNER:g=new i.elements.enemies.EnemyRunner(b);this._addElement(g);break;case c.constants.ConstantsApp.ENEMY_HANGER:g=new i.elements.enemies.EnemyHanger(b);this._addElement(g);break;case c.constants.ConstantsApp.ENEMY_BIKER:g=new i.elements.enemies.EnemyBiker(b);this._addElement(g);break;case c.constants.ConstantsApp.ENEMY_MECHA:g=new i.elements.enemies.EnemyMecha(b);
this._addElement(g);break;case c.constants.ConstantsApp.ENEMY_CRATE:g=new i.elements.enemies.EnemyCrate(b),this._addElement(g)}},_updateAutoFire:function(a){this._debugAutoFire-a;0>this._debugAutoFire&&(this._player.doShoot(),this._spawnProjectile(),this._debugAutoFire=0.4)},_refreshFPS:function(a){this._fpsFrames++;this._fpsSecond-=a;0>=this._fpsSecond&&(this._fpsSecond+=1,this._fpsFramesTotal+=this._fpsFrames,this._fpsFramesAvger++,this._fpsMonitor.set_text("FPS: "+r.string(100*Math.round(this._fpsFrames/
1)/100)+"  ("+r.string(100*Math.round(this._fpsFramesTotal/this._fpsFramesAvger)/100)+")"),this._fpsFrames=0)},update:function(a){d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_PAUSED)&&(a=0);c.constants.ConstantsApp.OPTION_STRESS_TEST&&this._refreshFPS(a);c.constants.ConstantsApp.OPTION_AUTOFIRE&&this._updateAutoFire(a);d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED)&&(d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER,
-a),a*=0.2,0>d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER)&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE)));d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_DISTANCE,Math.floor((this._camera.get_pos().x-c.constants.ConstantsApp.STAGE_CENTER_X)/50));0!=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE_BEST)&&!this._newRecord&&d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE)>
d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_DISTANCE_BEST)&&(this._newRecord=!0,this._spawnNewRecord());if(this._state==i.World._STATE_PLAYING){0<this._timerFreezeFrame&&(this._timerFreezeFrame-=a,0<this._timerFreezeFrame&&(a=0));0<this._timerSlowMotion&&(this._timerSlowMotion-=a,0<this._timerSlowMotion&&(a/=3));0<this._timerEnd&&(this._timerEnd-=a,0>=this._timerEnd&&(this._timerEnd=0,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventFlow(c.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE))));
d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING)?this._modifyChi(-a*(17-2*this.get_ElementLevel()),!1)||d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,!1):this._modifyChi(15*a);d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_SHOW_TIP_MASTER)&&(d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_SHOW_TIP_MASTER,!1),this._spawnTip());this._timerYuan-=a;0>this._timerYuan&&(this._timerYuan+=2+r.random(3),this._spawnYuans());
this._timerChi-=a;0>this._timerChi&&(this._timerChi+=5+r.random(5),this._spawnChi());this._player.isMounted()||(this._timerToken-=a,0>this._timerToken&&(this._spawnToken(),this._resetMountTimers()));if(0<this._timerRegen&&(this._timerRegen-=a,0>=this._timerRegen)){this._timerRegen+=c.constants.ConstantsApp.REGEN_TIME;d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH)>=c.constants.ConstantsApp.HEALTH_MAX?d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_HEALTH,c.constants.ConstantsApp.HEALTH_MAX):
(d.WorkinCloud.instance.get_sound().playSound("audio/doo"),d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_HEALTH,1));var b=10,g=[];g.x=this._player.registrationPos.x+50;g.y=this._player.registrationPos.y;for(g.type=c.constants.ConstantsApp.PARTICLE_CHI;0<b;)this._spawnParticle(g),b--}this._updateSpawner(a);for(var b=this._elements.length-1,s=g=0;-1<b;){this._elements[b].isPooled()||this._elements[b].update(a);if(this._elements[b].isActive()&&!this._elements[b].isPooled())switch(this._elements[b].getType()){case c.constants.ConstantsApp.TYPE_PICKUP:d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING)&&
d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT)==c.constants.ConstantsApp.ELEMENT_AIR&&(g=this._player.registrationPos.x-this._elements[b].registrationPos.x,s=this._player.registrationPos.y-this._elements[b].registrationPos.y,25>Math.abs(g)?g=0:(0>g&&g>-c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE&&(g=-c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE),0<g&&g<c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE&&(g=c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE)),this._elements[b].registrationPos.x<
this._player.registrationPos.x&&(g+=this._player.velocity().x),25>Math.abs(s)?s=0:(0>s&&s>-c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE&&(s=-c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE),0<s&&s<c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE&&(s=c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE)),this._elements[b].pos.x+=g*a,this._elements[b].pos.y+=s*a,this._elements[b].updateRegistrationPos());this._runPlayerPickupCollision(L.__cast(this._elements[b],i.elements.pickups.Pickup));break;
case c.constants.ConstantsApp.TYPE_ENEMY:this._runEnemyProjectileCollision(L.__cast(this._elements[b],i.elements.enemies.Enemy));this._runEnemyPlayerCollision(L.__cast(this._elements[b],i.elements.enemies.Enemy));break;case c.constants.ConstantsApp.TYPE_ENEMY_PROJECTILE:this._runProjectilePlayerCollision(L.__cast(this._elements[b],i.elements.projectiles.Projectile))}b--}for(b=this._elements.length-1;-1<b;)this._elements[b].doDelete?this._removeElementAtIndex(b):!1==this._elements[b].sorted&&(this._elements[b].sorted=
!0),b--;this._player.trackGround(c.constants.ConstantsApp.GROUND_Y_BASE-150);this._camera.get_pos().x=this._player.pos.x+this.getCameraPlayerOffsetX();this._camera.get_pos().y=i.World._WORLD_BOTTOM_BOUNDS;this._camera.get_pos().y+c.constants.ConstantsApp.STAGE_CENTER_Y>i.World._WORLD_BOTTOM_BOUNDS&&(this._camera.get_pos().y=i.World._WORLD_BOTTOM_BOUNDS-c.constants.ConstantsApp.STAGE_CENTER_Y);0<this._timerScreenShake&&(this._timerScreenShake-=a,this._camera.get_pos().x+=d.WorkinUtils.getRandom(-3,
3,!1),this._camera.get_pos().y+=d.WorkinUtils.getRandom(-3,3,!1))}},dispose:function(){for(;0<this._particles.length;)this._particles[0].dispose(),this._particles.shift();for(;0<this._yuans.length;)this._yuans[0].dispose(),this._yuans.shift();for(;0<this._enemyCrates.length;)this._enemyCrates[0].dispose(),this._enemyCrates.shift();for(;0<this._enemyBikers.length;)this._enemyBikers[0].dispose(),this._enemyBikers.shift();for(;0<this._enemyHangers.length;)this._enemyHangers[0].dispose(),this._enemyHangers.shift();
for(;0<this._enemyMechas.length;)this._enemyMechas[0].dispose(),this._enemyMechas.shift();for(;0<this._enemyRunners.length;)this._enemyRunners[0].dispose(),this._enemyRunners.shift();for(;0<this._elements.length;)this._removeElementAtIndex(this._elements.length-1);this._player.dispose();this._enemyRunners=this._enemyMechas=this._enemyHangers=this._enemyBikers=this._enemyCrates=this._yuans=this._particles=this._timeline=this._camera=this._elements=this._player=null;try{this._textClickToStart.dispose(),
this._textClickToStart=null}catch(a){}this._removeEventListeners()},_groundY:function(){return c.constants.ConstantsApp.GROUND_Y_BASE},_spawnToken:function(){var a=this.getOffscreenXRight(),b=c.constants.ConstantsApp.GROUND_Y_BASE-75-r.random(200),g="";switch(this._nextAnimal){case c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET:g="elements/pickups/token_ferret";break;case c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON:g="elements/pickups/token_bison";break;case c.constants.ConstantsApp.PICKUP_TOKEN_NAGA:g=
"elements/pickups/token_naga"}this._addElement(new i.elements.pickups.PickupToken({x:a,y:b,vx:100,pickupID:this._nextAnimal,asset:g,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}))},_spawnChi:function(){var a=this.getOffscreenXRight(),b=c.constants.ConstantsApp.GROUND_Y_BASE-75-r.random(200);this._addElement(new i.elements.pickups.PickupChi({x:a,y:b,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}))},_spawnYuans:function(){if(!(0<d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_ACTIVE_FERRETS)))for(var a=
this.getOffscreenXRight(),b=c.constants.ConstantsApp.GROUND_Y_BASE-75-r.random(200),g=-25+r.random(50),s=5+r.random(5);0<s;)c.constants.ConstantsApp.USE_PARTICLE_POOLING?(this._yuans[this._yuanIndex].revive({x:a,y:b,bobs:!0,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}),this._yuanIndex++,this._yuanIndex>=c.constants.ConstantsApp.POOL_SIZE_YUANS&&(this._yuanIndex=0)):this._addElement(new i.elements.pickups.PickupYuan({x:a,y:b,bobs:!0,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP})),a+=60,b+=g,b>c.constants.ConstantsApp.GROUND_Y_BASE-
50&&(b=c.constants.ConstantsApp.GROUND_Y_BASE-50),s--},_spawnYuansAt:function(a,b){for(var g=b;0<g;)c.constants.ConstantsApp.USE_PARTICLE_POOLING?(this._yuans[this._yuanIndex].revive({x:a.x,y:a.y,vx:-100+r.random(600),vy:-400+r.random(200),gravity:1E3,bobs:!1,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}),this._yuanIndex++,this._yuanIndex>=c.constants.ConstantsApp.POOL_SIZE_YUANS&&(this._yuanIndex=0)):this._addElement(new i.elements.pickups.PickupYuan({x:a.x,y:a.y,vx:-100+r.random(600),vy:-400+r.random(200),
gravity:1E3,bobs:!1,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP})),g--},_spawnBackgroundTile:function(a,b,g,s,d){this._addElement(new i.elements.BackgroundTile({assets:a,x:0,y:0,offset:b,tilewidth:g,scrollratiox:s,scrollratioy:d,layer:c.constants.ConstantsApp.LAYER_BG}))},_spawnScorePlayerBurst:function(a,b,g){this._addElement(new i.elements.TrickScoreBurst({x:a,y:b,score:g,assetAnimate:"elements/AssetTrickComboSplat",layer:c.constants.ConstantsApp.LAYER_MAIN,type:c.constants.ConstantsApp.TYPE_PLAYER_SCORE_BURST}))},
_spawnProjectile:function(){if(!(0>=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH))){var a=this._player.registrationPos.x,b=this._player.registrationPos.y;if(d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING)&&d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT)!=c.constants.ConstantsApp.ELEMENT_EARTH){var g={x:this._player.registrationPos.x,y:this._player.registrationPos.y,leader:this._player,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,
type:c.constants.ConstantsApp.TYPE_EFFECT},s=d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT);switch(s){case c.constants.ConstantsApp.ELEMENT_AIR:g.effectName=c.constants.ConstantsApp.EFFECT_BEND_AIR;g.leaderOffsetX=10;g.leaderOffsetY=0;break;case c.constants.ConstantsApp.ELEMENT_FIRE:g.effectName=c.constants.ConstantsApp.EFFECT_BEND_FIRE;g.lifespan=3;break;case c.constants.ConstantsApp.ELEMENT_WATER:g.effectName=c.constants.ConstantsApp.EFFECT_BEND_WATER}this._spawnEffect(g)}a=
{x:a,y:b,layer:c.constants.ConstantsApp.LAYER_PLAYER,type:c.constants.ConstantsApp.TYPE_PROJECTILE};a.isMasterStrength=d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING);s=d.WorkinCloud.instance.getString(c.constants.ConstantsApp.STRING_ELEMENT);switch(s){case c.constants.ConstantsApp.ELEMENT_AIR:s=new i.elements.projectiles.ProjectileAir(a);this._addElement(s);break;case c.constants.ConstantsApp.ELEMENT_EARTH:s=new i.elements.projectiles.ProjectileEarth(a);this._addElement(s);
break;case c.constants.ConstantsApp.ELEMENT_FIRE:s=new i.elements.projectiles.ProjectileFire(a);this._addElement(s);break;case c.constants.ConstantsApp.ELEMENT_WATER:s=new i.elements.projectiles.ProjectileWater(a),this._addElement(s)}d.WorkinCloud.instance.getBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING)||d.WorkinCloud.instance.setString(c.constants.ConstantsApp.STRING_ELEMENT,c.constants.ConstantsApp.getRandomElement());d.WorkinCloud.instance.get_sound().playSound("audio/throw")}},_spawnFireFerret:function(){var a=
{x:this.getOffscreenXRight(),y:c.constants.ConstantsApp.GROUND_Y_BASE,layer:c.constants.ConstantsApp.LAYER_MAIN};this._addElement(new i.elements.animals.FireFerret(a));d.WorkinCloud.instance.get_sound().playSound("audio/fire_ferret")},_spawnEffect:function(a){a.effectName==c.constants.ConstantsApp.EFFECT_AIR_JUMP?a.frameCount=11:a.effectName==c.constants.ConstantsApp.EFFECT_BEND_AIR?a.frameCount=7:a.effectName==c.constants.ConstantsApp.EFFECT_BEND_EARTH?a.frameCount=57:a.effectName==c.constants.ConstantsApp.EFFECT_BEND_WATER?
a.frameCount=10:a.effectName==c.constants.ConstantsApp.EFFECT_BEND_FIRE?a.frameCount=8:a.effectName==c.constants.ConstantsApp.EFFECT_IMPACT_AIR?a.frameCount=15:a.effectName==c.constants.ConstantsApp.EFFECT_IMPACT_EARTH?a.frameCount=0:a.effectName==c.constants.ConstantsApp.EFFECT_IMPACT_WATER?a.frameCount=10:a.effectName==c.constants.ConstantsApp.EFFECT_IMPACT_FIRE?a.frameCount=11:a.effectName==c.constants.ConstantsApp.EFFECT_SHOCKED&&(a.frameCount=15);this._addElement(new i.elements.effects.EffectBasic(a))},
_spawnEffectAirJump:function(){this._spawnEffect({x:this._player.registrationPos.x+20,y:this._player.registrationPos.y-40,layer:c.constants.ConstantsApp.LAYER_MAIN,effectName:c.constants.ConstantsApp.EFFECT_AIR_JUMP,type:c.constants.ConstantsApp.TYPE_EFFECT})},set_State:function(a){this._state!=a&&(this._state=a)},_generate:function(){i.World._WORLD_BOTTOM_BOUNDS=c.constants.ConstantsApp.GROUND_Y_BASE+120;this._viewport=new y.Viewport(this._timeline);this._viewport.addLayer(c.constants.ConstantsApp.LAYER_BG);
this._viewport.addLayer(c.constants.ConstantsApp.LAYER_MAIN);this._viewport.addLayer(c.constants.ConstantsApp.LAYER_PLAYER_BELOW);this._viewport.addLayer(c.constants.ConstantsApp.LAYER_PLAYER);this._viewport.addLayer(c.constants.ConstantsApp.LAYER_PLAYER_ABOVE);this._viewport.addLayer(c.constants.ConstantsApp.LAYER_MAIN_TOP);this._elements=[];this._addEventListeners();this._camera=new n.WorkinMotion(new n.WorkinPoint(c.constants.ConstantsApp.STAGE_CENTER_X,c.constants.ConstantsApp.STAGE_CENTER_Y),
new n.WorkinPoint(c.constants.ConstantsApp.STAGE_CENTER_X,c.constants.ConstantsApp.STAGE_CENTER_Y));this._player=new i.elements.Player({x:300,y:this._groundY(250),layer:c.constants.ConstantsApp.LAYER_PLAYER});this._addElement(this._player);this._addElement(new i.elements.Background({asset:"elements/AssetBgHorizon",y:c.constants.ConstantsApp.GROUND_Y_BASE-500,layer:c.constants.ConstantsApp.LAYER_BG,type:c.constants.ConstantsApp.TYPE_BACKGROUND}));d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.BOOL_LOW_QUAL_MODE)||
this._spawnBackgroundTile("elements/AssetBgMid",0.55*c.constants.ConstantsApp.GROUND_Y_BASE,1024,0.7,0.4);this._spawnBackgroundTile("elements/AssetBgGround",0.66*c.constants.ConstantsApp.GROUND_Y_BASE,1024,1,1);c.constants.ConstantsApp.OPTION_STRESS_TEST&&(this._fpsMonitor=new y.TextBase(15,125,"","",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP}),this._viewport.getLayer(c.constants.ConstantsApp.LAYER_MAIN_TOP).addChild(this._fpsMonitor.get_entity()),this._fpsMonitor.update(0),this._fpsMonitor.renderPositionWithoutCamera());
this._timerProgress=-1;this._timerYuan=2;this._timerRegen=this._timerSpawn=this._timerChi=1;this._timerEnd=0;this._state=-1;this.set_State(i.World._STATE_PLAYING);this._newRecord=!1;this._enemyStage=1;this._timerCrate=this._timerMecha=this._timerDifficultyUp=this._timerDifficultyRamp=this._spawnMonsterChance=this._spawnPace=0;this.set_EnemyStage(this._enemyStage);this._resetMountTimers();d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER,0);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_MASTER_BENDING,
!1);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_UPDATE_LEVEL));var a=[];a.x=-1E3;a.y=-1E3;a.asset="elements/particles/particle_"+c.constants.ConstantsApp.PARTICLE_FIRE;a.type=c.constants.ConstantsApp.TYPE_PARTICLE;a.layer=c.constants.ConstantsApp.LAYER_PLAYER_ABOVE;var b=[];b.x=-1E3;b.y=-1E3;var g=[];g.x=-1E3;g.y=-1E3;g.layer=c.constants.ConstantsApp.LAYER_MAIN;g.firstTime=!0;this._particles=[];this._particleIndex=0;this._yuans=[];this._yuanIndex=
0;this._enemyCrates=[];this._enemyBikers=[];this._enemyHangers=[];this._enemyMechas=[];this._enemyRunners=[];this._crateI=this._bikerI=this._hangerI=this._mechaI=this._runnerI=0;var s,e=0;if(c.constants.ConstantsApp.USE_PARTICLE_POOLING&&!d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.BOOL_LOW_QUAL_MODE))for(;e<c.constants.ConstantsApp.POOL_SIZE_PARTICLES;)s=new i.elements.particles.Particle(a),this._addElement(s),this._particles.push(s),e++;for(s=0;s<c.constants.ConstantsApp.POOL_SIZE_YUANS;)a=
new i.elements.pickups.PickupYuan(b),this._addElement(a),this._yuans.push(a),s++;for(b=0;b<c.constants.ConstantsApp.POOL_SIZE_ENEMIES;){a=new i.elements.enemies.EnemyCrate(g);s=new i.elements.enemies.EnemyBiker(g);var e=new i.elements.enemies.EnemyHanger(g),f=new i.elements.enemies.EnemyRunner(g);this._addElement(s);this._enemyBikers.push(s);this._addElement(e);this._enemyHangers.push(e);this._addElement(f);this._enemyRunners.push(f);this._addElement(a);this._enemyCrates.push(a);b++}for(b=0;b<c.constants.ConstantsApp.POOL_SIZE_ENEMIES;)a=
new i.elements.enemies.EnemyMecha(g),this._addElement(a),this._enemyMechas.push(a),b++;d.WorkinCloud.instance.setValue(c.constants.ConstantsApp.INT_ACTIVE_FERRETS,0);this._flagUnpauseOnlyOnFirstInput=!0;this._textClickToStart=new i.elements.TextBlink({x:c.constants.ConstantsApp.STAGE_CENTER_X,y:c.constants.ConstantsApp.STAGE_CENTER_Y-150,layer:c.constants.ConstantsApp.LAYER_MAIN_TOP});this._addElement(this._textClickToStart);this._pause()},__class__:i.World};i.elements={};i.elements.Element=function(a){this.init(a)};
j["com.nick.legend_of_korra.republic_city_run.world.elements.Element"]=i.elements.Element;i.elements.Element.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,Element".split(",");i.elements.Element.prototype={doPoolOnDelete:function(){return!1},getMaxDurability:function(){return 100},velocity:function(){return this._velocity},isPooled:function(){return this._flagPooled},isStoppedByGround:function(){return!1},isInvulnerable:function(){return 0<this._timerInvulnerable},isActive:function(){return 0<
this._durability},modifyDurability:function(a){if(!this.isActive())return!0;this._durability+=a;this._durability>this.getMaxDurability()&&(this._durability=this.getMaxDurability());return 0>=this._durability?(this._durability=0,!0):!1},disposeDisplay:function(){this._display=null},dispose:function(){this._removeEventListeners();this._effects=this._scaleOffset=this._renderOffset=this._collisionDimensions=this._collisionOffset=this._inElementPos=this.registrationPos=this._velocity=this.pos=null;this._entity.dispose()},
_removeEventListeners:function(){},_addEventListeners:function(){},setValue:function(a,b,g){switch(a){case "s":this._display.scaleX.set__(g.x);this._display.scaleY.set__(g.y);break;case "sx":this._display.scaleX.set__(b);break;case "sy":this._display.scaleY.set__(b);break;case "sc":this._display.scaleX.set__(b);this._display.scaleY.set__(b);break;case "t":this.pos.x=g.x;this.pos.y=g.y;break;case "tx":this.pos.x=b;break;case "ty":this.pos.y=b;break;case "rtx":this.pos.x+=b;break;case "rty":this.pos.y+=
b;break;case "r":this._display.rotation.set__(b);break;case "a":this._display.alpha.set__(b)}},setOrigin:function(a){null!=this._display&&this._display.setAnchor(a.x,a.y)},_onCompleteEffect:function(){},_shimmerRandomize:function(){this._shimmerAlphaTarget=Math.round(30+r.random(70))/100;this._shimmerRate=0.4+r.random(4)/6},_onApplyEffect:function(a,b,g){var c=g.magnitude;switch(a){case "pulse":this._flagScaleOffsetChanged=!0;this._sin+=50*b*c;this._scaleOffset.to(1+0.03*Math.sin(this._sin),1+0.03*
Math.sin(this._sin));break;case "shakex":this._sin+=50*b;this._renderOffset.to(12*c*Math.sin(this._sin),0);break;case "shakey":this._sin+=50*b;this._renderOffset.to(0,12*c*Math.sin(this._sin));break;case "run":this._sin+=15*b*c;this._renderOffset.to(0,5*Math.sin(this._sin));break;case "shake":this._renderOffset.to(c*r.random(4)*(1>=r.random(2)?-1:1),c*r.random(4)*(1>=r.random(2)?-1:1));break;case "togglealpha":this._toggleAlphaTimer=this._toggleAlphaTimerReset=g.get_durDefault()/g.loops;this._toggleAlphaCount=
0==g.loops?1:g.loops;break;case "shimmer":this._display.alpha._value>this._shimmerAlphaTarget?(a=this._display.alpha,a.set__(a._value-this._shimmerRate*b),this._display.alpha._value<=this._shimmerAlphaTarget&&(this._display.alpha.set__(this._shimmerAlphaTarget),this._shimmerRandomize())):this._display.alpha._value<this._shimmerAlphaTarget?(a=this._display.alpha,a.set__(a._value+this._shimmerRate*b),this._display.alpha._value>=this._shimmerAlphaTarget&&(this._display.alpha.set__(this._shimmerAlphaTarget),
this._shimmerRandomize())):this._shimmerRandomize();break;case "sin":this._sin+=2.6*b,this._renderOffset.to(50*c*Math.sin(this._sin),this._renderOffset.y)}},renderPosition:function(a){this._display.x.set__(this.pos.x-a.get_pos().x+c.constants.ConstantsApp.STAGE_CENTER_X+this._renderOffset.x);this._display.y.set__(this.pos.y-a.get_pos().y+c.constants.ConstantsApp.STAGE_CENTER_Y+this._renderOffset.y);this._despawnOffScreen()&&-200>this._display.x._value&&this._onLifespanComplete()},updateRegistrationPos:function(){this.registrationPos=
new n.WorkinPoint(this.pos.x+this.registrationXOffset(),this.pos.y+this.registrationYOffset())},updatePositionFromVelocity:function(a){0!=this._gravity&&(this._velocity.y+=this._gravity*a);this.pos.x+=this._velocity.x*a;this.pos.y+=this._velocity.y*a;0!=this._gravity&&this.isStoppedByGround()&&this.pos.y>c.constants.ConstantsApp.GROUND_Y_BASE-25&&(this.pos.y=c.constants.ConstantsApp.GROUND_Y_BASE-25,this._gravity=0,this._velocity.x=0,this._velocity.y=0);this.registrationPos=new n.WorkinPoint(this.pos.x+
this.registrationXOffset(),this.pos.y+this.registrationYOffset())},_onLifespanComplete:function(){this.doPoolOnDelete()?(this._display.y.set__(-1E3),this._flagPooled=!0):(this._flagPooled=!1,this.doDelete=!0)},_doLifespanDecrement:function(a){0<this._lifespanRemaining&&(this._lifespanRemaining-=a,0>=this._lifespanRemaining&&this._onLifespanComplete())},update:function(a){this._doLifespanDecrement(a);0<this._timerInvulnerable&&(this._timerInvulnerable-=a);for(var b=0;b<this._effects.length;)this._effects[b].update(a),
this._effects[b].isActive()?this._onApplyEffect(this._effects[b].type,a,this._effects[b]):this._effects[b].get_wasActive()&&this._onCompleteEffect(this._effects[b].type),b++;0<this._toggleAlphaCount&&(this._toggleAlphaTimer-=a,0>this._toggleAlphaTimer&&(this._display.alpha.set__(0==this._display.alpha._value?1:0),this._toggleAlphaCount--,0<this._toggleAlphaCount&&(this._toggleAlphaTimer=this._toggleAlphaTimerReset)))},getCollisionDimensions:function(){return this._collisionDimensions},getCollisionOffset:function(){return this._collisionOffset},
registrationYOffset:function(){return 0},registrationXOffset:function(){return 0},_despawnOffScreen:function(){return!0},getType:function(){return this._type},get_entity:function(){return this._entity},_defaultLayer:function(){return c.constants.ConstantsApp.LAYER_MAIN},testCollision:function(a,b,g){this._inElementPos.x=a.x+g.x+this._collisionOffset.x;this._inElementPos.y=a.y+g.y+this._collisionOffset.y;return Math.abs(this.registrationPos.x-this._inElementPos.x)<0.5*b.x+0.5*this._collisionDimensions.x&&
Math.abs(this.registrationPos.y-this._inElementPos.y)<0.5*b.y+0.5*this._collisionDimensions.y?!0:!1},_disposeBitmapContainer:function(){!1!=this._flagBitmapAdded&&(this._flagBitmapAdded=!1,this._display.dispose())},rebuild:function(a){this._lifespanMax=0;a.lifespan&&(this._lifespanMax=a.lifespan);this._lifespanRemaining=this._lifespanMax;this._flagLifespan=0<this._lifespanMax;this._flagPooled=!1;this._durability=this.getMaxDurability();this.carriable=!0;this._gravity=0;this._effects=[];this.pos.to(0,
0);this._velocity.to(0,0);this._renderOffset.to(0,0);this._scaleOffset.to(0,0);this._inElementPos.to(0,0);this._collisionOffset.to(0,0);this._collisionDimensions.to(0,0);if(a.asset&&this._bitmapAssetCurrent!=a.asset){this.assetId=a.asset;if(this._flagBitmapAdded){if(this._bitmapAssetCurrent==this.assetId)return;this._disposeBitmapContainer()}this._bitmapAssetCurrent=this.assetId;if(""==this._bitmapAssetCurrent)return;this._flagBitmapAdded=!0;this._display=new l.ImageSprite(d.WorkinCloud.instance.get_assets().getTexture(this._bitmapAssetCurrent));
this._entity.add(this._display)}this._toggleAlphaCount=this._toggleAlphaTimerReset=this._toggleAlphaTimer=0;this.layer=this._defaultLayer();a.layer&&(this.layer=a.layer);var b=new n.WorkinPoint;a.ox&&(b.x=a.ox);a.oy&&(b.y=a.oy);a.gravity&&(this._gravity=a.gravity);this.setOrigin(b);this.pos.x=0;this.pos.y=0;a.x&&(this.pos.x=a.x);a.y&&(this.pos.y=a.y);this.registrationPos=new n.WorkinPoint(this.pos.x+this.registrationXOffset(),this.pos.y+this.registrationYOffset());a.rot&&this._display.rotation.set__(a.rot);
this._type=c.constants.ConstantsApp.TYPE_OBSTACLE;a.type&&(this._type=a.type);this._flagScaleOffsetChanged=!1;this._sin=r.random(100)/100;this.doDelete=!1;a.scale&&(this.setValue("sx",a.scale,null),this.setValue("sy",a.scale,null));a.scaleX&&this.setValue("sx",a.scaleX,null);a.vx&&(this._velocity.x=a.vx);a.vy&&(this._velocity.y=a.vy);this._timerInvulnerable=0},init:function(a){this.group=a.group?a.group:"";this._lifespanMax=0;a.lifespan&&(this._lifespanMax=a.lifespan);this._lifespanRemaining=this._lifespanMax;
this._flagLifespan=0<this._lifespanMax;this._flagPooled=!1;this._durability=this.getMaxDurability();this.carriable=!0;this._gravity=0;this._entity=new P;this._effects=[];this.pos=new n.WorkinPoint;this._velocity=new n.WorkinPoint;this._renderOffset=new n.WorkinPoint;this._scaleOffset=new n.WorkinPoint;this._inElementPos=new n.WorkinPoint;this._collisionOffset=new n.WorkinPoint;this._collisionDimensions=new n.WorkinPoint;a.asset?(this.assetId=a.asset,this._display=new l.ImageSprite(d.WorkinCloud.instance.get_assets().getTexture(this.assetId))):
(this.assetId="",this._display=new l.Sprite);this._entity.add(this._display);this._bitmapAssetCurrent=this.assetId;this._flagBitmapAdded=!0;this._toggleAlphaCount=this._toggleAlphaTimerReset=this._toggleAlphaTimer=0;this.layer=this._defaultLayer();a.layer&&(this.layer=a.layer);var b=new n.WorkinPoint;a.ox&&(b.x=a.ox);a.oy&&(b.y=a.oy);a.gravity&&(this._gravity=a.gravity);this.setOrigin(b);this.pos.x=0;this.pos.y=0;a.x&&(this.pos.x=a.x);a.y&&(this.pos.y=a.y);this.registrationPos=new n.WorkinPoint(this.pos.x+
this.registrationXOffset(),this.pos.y+this.registrationYOffset());a.rot&&this._display.rotation.set__(a.rot);this._type=c.constants.ConstantsApp.TYPE_OBSTACLE;a.type&&(this._type=a.type);this._flagScaleOffsetChanged=!1;this._sin=r.random(100)/100;this._shimmerRandomize();this._addEventListeners();this.doDelete=!1;a.scale&&(this.setValue("sx",a.scale,null),this.setValue("sy",a.scale,null));a.scaleX&&this.setValue("sx",a.scaleX,null);a.vx&&(this._velocity.x=a.vx);a.vy&&(this._velocity.y=a.vy);this._timerInvulnerable=
0},__class__:i.elements.Element};i.elements.Image=function(a){i.elements.Element.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.Image"]=i.elements.Image;i.elements.Image.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,Image".split(",");i.elements.Image.__super__=i.elements.Element;i.elements.Image.prototype=w(i.elements.Element.prototype,{_doMotionPoint:function(a){a=a.get_pos().copy();0==a.x%1&&(a.x+=0.0010);0==a.y%1&&(a.y+=0.0010);return a},_doMotionFloat:function(a){0==
a%1&&(a+=0.0010);return a},update:function(a){i.elements.Element.prototype.update.call(this,a)},dispose:function(){this._tweens=null;i.elements.Element.prototype.dispose.call(this)},init:function(a){i.elements.Element.prototype.init.call(this,a);this._tweens=[];a.pId&&(this.id=a.pId);this._display.scaleX.set__(1);this._display.scaleY.set__(1);a.pScale&&(this._display.scaleX.set__(a.pScale.x),this._display.scaleY.set__(a.pScale.y));this._display.rotation.set__(0);a.pRot&&this._display.rotation.set__(a.pRot);
this._display.alpha.set__(1);a.pAlpha&&this._display.alpha.set__(a.pAlpha)},__class__:i.elements.Image});i.elements.AnimatedElement=function(a){this._currentAnimation="";this._currentFrame=0;this.ANI_IDLE_AIR="idle_air";this.ANI_IDLE_WATER="idle_water";this.ANI_IDLE_EARTH="idle_earth";this.ANI_IDLE_FIRE="idle_fire";this.ANI_SLIDE="slide";this.ANI_ATTACK_OUT="attack_out";this.ANI_ATTACK="attack";this.ANI_JUMP_DOWN="jump_down";this.ANI_JUMP_PEAK="jump_peak";this.ANI_JUMP="jump";this.ANI_RUN="run";this.ANI_IN=
"in";this.ANI_IDLE="idle";this._animations=new B.StringMap;this._lastFrame=-1;i.elements.Image.call(this,a);this.revive(a,!1);this._movieTest=""};j["com.nick.legend_of_korra.republic_city_run.world.elements.AnimatedElement"]=i.elements.AnimatedElement;i.elements.AnimatedElement.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,AnimatedElement".split(",");i.elements.AnimatedElement.__super__=i.elements.Image;i.elements.AnimatedElement.prototype=w(i.elements.Image.prototype,{getMovieName:function(){return""},
getLibrary:function(){return"flump_effects"},dispose:function(){this._currentFrameList=this._animations=this._movie=null;i.elements.Image.prototype.dispose.call(this)},_onAnimationComplete:function(){},update:function(a){i.elements.Image.prototype.update.call(this,a);if(""!=this._currentAnimation&&(0<this._currentLoop||this._flagLoop))this._currentFrame+=c.constants.ConstantsApp.FRAMES_PER_SECOND*a,this._currentFrame>this._currentFrameList[1]&&(this._currentLoop--,1>this._currentLoop&&!1==this._flagLoop?
this._onAnimationComplete(this._currentAnimation):this._currentFrame=this._currentFrameList[0]),null!=this._movie&&(this._currentFrame|0)!=this._lastFrame&&this._movie.set_position(Math.floor(this._currentFrame)/this._frames*this._duration),this._lastFrame=this._currentFrame|0},playAnimation:function(a,b){null==b&&(b=0);null!=this._animations&&(this._animations.exists(a)?(""==this._movieTest&&null,this._currentFrameList=null,this._currentFrameList=this._animations.get(a).slice(),this._currentFrame=
this._currentFrameList[0],this._currentAnimation=a,this._currentLoop=b,this._flagLoop=0==b):d.WorkinCloud.instance.log("Animation not found: "+a+" "+this._animations.toString()))},addAnimation:function(a,b,g){this._animations.set(a,[b,g])},currentAnimation:function(){return this._currentAnimation},changeMovie:function(a,b){this._display.dispose();this._entity.remove(this._movie);this._animations=new B.StringMap;var g=d.WorkinCloud.instance.get_assets().getLibrary(a)._symbols.get(b);this._duration=
g.duration;this._frames=g.frames;this._movie=g.createSprite();this._movie.set_paused(!0);this.tileWidth=this._movie.getNaturalWidth();this.tileHeight=this._movie.getNaturalHeight();this._display=this._movie;this._entity.add(this._movie)},revive:function(a){""!=this.getMovieName()&&(a.library||(a.library=this.getLibrary()),a.movie=this.getMovieName());if(a.library&&null!=this._display){this._display.dispose();var b=d.WorkinCloud.instance.get_assets().getLibrary(a.library).getSymbol(a.movie);this._duration=
b.duration;this._frames=b.frames;this._movie=b.createSprite();this._movie.set_paused(!0);this._movieTest=a.movie;this.tileWidth=this._movie.getNaturalWidth();this.tileHeight=this._movie.getNaturalHeight();this._display=this._movie;this._entity.add(this._movie)}this.pos.x=0;this.pos.y=0;a.x&&(this.pos.x=a.x);a.y&&(this.pos.y=a.y);this.registrationPos=new n.WorkinPoint(this.pos.x+this.registrationXOffset(),this.pos.y+this.registrationYOffset())},__class__:i.elements.AnimatedElement});i.elements.Background=
function(a){i.elements.Element.call(this,a);this._display.scaleY.set__(c.constants.ConstantsApp.STAGE_HEIGHT/this._display.getNaturalHeight())};j["com.nick.legend_of_korra.republic_city_run.world.elements.Background"]=i.elements.Background;i.elements.Background.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,Background".split(",");i.elements.Background.__super__=i.elements.Element;i.elements.Background.prototype=w(i.elements.Element.prototype,{renderPosition:function(){this._display.x.set__(0);
this._display.y.set__(-100)},__class__:i.elements.Background});i.elements.BackgroundTile=function(a){a.type=c.constants.ConstantsApp.TYPE_BACKGROUND;i.elements.Element.call(this,a);this._display.dispose();this._lastCameraPos=new n.WorkinPoint(c.constants.ConstantsApp.STAGE_CENTER_X,0);this._tilePos=[];this._tiles=[];this._tileAsset=a.assets;this._tileWidth=a.tilewidth;this._scrollRatioX=a.scrollratiox;this._scrollRatioY=a.scrollratioy;this._offsetY=a.offset;this._spawnTiles()};j["com.nick.legend_of_korra.republic_city_run.world.elements.BackgroundTile"]=
i.elements.BackgroundTile;i.elements.BackgroundTile.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,BackgroundTile".split(",");i.elements.BackgroundTile.__super__=i.elements.Element;i.elements.BackgroundTile.prototype=w(i.elements.Element.prototype,{dispose:function(){for(var a=0,b=this._tiles;a<b.length;){var g=b[a];++a;g.dispose()}this._tilePos=this._tiles=null;i.elements.Element.prototype.dispose.call(this)},_removeEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().removeEventListener(c.constants.ConstantsApp.EVENT_UPDATE_LEVEL,
v(this,this._onUpdateLevel))},_addEventListeners:function(){d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_UPDATE_LEVEL,v(this,this._onUpdateLevel))},renderPosition:function(a){for(var b=this._lastCameraPos.x-a.get_pos().x,g=this._tilePos.length;0<g;)if(g--,this._tilePos[g].x+=b*this._scrollRatioX,this._tilePos[g].y=0==this._scrollRatioY?0:this._offsetY-a.get_pos().y+c.constants.ConstantsApp.STAGE_CENTER_Y,0>this._tilePos[g].x+this._tileWidth){this._tilePos[g].x=
this._tilePos[this._tilePos.length-1].x+this._tileWidth;var s=this._tilePos[g];this._tilePos.splice(g,1);this._tilePos.push(s)}for(g=0;g<this._tiles.length;)this._tiles[g].x.set__(this._tilePos[g].x),this._tiles[g].y.set__(this._tilePos[g].y),g++;this._lastCameraPos.x=a.get_pos().x},_spawnTile:function(a){var b=new P;this._entity.addChild(b);var g=new l.ImageSprite(d.WorkinCloud.instance.get_assets().getTexture(this._tileAsset+r.string(d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_ENVIRONMENT))));
g.x.set__(a);g.y.set__(this._offsetY);this._tiles.push(g);b.add(g);this._tilePos.push(new n.WorkinPoint(g.x._value,g.y._value));return this._tileWidth},_onUpdateLevel:function(){},_spawnTiles:function(){for(this._totalWidth=-c.constants.ConstantsApp.STAGE_WIDTH;this._totalWidth<3*c.constants.ConstantsApp.STAGE_WIDTH;)this._totalWidth+=this._spawnTile(this._totalWidth)},__class__:i.elements.BackgroundTile});i.elements.Player=function(a){this.element=c.constants.ConstantsApp.getRandomElement();a.type=
c.constants.ConstantsApp.TYPE_PLAYER;a.library="flump_mounts";a.movie="korra";i.elements.AnimatedElement.call(this,a);this.addAnimation(this.ANI_RUN,0,15);this.addAnimation(this.ANI_JUMP,18,18);this.addAnimation(this.ANI_JUMP_PEAK,19,21);this.addAnimation(this.ANI_JUMP_DOWN,24,24);this.addAnimation(this.ANI_ATTACK,34,41);this.addAnimation(this.ANI_SLIDE,42,42);this._renderOffset.to(this.registrationXOffset(),this.registrationYOffset());this._speedTarget=400;this._velocity.x=120;this._timerDust=this._timerMount=
0;this._particleData=[];this._particleData.type=c.constants.ConstantsApp.PARTICLE_AIR;this._prevPos=this.pos.copy();this._motionDistanceThisUpdate=new n.WorkinPoint;this.set_State(0);this.set_StateY(0);this.set_StateAction(0);this._display.setScale(1);this._displayRotation=0;this.playAnimation(this.ANI_RUN,0);this._collisionDimensions.x=50;this._collisionDimensions.y=60;this._collectionCollision=new n.WorkinPoint;this._collectionCollision.x=80;this._collectionCollision.y=120;this._collisionOffset.x=
0;this._collisionOffset.y=0;this._groundOffset=-60;this._sliding=!1;this._sinDisplay=Math.random()*Math.PI;d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING,!1)};j["com.nick.legend_of_korra.republic_city_run.world.elements.Player"]=i.elements.Player;i.elements.Player.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,Player".split(",");i.elements.Player.__super__=i.elements.AnimatedElement;i.elements.Player.prototype=w(i.elements.AnimatedElement.prototype,
{_despawnOffScreen:function(){return!1},registrationYOffset:function(){return 180},registrationXOffset:function(){return this._display.getNaturalWidth()/2},isMounted:function(){return 0<this._timerMount},getCollectionDimensions:function(){return this._collectionCollision},dispose:function(){this._collectionCollision=this._motionDistanceThisUpdate=null;i.elements.AnimatedElement.prototype.dispose.call(this)},set_StateAction:function(a){this._stateAction=a},set_StateY:function(a){this._stateY=a},doCollision:function(){this._timerInvulnerable=
0.5},doDismount:function(){this.changeMovie("flump_mounts","korra");this.addAnimation(this.ANI_RUN,0,15);this.addAnimation(this.ANI_JUMP,18,18);this.addAnimation(this.ANI_JUMP_PEAK,19,21);this.addAnimation(this.ANI_JUMP_DOWN,24,24);this.addAnimation(this.ANI_ATTACK,34,41);this.addAnimation(this.ANI_SLIDE,42,42);this.set_State(0);this._groundOffset=-60;this.trackGround(c.constants.ConstantsApp.GROUND_Y_BASE-250);this.doJump();this._collisionDimensions.x=50;this._collisionDimensions.y=60;this._collectionCollision.x=
80;this._collectionCollision.y=120;this._timerMount=0;this._speedTarget=400;this.setValue("sc",1,null);d.WorkinCloud.instance.get_sound().playSound("audio/mount");d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING,!1)},doMountSkyBison:function(){this.changeMovie("flump_mounts","sky_bison");this.addAnimation(this.ANI_RUN,0,11);this.set_State(3);this.playAnimation(this.ANI_RUN);this._groundOffset=-130;this._collisionDimensions.x=200;this._collisionDimensions.y=180;this._collectionCollision.x=
200;this._collectionCollision.y=180;this._timerMount=8;this._speedTarget=1600;this.setValue("sc",1.2,null);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING,!0)},doMountNaga:function(){this.changeMovie("flump_mounts","naga");this.addAnimation(this.ANI_RUN,0,11);this.addAnimation(this.ANI_JUMP,15,15);this.addAnimation(this.ANI_JUMP_PEAK,16,17);this.addAnimation(this.ANI_JUMP_DOWN,20,20);this.set_State(2);this.doJump();this._groundOffset=-100;this._collisionDimensions.x=
200;this._collisionDimensions.y=155;this._collectionCollision.x=200;this._collectionCollision.y=155;this._timerMount=10;this._speedTarget=800;this.setValue("sc",1.2,null);d.WorkinCloud.instance.setBool(c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING,!0)},set_State:function(a){this._state=a;switch(this._state){case 0:this.getIsAirborne()?this.playAnimation(this.ANI_JUMP):this.playAnimation(this.ANI_RUN);break;case 1:this.playAnimation(this.ANI_ATTACK,1)}},_onAnimationComplete:function(a){a==this.ANI_JUMP_PEAK?
this.playAnimation(this.ANI_JUMP_DOWN):a==this.ANI_ATTACK&&this.set_State(0)},getIsAirborne:function(){return 0!=this._stateY},getJumpForce:function(){return 825},doSlide:function(){this._sliding=!0;this.playAnimation(this.ANI_SLIDE)},doShoot:function(){0>=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH)||this.set_State(1)},doJump:function(){0>=d.WorkinCloud.instance.getValue(c.constants.ConstantsApp.INT_HEALTH)||(this._velocity.y=-this.getJumpForce(),this.set_StateY(1),this.playAnimation(this.ANI_JUMP,
1),d.WorkinCloud.instance.get_sound().playSound("audio/whoosh"))},doUp:function(){},doDown:function(){},_doGround:function(){this.set_StateY(0);this._velocity.y=0;this._sliding||this.playAnimation(this.ANI_RUN)},trackGround:function(a){a+=this._groundOffset;switch(this._stateY){case 0:this.pos.y=a;this.updateRegistrationPos();break;case 1:case 2:this.pos.y>=a&&(this.pos.y=a,this._doGround(),this.updateRegistrationPos())}},update:function(a){this._prevPos.toPoint(this.registrationPos);i.elements.AnimatedElement.prototype.update.call(this,
a);this.updatePositionFromVelocity(a);475>this.pos.y&&(this.pos.y=475,this._velocity.y+=2200*a);0<this._timerMount&&(this._timerMount-=a,0>=this._timerMount&&(this._timerMount=0,this.doDismount()));this._sliding&&(0<this._speedTarget&&(this._speedTarget-=200*a,0>=this._speedTarget&&(this._speedTarget=0)),0<this._velocity.x&&0==this._stateY&&(this._timerDust-=a,0>this._timerDust&&(this._timerDust+=0.1,this._particleData.x=this.registrationPos.x-50,this._particleData.y=this.registrationPos.y,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,
this._particleData)))));this._velocity.y+=2200*a;switch(this._stateY){case 1:0<this._velocity.y&&(this.set_StateY(2),this._currentAnimation==this.ANI_JUMP&&this.playAnimation(this.ANI_JUMP_PEAK,1));break;case 2:680<this._velocity.y&&(this._velocity.y=680)}this._velocity.x<this._speedTarget&&(this._velocity.x+=360*a);this._velocity.x>this._speedTarget&&(this._velocity.x=this._speedTarget);d.WorkinCloud.instance.setFloat(c.constants.ConstantsApp.FLOAT_SPEED,this._velocity.x);0<this._timerInvincible&&
(this._timerInvincible-=a);this._motionDistanceThisUpdate=n.WorkinMath.diffBetweenPoints(this._prevPos,this.registrationPos)},setSpeedNormal:function(){this._speedTarget=400},setSpeedFire:function(){this._speedTarget=600},__class__:i.elements.Player});i.elements.TextBlink=function(a){this._BLINK_TIME=0.9;i.elements.AnimatedElement.call(this,a);this._blinkTimer=this._BLINK_TIME;this._text=D._platform.getTouch().get_supported()?new y.TextLocalized(0,0,"tap_anywhere","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,
origin:new n.WorkinPoint(0.5,0.5)}):new y.TextLocalized(0,0,"click_anywhere","Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)});this._blinkDown=!1;this._entity.addChild(this._text.get_entity())};j["com.nick.legend_of_korra.republic_city_run.world.elements.TextBlink"]=i.elements.TextBlink;i.elements.TextBlink.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,TextBlink".split(",");i.elements.TextBlink.__super__=i.elements.AnimatedElement;i.elements.TextBlink.prototype=
w(i.elements.AnimatedElement.prototype,{dispose:function(){i.elements.AnimatedElement.prototype.dispose.call(this);this._text.dispose();this._text=null},renderPosition:function(){this._display.x.set__(this.pos.x+this._renderOffset.x);this._display.y.set__(this.pos.y+this._renderOffset.y)},update:function(a){a=0.03;this._blinkDown?(this._blinkTimer-=a,0>=this._blinkTimer&&(this._blinkDown=!1,this._blinkTimer=0)):(this._blinkTimer+=a,1<=this._blinkTimer&&(this._blinkDown=!0,this._blinkTimer=1));this._text.get_display().alpha.set__(this._blinkTimer/
1);i.elements.AnimatedElement.prototype.update.call(this,a)},__class__:i.elements.TextBlink});i.elements.TrickScoreBurst=function(a){a.rows=5;a.columns=3;i.elements.AnimatedElement.call(this,a);this._velocity.x=0;this._flagCloseAfterTimer=this._flagOut=!1;this._timerLifespan=1.5;this._score=a.score;this.pos.y+=this.tileHeight/2;this.pos.x+=this.tileWidth/2;this.addAnimation("in",0,7);this.addAnimation("idle",8,11);this.addAnimation("out",12,14);this.playAnimation("in",1)};j["com.nick.legend_of_korra.republic_city_run.world.elements.TrickScoreBurst"]=
i.elements.TrickScoreBurst;i.elements.TrickScoreBurst.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,TrickScoreBurst".split(",");i.elements.TrickScoreBurst.__super__=i.elements.AnimatedElement;i.elements.TrickScoreBurst.prototype=w(i.elements.AnimatedElement.prototype,{_onAnimationComplete:function(){this._flagOut&&(this.doDelete=!0)},close:function(){0<this._timerLifespan?this._flagCloseAfterTimer=!0:(this._flagOut=!0,this.playAnimation("out",1))},update:function(a){this.currentAnimation();
0<this._timerLifespan&&(this._timerLifespan-=a,0>this._timerLifespan&&this._flagCloseAfterTimer&&this.close());i.elements.AnimatedElement.prototype.update.call(this,a);this.updatePositionFromVelocity(a)},__class__:i.elements.TrickScoreBurst});i.elements.animals={};i.elements.animals.FireFerret=function(a){a.type=c.constants.ConstantsApp.TYPE_EFFECT;a.lifespan=28;i.elements.AnimatedElement.call(this,a);this._particleData=[];this._particleData.type=this.getEmitParticle();this._timerEmit=this.getEmitTime();
this._timerYuan=this.getYuanTime();this._timerLeap=this.getLeapTime();this._jumping=!1;this.addAnimation(this.ANI_RUN,0,11);this.addAnimation(this.ANI_JUMP,2,3);this.playAnimation(this.ANI_RUN,0);this.orient(!0);d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_ACTIVE_FERRETS,1)};j["com.nick.legend_of_korra.republic_city_run.world.elements.animals.FireFerret"]=i.elements.animals.FireFerret;i.elements.animals.FireFerret.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,animals,FireFerret".split(",");
i.elements.animals.FireFerret.__super__=i.elements.AnimatedElement;i.elements.animals.FireFerret.prototype=w(i.elements.AnimatedElement.prototype,{_despawnOffScreen:function(){return!1},getMovieName:function(){return"fire_ferret"},getLibrary:function(){return"flump_mounts"},getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_FIRE_FERRET},getEmitTime:function(){return 0.2},getYuanTime:function(){return 0.1},getLeapTime:function(){return 2},dispose:function(){this._particleData=[];d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_ACTIVE_FERRETS,
-1);i.elements.AnimatedElement.prototype.dispose.call(this)},update:function(a){i.elements.AnimatedElement.prototype.update.call(this,a);this._velocity.x=this._toTheLeft?d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_SPEED)-800:d.WorkinCloud.instance.getFloat(c.constants.ConstantsApp.FLOAT_SPEED)+100;0<this._timerEmit&&(this._timerEmit-=a,0>=this._timerEmit&&(this._timerEmit+=0.75*this.getEmitTime()+0.5*Math.random()*this.getEmitTime(),this._particleData.x=this.registrationPos.x,this._particleData.y=
this.registrationPos.y,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData))));0<this._timerYuan&&(this._timerYuan-=a,0>=this._timerYuan&&(this._timerYuan+=this.getYuanTime(),this._particleData.x=this.registrationPos.x,this._particleData.y=this.registrationPos.y-50,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_YUAN,this._particleData))));0<this._timerLeap&&
!this._toTheLeft&&(this._timerLeap-=a,0>=this._timerLeap&&(this._timerLeap+=0.75*this.getLeapTime()+0.5*Math.random()*this.getLeapTime(),this._jumping=!0,this._velocity.y=-1E3,this._groundY=this.pos.y,this._gravity=2E3,this.playAnimation(this.ANI_JUMP)));this._jumping||(-100>this._display.x._value?this.orient(!1):this._display.x._value>c.constants.ConstantsApp.STAGE_WIDTH+100&&this.orient(!0));this.updatePositionFromVelocity(a);this._jumping&&this.pos.y>this._groundY&&(this._jumping=!1,this._gravity=
this._velocity.y=0,this.playAnimation(this.ANI_RUN,0),this.pos.y=this._groundY)},orient:function(a){this._toTheLeft!=a&&((this._toTheLeft=a)?(this._display.scaleX.set__(-1),this._timerYuan=100):(this._display.scaleX.set__(1),this._timerYuan=4))},__class__:i.elements.animals.FireFerret});i.elements.effects={};i.elements.effects.EffectBasic=function(a){a.type||(a.type=c.constants.ConstantsApp.TYPE_EFFECT);this._frameCount=0;a.frameCount&&(this._frameCount=a.frameCount);this._leaderOffset=new n.WorkinPoint;
a.leader?(this._followTheLeader=!0,this._leader=a.leader,a.leaderOffsetX&&(this._leaderOffset.x=a.leaderOffsetX),a.leaderOffsetY&&(this._leaderOffset.y=a.leaderOffsetY)):this._followTheLeader=!1;this._movieName="";a.effectName&&(this._movieName=a.effectName,this._movieName==c.constants.ConstantsApp.EFFECT_BEND_WATER&&(a.library="flump_enemies"));i.elements.AnimatedElement.call(this,a);this.addAnimation(this.ANI_IN,0,this.getFrameCount());this._renderOffset.to(this.registrationXOffset(),this.registrationYOffset());
this.set_State(0);this._flagScreenlock=!1;a.screenlock&&(this._flagScreenlock=a.screenlock)};j["com.nick.legend_of_korra.republic_city_run.world.elements.effects.EffectBasic"]=i.elements.effects.EffectBasic;i.elements.effects.EffectBasic.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,effects,EffectBasic".split(",");i.elements.effects.EffectBasic.__super__=i.elements.AnimatedElement;i.elements.effects.EffectBasic.prototype=w(i.elements.AnimatedElement.prototype,{getFrameCount:function(){return this._frameCount},
getMovieName:function(){return this._movieName},getLibrary:function(){return"flump_effects"},dispose:function(){i.elements.AnimatedElement.prototype.dispose.call(this);this._leaderOffset=this._leader=null},_doOut:function(){this.doDelete=!0},_doIdle:function(){this._flagLifespan?this.playAnimation(this.ANI_IDLE):this.playAnimation(this.ANI_IDLE,1)},_doIn:function(){this.playAnimation("in",1)},set_State:function(a){this._state=a;switch(this._state){case 0:this._doIn();break;case 1:this._doIdle();break;
case 2:this._doOut()}},_onAnimationComplete:function(){switch(this._state){case 0:this._movieName==c.constants.ConstantsApp.EFFECT_BEND_EARTH?this._doIn():this._doOut();break;case 1:this._flagLifespan||this.set_State(2);break;case 2:this.doDelete=!0}},_doMotion:function(a){this._followTheLeader?(this.pos.x=this._leader.registrationPos.x+this._leaderOffset.x,this.pos.y=this._leader.registrationPos.y+this._leaderOffset.y):this.updatePositionFromVelocity(a)},renderPosition:function(a){this._flagScreenlock?
(this._display.x.set__(c.constants.ConstantsApp.STAGE_CENTER_X-this.tileWidth/2),this._display.y.set__(c.constants.ConstantsApp.STAGE_CENTER_Y-this.tileHeight/2)):i.elements.AnimatedElement.prototype.renderPosition.call(this,a)},update:function(a){i.elements.AnimatedElement.prototype.update.call(this,a);this._doMotion(a)},_onShieldDown:function(){this.doDelete=!0},_removeEventListeners:function(){i.elements.AnimatedElement.prototype._removeEventListeners.call(this);this._movieName==c.constants.ConstantsApp.EFFECT_BEND_EARTH&&
d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SHIELD_DOWN,v(this,this._onShieldDown))},_addEventListeners:function(){i.elements.AnimatedElement.prototype._addEventListeners.call(this);this._movieName==c.constants.ConstantsApp.EFFECT_BEND_EARTH&&d.WorkinCloud.instance.get_dispatcher().addEventListener(c.constants.ConstantsApp.EVENT_SHIELD_DOWN,v(this,this._onShieldDown))},__class__:i.elements.effects.EffectBasic});i.elements.enemies={};i.elements.enemies.Enemy=
function(a){a.type=c.constants.ConstantsApp.TYPE_ENEMY;this._particleData=[];this._particleData.type=c.constants.ConstantsApp.PARTICLE_EQUALIZER;i.elements.AnimatedElement.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.Enemy"]=i.elements.enemies.Enemy;i.elements.enemies.Enemy.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,Enemy".split(",");i.elements.enemies.Enemy.__super__=i.elements.AnimatedElement;i.elements.enemies.Enemy.prototype=
w(i.elements.AnimatedElement.prototype,{getMaxDurability:function(){return 1},damageOnCollision:function(){return 1},doPoolOnDelete:function(){return!0},dispose:function(){i.elements.AnimatedElement.prototype.dispose.call(this);this._particleData=null},update:function(a){i.elements.AnimatedElement.prototype.update.call(this,a);this.updatePositionFromVelocity(a)},doCollision:function(){},setFinalState:function(a){null==a&&(a="");switch(a){case c.constants.ConstantsApp.ELEMENT_AIR:this.playAnimation(this.ANI_IDLE_EARTH,
0);this.doDelete=!0;this._particleData.x=this.pos.x+this.registrationXOffset();this._particleData.y=this.pos.y+this.registrationYOffset();d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData));break;case c.constants.ConstantsApp.ELEMENT_EARTH:this.playAnimation(this.ANI_IDLE_EARTH,0);break;case c.constants.ConstantsApp.ELEMENT_FIRE:this.playAnimation(this.ANI_IDLE_FIRE,0);break;case c.constants.ConstantsApp.ELEMENT_WATER:this.playAnimation(this.ANI_IDLE_WATER,
0)}c.constants.ConstantsApp.playEqualizerGrunt();this._durability=0;this._velocity.x=0},revive:function(a,b){null==b&&(b=!0);this._flagPooled=!1;this._durability=this.getMaxDurability();a.type=c.constants.ConstantsApp.TYPE_ENEMY;i.elements.AnimatedElement.prototype.revive.call(this,a);b&&this._display.setAnchor(this.registrationXOffset(),this.registrationYOffset());this._particleData=[];this._particleData.type=c.constants.ConstantsApp.PARTICLE_EQUALIZER},__class__:i.elements.enemies.Enemy});i.elements.enemies.EnemyBiker=
function(a){i.elements.enemies.Enemy.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.EnemyBiker"]=i.elements.enemies.EnemyBiker;i.elements.enemies.EnemyBiker.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,EnemyBiker".split(",");i.elements.enemies.EnemyBiker.__super__=i.elements.enemies.Enemy;i.elements.enemies.EnemyBiker.prototype=w(i.elements.enemies.Enemy.prototype,{getMaxDurability:function(){return 2},getEmitTime:function(){return 0.05},
dispose:function(){i.elements.enemies.Enemy.prototype.dispose.call(this);this._smokeData=null},setFinalState:function(){var a={x:this.registrationPos.x,y:this.registrationPos.y,scale:2,layer:c.constants.ConstantsApp.LAYER_MAIN,effectName:c.constants.ConstantsApp.EFFECT_IMPACT_FIRE};d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_EFFECT,a));a={x:this.registrationPos.x,y:this.registrationPos.y,scale:1,layer:c.constants.ConstantsApp.LAYER_MAIN,
type:c.constants.ConstantsApp.PARTICLE_EQUALIZER};d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,a));c.constants.ConstantsApp.playEqualizerGrunt();d.WorkinCloud.instance.get_sound().playSound("audio/explode");this._flagPooled=!0;this._durability=0;this._velocity.x=0;this._display.set_visible(!1)},update:function(a){i.elements.enemies.Enemy.prototype.update.call(this,a);0<this._timerEmit&&(this._timerEmit-=a,0>=this._timerEmit&&
(this._timerEmit+=0.75*this.getEmitTime()+0.5*Math.random()*this.getEmitTime(),this._smokeData.x=this.registrationPos.x-5,this._smokeData.y=this.registrationPos.y-10,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._smokeData))))},revive:function(a,b){null==b&&(b=!0);a.library="flump_enemies";a.movie="biker";i.elements.enemies.Enemy.prototype.revive.call(this,a,b);a.firstTime?this.addAnimation(this.ANI_RUN,0,0):(this._smokeData=
[],this._smokeData.type=c.constants.ConstantsApp.PARTICLE_SMOKE,this.playAnimation(this.ANI_RUN,0),this._timerEmit=this.getEmitTime(),this._velocity.x=-300,this._collisionDimensions.x=80,this._collisionDimensions.y=100,this.pos.y-=0.4*this._collisionDimensions.y,d.WorkinCloud.instance.get_sound().playSound("audio/biker"),this._display.set_visible(!0))},__class__:i.elements.enemies.EnemyBiker});i.elements.enemies.EnemyCrate=function(a){i.elements.enemies.Enemy.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.EnemyCrate"]=
i.elements.enemies.EnemyCrate;i.elements.enemies.EnemyCrate.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,EnemyCrate".split(",");i.elements.enemies.EnemyCrate.__super__=i.elements.enemies.Enemy;i.elements.enemies.EnemyCrate.prototype=w(i.elements.enemies.Enemy.prototype,{damageOnCollision:function(){return 0},doPoolOnDelete:function(){return!0},setFinalState:function(){for(var a=0,b=c.constants.ConstantsApp.OPTION_STRESS_TEST?20:5;a<b;){var g={x:this.registrationPos.x,
y:this.registrationPos.y,scale:1,vx:200+r.random(200),vy:-400+-r.random(200),layer:c.constants.ConstantsApp.LAYER_MAIN,type:c.constants.ConstantsApp.PARTICLE_CABBAGE};d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,g));a++}this._flagPooled=!0;d.WorkinCloud.instance.get_sound().playSound("audio/cabbage_crate");this._durability=0;this._display.set_visible(!1)},doCollision:function(){this.setFinalState()},revive:function(a,b){null==
b&&(b=!0);a.library="flump_enemies";a.movie="cabbage_crate";i.elements.enemies.Enemy.prototype.revive.call(this,a,b);a.firstTime?(this.addAnimation(this.ANI_IDLE,0,0),this.addAnimation(this.ANI_RUN,1,1)):(0.5>Math.random()?this.playAnimation(this.ANI_IDLE,0):this.playAnimation(this.ANI_RUN,0),this._velocity.x=0,this._collisionDimensions.x=90,this._collisionDimensions.y=85,this.pos.y-=0.25*this._collisionDimensions.y,this._display.set_visible(!0))},__class__:i.elements.enemies.EnemyCrate});i.elements.enemies.EnemyHanger=
function(a){i.elements.enemies.Enemy.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.EnemyHanger"]=i.elements.enemies.EnemyHanger;i.elements.enemies.EnemyHanger.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,EnemyHanger".split(",");i.elements.enemies.EnemyHanger.__super__=i.elements.enemies.Enemy;i.elements.enemies.EnemyHanger.prototype=w(i.elements.enemies.Enemy.prototype,{update:function(a){i.elements.enemies.Enemy.prototype.update.call(this,
a);this._sinDisplay+=5*a;this.pos.y+=2*Math.sin(this._sinDisplay);this.updateRegistrationPos()},setFinalState:function(a){null==a&&(a="");switch(a){case c.constants.ConstantsApp.ELEMENT_AIR:this.playAnimation(this.ANI_IDLE_AIR,0);this._particleData.x=this.registrationPos.x;this._particleData.y=this.registrationPos.y;d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData));break;case c.constants.ConstantsApp.ELEMENT_EARTH:this.playAnimation(this.ANI_IDLE_EARTH,
0);break;case c.constants.ConstantsApp.ELEMENT_FIRE:this.playAnimation(this.ANI_IDLE_FIRE,0);break;case c.constants.ConstantsApp.ELEMENT_WATER:this.playAnimation(this.ANI_IDLE_WATER,0)}c.constants.ConstantsApp.playEqualizerGrunt();this._durability=0},revive:function(a,b){null==b&&(b=!0);a.library="flump_enemies";a.movie="chiblocker_hanger";i.elements.enemies.Enemy.prototype.revive.call(this,a,b);a.firstTime?(this.addAnimation(this.ANI_IDLE,0,0),this.addAnimation(this.ANI_IDLE_FIRE,1,1),this.addAnimation(this.ANI_IDLE_WATER,
2,2),this.addAnimation(this.ANI_IDLE_EARTH,3,3),this.addAnimation(this.ANI_IDLE_AIR,4,4)):(this.playAnimation(this.ANI_IDLE,0),this._velocity.x=-150,this._collisionDimensions.x=80,this._collisionDimensions.y=120,this._collisionOffset.x=0,this._collisionOffset.y=0,this.pos.y-=0.25*c.constants.ConstantsApp.STAGE_HEIGHT+0.25*Math.random()*c.constants.ConstantsApp.STAGE_HEIGHT,this.updateRegistrationPos(),this._sinDisplay=Math.random()*Math.PI)},__class__:i.elements.enemies.EnemyHanger});i.elements.enemies.EnemyMecha=
function(a){i.elements.enemies.Enemy.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.EnemyMecha"]=i.elements.enemies.EnemyMecha;i.elements.enemies.EnemyMecha.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,EnemyMecha".split(",");i.elements.enemies.EnemyMecha.__super__=i.elements.enemies.Enemy;i.elements.enemies.EnemyMecha.prototype=w(i.elements.enemies.Enemy.prototype,{getMaxDurability:function(){return 5},damageOnCollision:function(){return 3},
getFireTime:function(){return 2},dispose:function(){i.elements.enemies.Enemy.prototype.dispose.call(this);this._projectileData=[]},setFinalState:function(){var a={x:this.registrationPos.x,y:this.registrationPos.y,scale:2,layer:c.constants.ConstantsApp.LAYER_MAIN,effectName:c.constants.ConstantsApp.EFFECT_IMPACT_FIRE};d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_EFFECT,a));d.WorkinCloud.instance.get_sound().playSound("audio/explode");
this._flagPooled=!0;this._durability=0;this._velocity.x=0;this._display.set_visible(!1)},_onAnimationComplete:function(a){a==this.ANI_ATTACK?(this.playAnimation(this.ANI_ATTACK_OUT,1),this._projectileData.x=this.registrationPos.x-110,this._projectileData.y=this.registrationPos.y-20,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PROJECTILE,this._projectileData)),this._projectileData.x=this.registrationPos.x+60,this._projectileData.y=this.registrationPos.y+
10,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PROJECTILE,this._projectileData))):a==this.ANI_ATTACK_OUT&&this.playAnimation(this.ANI_RUN,0)},update:function(a){i.elements.enemies.Enemy.prototype.update.call(this,a);0<this._timerFire&&(this._timerFire-=a,0>=this._timerFire&&(this._timerFire+=0.75*this.getFireTime()+0.5*Math.random()*this.getFireTime(),this.playAnimation(this.ANI_ATTACK,1)))},revive:function(a,b){null==b&&(b=!0);a.library=
"flump_enemies";a.movie="mecha_tank";a.layer=c.constants.ConstantsApp.LAYER_PLAYER_BELOW;i.elements.enemies.Enemy.prototype.revive.call(this,a,b);a.firstTime?(this.addAnimation(this.ANI_RUN,0,5),this.addAnimation(this.ANI_ATTACK,6,12),this.addAnimation(this.ANI_ATTACK_OUT,13,25)):(this.playAnimation(this.ANI_RUN,0),this._timerFire=3,this._velocity.x=200,this._projectileData=[],this._collisionDimensions.x=160,this._collisionDimensions.y=230,this.pos.y-=0.35*this._collisionDimensions.y,d.WorkinCloud.instance.get_sound().playSound("audio/mecha"),
this._display.set_visible(!0))},__class__:i.elements.enemies.EnemyMecha});i.elements.enemies.EnemyRunner=function(a){i.elements.enemies.Enemy.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.enemies.EnemyRunner"]=i.elements.enemies.EnemyRunner;i.elements.enemies.EnemyRunner.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,enemies,EnemyRunner".split(",");i.elements.enemies.EnemyRunner.__super__=i.elements.enemies.Enemy;i.elements.enemies.EnemyRunner.prototype=
w(i.elements.enemies.Enemy.prototype,{setFinalState:function(a){null==a&&(a="");switch(a){case c.constants.ConstantsApp.ELEMENT_AIR:this.playAnimation(this.ANI_IDLE_EARTH,0);this._flagPooled=!0;this._display.set_visible(!1);this._particleData.x=this.registrationPos.x;this._particleData.y=this.registrationPos.y;d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData));break;case c.constants.ConstantsApp.ELEMENT_EARTH:this.playAnimation(this.ANI_IDLE_EARTH,
0);break;case c.constants.ConstantsApp.ELEMENT_FIRE:this.playAnimation(this.ANI_IDLE_FIRE,0);break;case c.constants.ConstantsApp.ELEMENT_WATER:this.playAnimation(this.ANI_IDLE_WATER,0)}c.constants.ConstantsApp.playEqualizerGrunt();this._durability=0;this._velocity.x=0},revive:function(a,b){null==b&&(b=!0);a.library="flump_enemies";a.movie="chiblocker";i.elements.enemies.Enemy.prototype.revive.call(this,a,b);a.firstTime?(this.addAnimation(this.ANI_RUN,0,16),this.addAnimation(this.ANI_IDLE_FIRE,17,
17),this.addAnimation(this.ANI_IDLE_EARTH,18,18),this.addAnimation(this.ANI_IDLE_WATER,19,19)):(this.playAnimation(this.ANI_RUN,0),this._velocity.x=-150,this._collisionDimensions.x=55,this._collisionDimensions.y=90,this._collisionOffset.x=0,this._collisionOffset.y=0,this.pos.y+=-50,this.setValue("sx",-1,null),this._display.set_visible(!0))},__class__:i.elements.enemies.EnemyRunner});i.elements.particles={};i.elements.particles.Particle=function(a){this.revive(a,!1);i.elements.Element.call(this,a);
this._display.setAnchor(this.registrationXOffset(),this.registrationYOffset());this.checkLocal(a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.particles.Particle"]=i.elements.particles.Particle;i.elements.particles.Particle.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,particles,Particle".split(",");i.elements.particles.Particle.__super__=i.elements.Element;i.elements.particles.Particle.prototype=w(i.elements.Element.prototype,{registrationYOffset:function(){return 0.5*
this._display.getNaturalHeight()},registrationXOffset:function(){return 0.5*this._display.getNaturalWidth()},doPoolOnDelete:function(){return!0},dispose:function(){i.elements.Element.prototype.dispose.call(this);this._localTextPart=this._cameraOffset=null},update:function(a){0!=this._fadeRate&&0!=this._alpha&&(this._alpha-=this._fadeRate*a,0>=this._alpha&&(this._alpha=0),this.setValue("a",this._alpha,null));0!=this._scaleRate&&(this._scale+=this._scaleRate*a,this.setValue("sx",this._scale,null),this.setValue("sy",
this._scale,null));if(0!=this._rotRate){var b=this._display.rotation;b.set__(b._value+this._rotRate*a)}i.elements.Element.prototype.update.call(this,a);this.updatePositionFromVelocity(a)},renderPosition:function(a){this._followCamera&&(this.pos.x=a.get_pos().x+this._cameraOffset.x,this.pos.y=a.get_pos().y+this._cameraOffset.y);i.elements.Element.prototype.renderPosition.call(this,a)},revive:function(a,b){null==b&&(b=!0);b&&(this._flagPooled=!1);null!=this._localTextPart&&(this._entity.removeChild(this._localTextPart.get_entity()),
this._localTextPart=null);a.type=c.constants.ConstantsApp.TYPE_PARTICLE;a.lifespan||(a.lifespan=1);a.scale||(a.scale=0.75+0.5*Math.random());this._followCamera=!1;a.followCamera&&(this._followCamera=!0,this._cameraOffset=new n.WorkinPoint,a.cameraOffsetX&&(this._cameraOffset.x=a.cameraOffsetX),a.cameraOffsetY&&(this._cameraOffset.y=a.cameraOffsetY));this._alpha=1;this._fadeRate=0;a.fadeRate&&(this._fadeRate=a.fadeRate);this._scale=a.scale;this._scaleRate=0;a.scaleRate&&(this._scaleRate=a.scaleRate);
this._rotRate=0;a.rotRate&&(this._rotRate=a.rotRate);b&&(this.rebuild(a),this._display.setAnchor(this.registrationXOffset(),this.registrationYOffset()));this.checkLocal(a)},disposeDisplay:function(){this._display=null},checkLocal:function(a){a.local&&(this._localTextPart=new y.TextLocalized(0,0,a.local,"Basic",{layer:c.constants.ConstantsApp.LAYER_MAIN_TOP,origin:new n.WorkinPoint(0.5,0.5)}),this._entity.addChild(this._localTextPart.get_entity()))},__class__:i.elements.particles.Particle});i.elements.pickups=
{};i.elements.pickups.Pickup=function(a){a.type=c.constants.ConstantsApp.TYPE_PICKUP;a.layer=c.constants.ConstantsApp.LAYER_PLAYER;a.asset||(a.asset="elements/pickups/"+this.getMovieName());this._bobs=!0;null!=a.bobs&&(this._bobs=a.bobs);i.elements.Element.call(this,a);this._particleData=[];this._particleData.type=this.getEmitParticle();this._timerEmit=this.getEmitTime();this._flagIsCollected=!1;this._sinDisplay=Math.random()*Math.PI;this._collisionDimensions.x=2*this.collisionRadius();this._collisionDimensions.y=
2*this.collisionRadius();this._renderOffset.x=0.5*-this._display.getNaturalWidth();this._renderOffset.y=0.5*-this._display.getNaturalWidth()};j["com.nick.legend_of_korra.republic_city_run.world.elements.pickups.Pickup"]=i.elements.pickups.Pickup;i.elements.pickups.Pickup.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,pickups,Pickup".split(",");i.elements.pickups.Pickup.__super__=i.elements.Element;i.elements.pickups.Pickup.prototype=w(i.elements.Element.prototype,{isCollectable:function(){return!this._flagIsCollected},
collisionRadius:function(){return 35},getPickupSound:function(){return"audio/yuan"},getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_FIRE},getEmitTime:function(){return 0},getMovieName:function(){return"yuan"},dispose:function(){i.elements.Element.prototype.dispose.call(this);this._particleData=null},doCollect:function(){this._flagIsCollected||(this._flagIsCollected=!0,this._onLifespanComplete(),d.WorkinCloud.instance.get_sound().playSound(this.getPickupSound()),d.WorkinCloud.instance.modifyValue(c.constants.ConstantsApp.INT_YUAN,
1))},update:function(a){i.elements.Element.prototype.update.call(this,a);0<this._timerEmit&&(this._timerEmit-=a,0>=this._timerEmit&&(this._timerEmit+=0.75*this.getEmitTime()+0.5*Math.random()*this.getEmitTime(),this._particleData.x=this.registrationPos.x,this._particleData.y=this.registrationPos.y,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData))));this._bobs&&0<a&&(this._sinDisplay+=5*a,this.pos.y+=2*Math.sin(this._sinDisplay));
this.updateRegistrationPos();this.updatePositionFromVelocity(a)},__class__:i.elements.pickups.Pickup});i.elements.pickups.PickupChi=function(a){i.elements.pickups.Pickup.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.pickups.PickupChi"]=i.elements.pickups.PickupChi;i.elements.pickups.PickupChi.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,pickups,PickupChi".split(",");i.elements.pickups.PickupChi.__super__=i.elements.pickups.Pickup;i.elements.pickups.PickupChi.prototype=
w(i.elements.pickups.Pickup.prototype,{getMovieName:function(){return"chi"},getPickupSound:function(){return"audio/yuan"},collisionRadius:function(){return 35},getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_CHI},getEmitTime:function(){return 0.2},doCollect:function(){this._flagIsCollected||(this.doDelete=this._flagIsCollected=!0,d.WorkinCloud.instance.get_sound().playSound(this.getPickupSound()),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(c.constants.ConstantsApp.EVENT_COLLECT_CHI)))},
update:function(a){i.elements.pickups.Pickup.prototype.update.call(this,a)},__class__:i.elements.pickups.PickupChi});i.elements.pickups.PickupToken=function(a){a.pickupID&&(this._pickupID=a.pickupID);this._pickupData=[];this._pickupData.pickupID=this._pickupID;i.elements.pickups.Pickup.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.pickups.PickupToken"]=i.elements.pickups.PickupToken;i.elements.pickups.PickupToken.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,pickups,PickupToken".split(",");
i.elements.pickups.PickupToken.__super__=i.elements.pickups.Pickup;i.elements.pickups.PickupToken.prototype=w(i.elements.pickups.Pickup.prototype,{getMovieName:function(){return"pickup_token"},getPickupSound:function(){return"audio/yuan"},collisionRadius:function(){return 35},getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_SPARKLE_WHITE},getEmitTime:function(){return 0.2},dispose:function(){i.elements.pickups.Pickup.prototype.dispose.call(this);this._pickupData=[]},doCollect:function(){this._flagIsCollected||
(this.doDelete=this._flagIsCollected=!0,d.WorkinCloud.instance.get_sound().playSound(this.getPickupSound()),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_COLLECT_TOKEN,this._pickupData)))},__class__:i.elements.pickups.PickupToken});i.elements.pickups.PickupYuan=function(a){i.elements.pickups.Pickup.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.pickups.PickupYuan"]=i.elements.pickups.PickupYuan;i.elements.pickups.PickupYuan.__name__=
"com,nick,legend_of_korra,republic_city_run,world,elements,pickups,PickupYuan".split(",");i.elements.pickups.PickupYuan.__super__=i.elements.pickups.Pickup;i.elements.pickups.PickupYuan.prototype=w(i.elements.pickups.Pickup.prototype,{isStoppedByGround:function(){return!0},getMovieName:function(){return"yuan"},getPickupSound:function(){return"audio/yuan"},collisionRadius:function(){return 35},doPoolOnDelete:function(){return!0},dispose:function(){i.elements.pickups.Pickup.prototype.dispose.call(this)},
revive:function(a){this._lifespanRemaining=this._lifespanMax=10;this._flagLifespan=0<this._lifespanMax;this._flagIsCollected=this._flagPooled=!1;this._velocity.x=a.vx?a.vx:0;this._velocity.y=a.vy?a.vy:0;a.gravity?(this._gravity=a.gravity,this._bobs=!1):(this._bobs=!0,this._gravity=0);this.pos.x=a.x;this.pos.y=a.y},__class__:i.elements.pickups.PickupYuan});i.elements.projectiles={};i.elements.projectiles.Projectile=function(a){this.USE_ANIMATED_VERSION=!0;a.lifespan=this.getLifespan();a.type||(a.type=
c.constants.ConstantsApp.TYPE_PROJECTILE);this._isMasterStrength=!1;a.isMasterStrength&&(this._isMasterStrength=a.isMasterStrength);this.USE_ANIMATED_VERSION||(a.asset="elements/projectiles/"+this.getMovieName());i.elements.effects.EffectBasic.call(this,a);this._particleData=[];this._particleData.type=this.getEmitParticle();this._timerEmit=this.getEmitTime();this.pos.y-=this._display.getNaturalHeight()/2;this.addAnimation(this.ANI_IDLE,0,this.getFrameCount());this.set_State(1);this._renderOffset.to(this.registrationXOffset(),
this.registrationYOffset());this._display.setScale(this.getScale());this._velocity.x=this.getBaseVelocityX();this._velocity.y=this.getBaseVelocityY();this._collisionDimensions.x=100;this._collisionDimensions.y=100};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.Projectile"]=i.elements.projectiles.Projectile;i.elements.projectiles.Projectile.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,Projectile".split(",");i.elements.projectiles.Projectile.__super__=
i.elements.effects.EffectBasic;i.elements.projectiles.Projectile.prototype=w(i.elements.effects.EffectBasic.prototype,{registrationYOffset:function(){return 0},registrationXOffset:function(){return 0},damageOnCollision:function(){return 1},getElement:function(){return""},getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_FIRE},getEmitTime:function(){return 0.05},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return 500},getLifespan:function(){return 1},getScale:function(){return 1},
dispose:function(){i.elements.effects.EffectBasic.prototype.dispose.call(this);this._particleData=null},onCollision:function(){var a={x:this.registrationPos.x+0.5*this._collisionDimensions.x,y:this.registrationPos.y,scale:2,layer:c.constants.ConstantsApp.LAYER_MAIN};switch(this.getElement()){case c.constants.ConstantsApp.ELEMENT_AIR:a.effectName=c.constants.ConstantsApp.EFFECT_IMPACT_AIR;break;case c.constants.ConstantsApp.ELEMENT_FIRE:a.effectName=c.constants.ConstantsApp.EFFECT_IMPACT_FIRE;break;
case c.constants.ConstantsApp.ELEMENT_WATER:a.effectName=c.constants.ConstantsApp.EFFECT_IMPACT_WATER}this.getElement()!=c.constants.ConstantsApp.ELEMENT_EARTH&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_EFFECT,a));this._isMasterStrength&&this.getElement()==c.constants.ConstantsApp.ELEMENT_FIRE||(this.doDelete=!0)},update:function(a){i.elements.effects.EffectBasic.prototype.update.call(this,a);0<this._timerEmit&&(this._timerEmit-=a,
0>=this._timerEmit&&(this._timerEmit=c.constants.ConstantsApp.OPTION_STRESS_TEST?1.0E-4:this._timerEmit+(0.75*this.getEmitTime()+0.5*Math.random()*this.getEmitTime()),this._particleData.x=this.registrationPos.x,this._particleData.y=this.registrationPos.y,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData)),c.constants.ConstantsApp.OPTION_STRESS_TEST&&(this._particleData.x+=d.WorkinUtils.getRandom(-2,2),this._particleData.y+=
d.WorkinUtils.getRandom(-2,2),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE,this._particleData)))));this.USE_ANIMATED_VERSION||this.updatePositionFromVelocity(a)},__class__:i.elements.projectiles.Projectile});i.elements.projectiles.ProjectileAir=function(a){i.elements.projectiles.Projectile.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.ProjectileAir"]=i.elements.projectiles.ProjectileAir;
i.elements.projectiles.ProjectileAir.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,ProjectileAir".split(",");i.elements.projectiles.ProjectileAir.__super__=i.elements.projectiles.Projectile;i.elements.projectiles.ProjectileAir.prototype=w(i.elements.projectiles.Projectile.prototype,{getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_AIR},getElement:function(){return c.constants.ConstantsApp.ELEMENT_AIR},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return 1200},
getScale:function(){return 1},getFrameCount:function(){return 14},getMovieName:function(){return"air_projectile"},getLibrary:function(){return"flump_effects"},__class__:i.elements.projectiles.ProjectileAir});i.elements.projectiles.ProjectileEarth=function(a){i.elements.projectiles.Projectile.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.ProjectileEarth"]=i.elements.projectiles.ProjectileEarth;i.elements.projectiles.ProjectileEarth.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,ProjectileEarth".split(",");
i.elements.projectiles.ProjectileEarth.__super__=i.elements.projectiles.Projectile;i.elements.projectiles.ProjectileEarth.prototype=w(i.elements.projectiles.Projectile.prototype,{getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_EARTH},getElement:function(){return c.constants.ConstantsApp.ELEMENT_EARTH},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return 1200},getScale:function(){return 1},getFrameCount:function(){return 1},getMovieName:function(){return"earth_projectile"},
getLibrary:function(){return"flump_effects"},__class__:i.elements.projectiles.ProjectileEarth});i.elements.projectiles.ProjectileElectricity=function(a){a.type=c.constants.ConstantsApp.TYPE_ENEMY_PROJECTILE;i.elements.projectiles.Projectile.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.ProjectileElectricity"]=i.elements.projectiles.ProjectileElectricity;i.elements.projectiles.ProjectileElectricity.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,ProjectileElectricity".split(",");
i.elements.projectiles.ProjectileElectricity.__super__=i.elements.projectiles.Projectile;i.elements.projectiles.ProjectileElectricity.prototype=w(i.elements.projectiles.Projectile.prototype,{damageOnCollision:function(){return 1},getElement:function(){return c.constants.ConstantsApp.ELEMENT_FIRE},getEmitParticle:function(){return""},getEmitTime:function(){return 0},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return-500},getScale:function(){return 1},getFrameCount:function(){return 3},
getMovieName:function(){return"electricity_projectile"},getLibrary:function(){return"flump_effects"},__class__:i.elements.projectiles.ProjectileElectricity});i.elements.projectiles.ProjectileFire=function(a){i.elements.projectiles.Projectile.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.ProjectileFire"]=i.elements.projectiles.ProjectileFire;i.elements.projectiles.ProjectileFire.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,ProjectileFire".split(",");
i.elements.projectiles.ProjectileFire.__super__=i.elements.projectiles.Projectile;i.elements.projectiles.ProjectileFire.prototype=w(i.elements.projectiles.Projectile.prototype,{getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_FIRE},getElement:function(){return c.constants.ConstantsApp.ELEMENT_FIRE},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return this._isMasterStrength?1500:1200},getScale:function(){return 1},getFrameCount:function(){return 7},getMovieName:function(){return"fire_projectile"},
getLibrary:function(){return"flump_effects"},__class__:i.elements.projectiles.ProjectileFire});i.elements.projectiles.ProjectileWater=function(a){i.elements.projectiles.Projectile.call(this,a)};j["com.nick.legend_of_korra.republic_city_run.world.elements.projectiles.ProjectileWater"]=i.elements.projectiles.ProjectileWater;i.elements.projectiles.ProjectileWater.__name__="com,nick,legend_of_korra,republic_city_run,world,elements,projectiles,ProjectileWater".split(",");i.elements.projectiles.ProjectileWater.__super__=
i.elements.projectiles.Projectile;i.elements.projectiles.ProjectileWater.prototype=w(i.elements.projectiles.Projectile.prototype,{getEmitParticle:function(){return c.constants.ConstantsApp.PARTICLE_WATER},getElement:function(){return c.constants.ConstantsApp.ELEMENT_WATER},getBaseVelocityY:function(){return 0},getBaseVelocityX:function(){return 1200},getScale:function(){return 1},getFrameCount:function(){return 7},getMovieName:function(){return"water_projectile"},getLibrary:function(){return"flump_effects"},
__class__:i.elements.projectiles.ProjectileWater});D=void 0;P=void 0;l=void 0;f=void 0;e=void 0;ca=void 0;q=void 0;Q=void 0;J=void 0;E=void 0;o=void 0;K=void 0;M=void 0;A=void 0;A=void 0;A=void 0;q={Disposable:function(){}};j["flambe.util.Disposable"]=q.Disposable;q.Disposable.__name__=["flambe","util","Disposable"];q.Disposable.prototype={__class__:q.Disposable};Q=function(){};j["flambe.Component"]=Q;Q.__name__=["flambe","Component"];Q.__interfaces__=[q.Disposable];Q.prototype={init:function(a,b){this.owner=
a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:Q};ba={Updater:function(){this._paused=!1}};j["com.workinman.components.Updater"]=ba.Updater;ba.Updater.__name__=["com","workinman","components","Updater"];ba.Updater.__super__=Q;ba.Updater.prototype=w(Q.prototype,{onUpdate:function(a){this._paused||d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventUpdate(a))},
get_name:function(){return"Updater_2"},__class__:ba.Updater});G={ConstantsCloud:function(){}};j["com.workinman.data.ConstantsCloud"]=G.ConstantsCloud;G.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];G.ConstantsCloud.getIsAndroid=function(){return 0<=x.window.navigator.userAgent.indexOf("Linux; U; Android 4")};G.ConstantsCloud.getIsNabi=function(){if(eval("navigator.isCocoonJS"))return!1;var a=x.window.navigator.userAgent;return-1==a.indexOf("GT-N")&&-1!=a.indexOf("NABI")?!0:!1};
A={EffectDef:function(){}};j["com.workinman.defs.EffectDef"]=A.EffectDef;A.EffectDef.__name__=["com","workinman","defs","EffectDef"];A.EffectDef.prototype={isActive:function(){return 0>=this.delay&&0<this.dur},get_wasActive:function(){return this._flagWasActive},get_durDefault:function(){return this._durDefault},update:function(a){this._flagWasActive=this.isActive();0>this.dur||(0<this.delay?this.delay-=a:this.dur-=a)},__class__:A.EffectDef};y={};y.Element=function(a){this._entity=new P;this._display=
new l.Sprite;this._entity.add(this._display);this._textureEntity=new P;this._entity.addChild(this._textureEntity);this._texture=new l.Sprite;this._textureEntity.add(this._texture);this._dispatcher=new d.WMEventDispatcher;this._pos=new n.WorkinPoint;this._velocity=new n.WorkinPoint;this._renderOffset=new n.WorkinPoint;this._renderOrigin=new n.WorkinPoint;this._render=new y.Renderable;this._layer=this._assetId="";this._doDelete=!1;a.asset&&(this._assetId=a.asset,this.setTexture(this._assetId));a.layer&&
(this._layer=a.layer);a.x&&(this._pos.x=a.x);a.y&&(this._pos.y=a.y);a.rot&&(this._render.rotation=a.rot);a.origin&&this.setOrigin(a.origin);this._addEventListeners()};j["com.workinman.display.Element"]=y.Element;y.Element.__name__=["com","workinman","display","Element"];y.Element.prototype={_removeEventListeners:function(){},_addEventListeners:function(){},setOrigin:function(a){this._renderOrigin.toPoint(a);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*
this._render.height))},applyRenderable:function(){this._display.x.set__(this._render.x);this._display.y.set__(this._render.y);this._display.scaleX.set__(this._render.scaleX);this._display.scaleY.set__(this._render.scaleY);this._display.rotation.set__(this._render.rotation);this._display.alpha.set__(this._render.alpha);this._display.set_visible(this._render.visible)},renderPositionWithoutCamera:function(){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;
this.applyRenderable()},update:function(){},swapTexture:function(a){this._textureEntity.remove(this._texture);this._texture.dispose();this._texture=a;this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));this._textureEntity.add(this._texture)},setTexture:function(a){!1==d.WorkinCloud.instance.get_assets().hasAsset(a)?
d.WorkinCloud.instance.log("[Element](setTexture) No asset named "+a+" exists!"):(this._textureEntity.remove(this._texture),this._texture.dispose(),this._texture=new l.ImageSprite(d.WorkinCloud.instance.get_assets().getTexture(a)),this._render.width=this._texture.getNaturalWidth(),this._render.height=this._texture.getNaturalHeight(),this._texture.x.set__(-(this._renderOrigin.x*this._render.width)),this._texture.y.set__(-(this._renderOrigin.y*this._render.height)),this._textureEntity.add(this._texture))},
get_entity:function(){return this._entity},get_display:function(){return this._display},get_renderable:function(){return this._render},dispose:function(){this._removeEventListeners();this._dispatcher.dispose();this._dispatcher=null;this._entity.dispose();this._velocity=this._pos=this._entity=null;this._texture.dispose();this._display=this._texture=null;this._textureEntity.dispose();this._renderOrigin=this._renderOffset=this._render=this._textureEntity=null},__class__:y.Element};y.Renderable=function(a,
b){null==b&&(b=1);null==a&&(a=1);this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.width=a;this.height=b;this.alpha=1;this.visible=!0};j["com.workinman.display.Renderable"]=y.Renderable;y.Renderable.__name__=["com","workinman","display","Renderable"];y.Renderable.prototype={__class__:y.Renderable};y.TextBase=function(a,b,g,c,e){null==c&&(c="");null==e&&(e={});e.x=a;e.y=b;y.Element.call(this,e);""==c&&(c=G.ConstantsCloud.FONT_DEFAULT);this._textString=g;this._fontName=c;this._spacing=e.spacing?
e.spacing:0;this._width=e.width?e.width:Math.POSITIVE_INFINITY;this._flagCenter=e.center?e.center:!1;this._textDisplay=[];this._textDisplay.push(new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont(this._fontName),""));this.swapTexture(this._textDisplay[0]);this._textDisplay[0].set_pointerEnabled(!1);this.renderPositionWithoutCamera()};j["com.workinman.display.TextBase"]=y.TextBase;y.TextBase.__name__=["com","workinman","display","TextBase"];y.TextBase.__super__=y.Element;y.TextBase.prototype=
w(y.Element.prototype,{_cleanUp:function(){for(;1<this._textDisplay.length;)this._textureEntity.removeChild(this._textDisplay.pop().get_entity())},_renderTextToDisplay:function(){this._textDisplay[0].set_text(this._textString)},_renderFontToDisplay:function(){for(var a=0,b=this._textDisplay;a<b.length;){var g=b[a];++a;g.set_font(d.WorkinCloud.instance.get_assets().getFont(this._fontName))}},set_text:function(a){this._textString=a;this._updateTextDisplay(this._textString);this._renderTextToDisplay();
return this._textString},set_font:function(a){if(""==a)return"";this._fontName=a;this._renderFontToDisplay();return this._fontName},_updateTextDisplay:function(a){this._cleanUp();if(""==a)this._textDisplay[0].set_text(a);else{for(var b=[],g=this._textDisplay[0]._font.getGlyphs(a),c=0,e=0,f=0;e<g.length;){var h=g[e];e++;c=e==g.length?c+h.width:c+(h.xAdvance+h.getKerning(g[e].charCode));c>=this._width&&(c=!0,h=a.lastIndexOf(" ",e),-1==h&&(c=!1,h=e-1),b.push(a.substring(f,h)+(c?"":"-")),f=h,c=0);e==
g.length&&b.push(a.substring(f,e))}this._textDisplay[0].set_text(b.shift());this._texture.x.set__(-(this._renderOrigin.x*this._textDisplay[0].getNaturalWidth()));this._texture.y.set__(-(this._renderOrigin.y*this._textDisplay[0].getNaturalHeight()));for(a=0;a<b.length;)g=b[a],++a,this._textDisplay.push(new l.TextSprite(d.WorkinCloud.instance.get_assets().getFont(this._fontName),g)),this.addTextDisplay(this._textDisplay[this._textDisplay.length-1])}},addTextDisplay:function(a){this._flagCenter&&a.x.set__(this._renderOrigin.x*
(this._texture.getNaturalWidth()-a.getNaturalWidth()));a.y.set__(this._render.height+a.getNaturalHeight()+this._spacing);this._render.height+=a.getNaturalHeight()+this._spacing;this._render.width=Math.max(this._render.width,a.getNaturalWidth());this._textureEntity.addChild((new P).add(a))},__class__:y.TextBase});y.TextLocalized=function(a,b,g,c,d){null==c&&(c="");y.TextBase.call(this,a,b,g,c,d);this._renderTextToDisplay()};j["com.workinman.display.TextLocalized"]=y.TextLocalized;y.TextLocalized.__name__=
["com","workinman","display","TextLocalized"];y.TextLocalized.__super__=y.TextBase;y.TextLocalized.prototype=w(y.TextBase.prototype,{setOrigin:function(a){this._renderOrigin.toPoint(a);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},_renderTextToDisplay:function(){var a=d.WorkinCloud.instance.get_localize().getData(this._textString);this._renderOffset.x=a.get_offsetX();this._renderOffset.y=a.get_offsetY();this._render.scaleX=
a.get_scale();this._render.scaleY=a.get_scale();d.WorkinCloud.instance.log("[TextLocalized] "+this._textString+" ~ "+a.get_scale());a.get_fontName()!=this._fontName&&this.set_font(a.get_fontName());this._updateTextDisplay(d.WorkinCloud.instance.get_localize().getData(this._textString).get_string());1==this._textDisplay.length&&(this._render.width=this._textDisplay[0].getNaturalWidth(),this._render.height=this._textDisplay[0].getNaturalHeight());this._flagCenter||this.setOrigin(this._renderOrigin);
this.renderPositionWithoutCamera()},__class__:y.TextLocalized});y.Viewport=function(a){this._timeline=a;this._layers=new B.StringMap};j["com.workinman.display.Viewport"]=y.Viewport;y.Viewport.__name__=["com","workinman","display","Viewport"];y.Viewport.prototype={removeChild:function(a){null!=a&&this._layers.exists(a.layer)&&this._layers.get(a.layer).removeChild(a.get_entity())},addChild:function(a){null!=a&&this._layers.exists(a.layer)&&this._layers.get(a.layer).addChild(a.get_entity())},getLayer:function(a){return this._layers.get(a)},
addLayer:function(a){var b=new P;this._timeline.addChild(b);this._layers.set(a,b)},__class__:y.Viewport};m={WMEvent:function(a){this._eventId=a}};j["com.workinman.events.WMEvent"]=m.WMEvent;m.WMEvent.__name__=["com","workinman","events","WMEvent"];m.WMEvent.prototype={get_eventId:function(){return this._eventId},__class__:m.WMEvent};m.WMEventData=function(a,b){m.WMEvent.call(this,a);this._data=b};j["com.workinman.events.WMEventData"]=m.WMEventData;m.WMEventData.__name__=["com","workinman","events",
"WMEventData"];m.WMEventData.__super__=m.WMEvent;m.WMEventData.prototype=w(m.WMEvent.prototype,{get_data:function(){return this._data},__class__:m.WMEventData});m.WMEventFlow=function(a,b){null==b&&(b=!1);this.flowId=a;this.targetScreen=b;m.WMEvent.call(this,m.WMEventFlow.EVENT_FLOW)};j["com.workinman.events.WMEventFlow"]=m.WMEventFlow;m.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];m.WMEventFlow.__super__=m.WMEvent;m.WMEventFlow.prototype=w(m.WMEvent.prototype,{__class__:m.WMEventFlow});
m.WMEventInput=function(a,b,g,c,d){null==d&&(d=0);m.WMEvent.call(this,m.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=g;this.y=c;this.swipe=d};j["com.workinman.events.WMEventInput"]=m.WMEventInput;m.WMEventInput.__name__=["com","workinman","events","WMEventInput"];m.WMEventInput.__super__=m.WMEvent;m.WMEventInput.prototype=w(m.WMEvent.prototype,{__class__:m.WMEventInput});m.WMEventInterfaceChange=function(a,b,g){null==b&&(b="");this.flowId=a;this.screenId=b;null==g&&(g=new B.StringMap);
this.customData=g;m.WMEvent.call(this,m.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT)};j["com.workinman.events.WMEventInterfaceChange"]=m.WMEventInterfaceChange;m.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];m.WMEventInterfaceChange.__super__=m.WMEvent;m.WMEventInterfaceChange.prototype=w(m.WMEvent.prototype,{__class__:m.WMEventInterfaceChange});m.WMEventScreenOut=function(a,b){this.flowId=a;this.screenId=b;m.WMEvent.call(this,m.WMEventScreenOut.EVENT_SCREEN_OUTPUT)};
j["com.workinman.events.WMEventScreenOut"]=m.WMEventScreenOut;m.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];m.WMEventScreenOut.__super__=m.WMEvent;m.WMEventScreenOut.prototype=w(m.WMEvent.prototype,{__class__:m.WMEventScreenOut});m.WMEventUpdate=function(a){m.WMEvent.call(this,m.WMEventUpdate.EVENT_UPDATE);this._dt=a};j["com.workinman.events.WMEventUpdate"]=m.WMEventUpdate;m.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];m.WMEventUpdate.__super__=
m.WMEvent;m.WMEventUpdate.prototype=w(m.WMEvent.prototype,{get_dt:function(){return this._dt},__class__:m.WMEventUpdate});n={};n.WorkinCamera=function(a,b){this._screenCenterX=a;this._screenCenterY=b;this._pos=new n.WorkinPoint(a,b)};j["com.workinman.math.WorkinCamera"]=n.WorkinCamera;n.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];n.WorkinCamera.prototype={get_screenCenterY:function(){return this._screenCenterY},get_screenCenterX:function(){return this._screenCenterX},get_pos:function(){return this._pos},
__class__:n.WorkinCamera};n.WorkinLine=function(a,b){this._p0=null==a?new n.WorkinPoint:a.copy();this._p1=null==b?new n.WorkinPoint:b.copy();this._calcProperties()};j["com.workinman.math.WorkinLine"]=n.WorkinLine;n.WorkinLine.__name__=["com","workinman","math","WorkinLine"];n.WorkinLine.prototype={_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector=new n.WorkinPoint(this.get_p1().x-
this.get_p0().x,this.get_p1().y-this.get_p0().y);this._slope=this._vector.y/this._vector.x;0==this.get_vector().x&&(this._slope=1E5);this._yIntercept=this.get_p0().y-this._slope*this.get_p0().x;this._parametricDenom=new n.WorkinPoint(this.get_p1().x-this.get_p0().x,this.get_p1().y-this.get_p0().y);this._normal=this._vector.pseudoCross();this._normal.normalize()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},
to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties()},copy:function(){return new n.WorkinLine(this._p0,this._p1)},get_vector:function(){return this._vector},get_p1:function(){return this._p1},get_p0:function(){return this._p0},dispose:function(){this._parametricDenom=this._vector=this._normal=this._p1=this._p0=null},__class__:n.WorkinLine};n.WorkinMath=function(){};j["com.workinman.math.WorkinMath"]=n.WorkinMath;n.WorkinMath.__name__=["com","workinman","math","WorkinMath"];
n.WorkinMath.diffBetweenPoints=function(a,b){return new n.WorkinPoint(b.x-a.x,b.y-a.y)};n.WorkinMotion=function(a,b,g,c,d,e){null==e&&(e="");null==d&&(d="");null==c&&(c=0);null==g&&(g=0);null==a&&(a=new n.WorkinPoint);this._vel=new n.WorkinPoint;this._pos=a.copy();this._progress=0;this._dest=null;this._rate=g;this._delay=c;this._type="";this._ease=""==d?n.WorkinMotion.EASE_IN_OUT:d;""!=e&&(this._type=e);this.complete=!1;null!=b&&(this._dest=b.copy(),this._makeVel(),this._calculateTween())};j["com.workinman.math.WorkinMotion"]=
n.WorkinMotion;n.WorkinMotion.__name__=["com","workinman","math","WorkinMotion"];n.WorkinMotion.prototype={dispose:function(){this._start=this._vectorTween=this._dest=this._pos=this._vel=null;this.complete=!0},_updatePosFromVel:function(a){this._pos.x+=this._vel.x*a;this._pos.y+=this._vel.y*a},_formulaEase:function(a,b,g,c){switch(this._ease){case n.WorkinMotion.EASE_IN_OUT:return 1>(a/=c/2)?g/2*a*a+b:-g/2*(--a*(a-2)-1)+b;case n.WorkinMotion.EASE_IN:return g*(a/=c)*a+b;case n.WorkinMotion.EASE_IN_FAST:return g*
(a/=c)*a+b;case n.WorkinMotion.EASE_OUT:return-g*(a/=c)*(a-2)+b;case n.WorkinMotion.EASE_OUT_FAST:return a==c?b+g:g*(-Math.pow(2,-10*a/c)+1)+b;case n.WorkinMotion.EASE_BOUNCE_IN:return(a/=c)<1/2.75?g*7.5625*a*a+b:a<2/2.75?g*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?g*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:g*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}return g*a/c+b},update:function(a){0<this._delay?this._delay-=a:null!=this._dest?(0==this._rate?this._pos.toPoint(this._dest):this._progress>=this._rate?this._pos.toPoint(this._dest):
(this._progress+=a,this._progress>this._rate&&(this._progress=this._rate),this._pos.x=this._formulaEase(this._progress,this._start.x,this._vectorTween.x,this._rate),this._pos.y=this._formulaEase(this._progress,this._start.y,this._vectorTween.y,this._rate)),this._progress>=this._rate&&(this.complete=!0)):this._updatePosFromVel(a)},isReady:function(){return 0>=this._delay},_makeVel:function(){this._vel.to(this._rate,0);this._vel.rotateTo(this._pos.getAngleBetween(this._dest))},setStartFast:function(a,
b){this.get_pos().x=a;this.get_pos().y=b;this._calculateTween()},setStart:function(a){this.set_pos(a.copy());this._calculateTween()},get_type:function(){return this._type},set_pos:function(a){this._pos.toPoint(a);1<=this._rate&&this._makeVel();this._calculateTween();return this._pos},get_pos:function(){return this._pos},_calculateTween:function(){this._progress=0;this._start=this._pos.copy();this._vectorTween=new n.WorkinPoint(this._dest.x-this._start.x,this._dest.y-this._start.y)},__class__:n.WorkinMotion};
n.WorkinPoint=function(a,b,g){null==g&&(g=0);null==b&&(b=0);null==a&&(a=0);this.x=Math.round(1E3*a)/1E3;this.y=Math.round(1E3*b)/1E3;this.z=Math.round(1E3*g)/1E3;this.calculateLength()};j["com.workinman.math.WorkinPoint"]=n.WorkinPoint;n.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];n.WorkinPoint.prototype={getAngleBetween:function(a){return 0==a.get_length()||0==this.get_length()?0:180/Math.PI*Math.acos((a.x*this.x+a.y*this.y)/(a.get_length()*this.get_length()))},rotateTo:function(a){this.rotate(a-
this.get_angle())},rotate:function(a){var a=a*(Math.PI/180),b=this.x*Math.cos(a)-this.y*Math.sin(a),a=this.y*Math.cos(a)+this.x*Math.sin(a);this.x=b;this.y=a},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pseudoCross:function(){return new n.WorkinPoint(this.y,-this.x,this.z)},normalize:function(){0!=this._length&&(this.x/=this._length,this.y/=this._length,this.z/=this._length,this.calculateLength())},get_length:function(){return this._length},copy:function(){return new n.WorkinPoint(this.x,
this.y,this.z)},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength()},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength()},to:function(a,b,g){null==g&&(g=0);this.x=a;this.y=b;this.z=g;this.calculateLength()},get_angle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},__class__:n.WorkinPoint};S={WMSharedObject:function(){d.WMEventDispatcher.call(this);this._data={};this.sharedKey=""}};j["com.workinman.net.WMSharedObject"]=S.WMSharedObject;
S.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];S.WMSharedObject.getLocalStorage=function(){return x.window.localStorage};S.WMSharedObject.getLocal=function(a,b){var g=x.window.location.href;null==b&&(b=g);g=new S.WMSharedObject;g.sharedKey=b+":"+a;var c=S.WMSharedObject.getLocalStorage().getItem(g.sharedKey);g.set_data(""==c||null==c?{}:T.run(c));return g};S.WMSharedObject.__super__=d.WMEventDispatcher;S.WMSharedObject.prototype=w(d.WMEventDispatcher.prototype,{flush:function(){var a=
W.run(this.get_data());S.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return S.SharedObjectFlushedStatus.FLUSHED},set_data:function(a){return this._data=a},get_data:function(){return this._data},dispose:function(){this._data=null;d.WMEventDispatcher.prototype.dispose.call(this)},__class__:S.WMSharedObject});S.SharedObjectFlushedStatus=function(){};j["com.workinman.net.SharedObjectFlushedStatus"]=S.SharedObjectFlushedStatus;S.SharedObjectFlushedStatus.__name__=["com","workinman","net",
"SharedObjectFlushedStatus"];u={ServiceAnalytics:function(){}};j["com.workinman.services.ServiceAnalytics"]=u.ServiceAnalytics;u.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];u.ServiceAnalytics.onAnalyticsLoad=function(){u.ServiceAnalytics._flagLoaded||(d.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete"),u.ServiceAnalytics._flagLoaded=!0,U.delay(u.ServiceAnalytics._runQueuedCommands,1E3))};u.ServiceAnalytics.init=function(a,b){null==b&&(b=
"");u.ServiceAnalytics._flagInitted=!0;u.ServiceAnalytics._queuedCommands=[];"x"==a.toLowerCase()&&(u.ServiceAnalytics.OPTION_ENABLE_TRACKING=!1);u.ServiceAnalytics.OPTION_ENABLE_TRACKING&&(""==b&&(b=u.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID),u.ServiceAnalytics._flagStarted=!1,d.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)"),u.ServiceAnalytics._appId=a,u.ServiceAnalytics._sharedObjectId=b,u.ServiceAnalytics._sharedObjectData=d.WorkinCloud.instance.sharedObjectGetData(u.ServiceAnalytics._sharedObjectId),
u.ServiceAnalytics._generateSessionID(),null==u.ServiceAnalytics._sharedObjectData.userID||14>r.string(u.ServiceAnalytics._sharedObjectData.userID).length?(u.ServiceAnalytics._generateOfflineIDs(),u.ServiceAnalytics._sharedObjectData.userID=u.ServiceAnalytics._offlineUserId,u.ServiceAnalytics._sharedObjectData.trackingID=u.ServiceAnalytics._offlineTrackingId,d.WorkinCloud.instance.sharedObjectSetData(u.ServiceAnalytics._sharedObjectId,u.ServiceAnalytics._sharedObjectData)):(u.ServiceAnalytics._offlineUserId=
u.ServiceAnalytics._sharedObjectData.userID,u.ServiceAnalytics._offlineTrackingId=u.ServiceAnalytics._sharedObjectData.trackingID),eval("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+u.ServiceAnalytics._offlineUserId+"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+u.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t"),
eval("window.pnCallbackReference").addEventListener("load",u.ServiceAnalytics.onAnalyticsLoad,!1),eval("document.body.appendChild(window.pnCallbackReference);"),u.ServiceAnalytics.sendUserInfo(),u.ServiceAnalytics.sendMilestone("custom1"))};u.ServiceAnalytics._runQueuedCommands=function(){for(;0<u.ServiceAnalytics._queuedCommands.length;)u.ServiceAnalytics.sendPlaynomicsEvent(u.ServiceAnalytics._queuedCommands[0].method,u.ServiceAnalytics._queuedCommands[0].params),u.ServiceAnalytics._queuedCommands.shift()};
u.ServiceAnalytics.sendUserInfo=function(){u.ServiceAnalytics.sendPlaynomicsEvent("pnUserInfo",["update",null,null,"","","html5"])};u.ServiceAnalytics.sendMilestone=function(a){u.ServiceAnalytics.sendPlaynomicsEvent("pnMilestone",[r.string(Math.floor(6012+999999999*Math.random())),a])};u.ServiceAnalytics.sendPlaynomicsEvent=function(a,b){if(u.ServiceAnalytics.OPTION_ENABLE_TRACKING&&u.ServiceAnalytics._flagInitted)if(u.ServiceAnalytics._flagLoaded){d.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+
a);var g,c="";for(g=0;g<b.length;)c+="'"+b[g]+"'",g++,g<b.length&&(c+=",");eval(a+"("+c+")")}else u.ServiceAnalytics._queuedCommands.push({method:a,params:b})};u.ServiceAnalytics._generateSessionID=function(){for(var a="",b=11;-1<b;)a+=Math.floor(10*Math.random()),b--;u.ServiceAnalytics._sessionId=a};u.ServiceAnalytics._generateOfflineIDs=function(){u.ServiceAnalytics._offlineUserId="";u.ServiceAnalytics._offlineTrackingId="";for(var a=15;-1<a;){if(0.66>Math.random())u.ServiceAnalytics._offlineUserId+=
r.string(Math.floor(10*Math.random()));else switch(Math.floor(10*Math.random())){case 0:u.ServiceAnalytics._offlineUserId+="a";break;case 1:u.ServiceAnalytics._offlineUserId+="b";break;case 2:u.ServiceAnalytics._offlineUserId+="c";break;case 3:u.ServiceAnalytics._offlineUserId+="d";break;case 4:u.ServiceAnalytics._offlineUserId+="e";break;case 5:u.ServiceAnalytics._offlineUserId+="f";break;case 6:u.ServiceAnalytics._offlineUserId+="g";break;case 7:u.ServiceAnalytics._offlineUserId+="h";break;case 8:u.ServiceAnalytics._offlineUserId+=
"i";break;case 9:u.ServiceAnalytics._offlineUserId+="j";break;default:u.ServiceAnalytics._offlineUserId+="z"}a--}u.ServiceAnalytics._offlineTrackingId="";for(a=15;-1<a;)u.ServiceAnalytics._offlineTrackingId+=Math.floor(10*Math.random()),a--};d.JSEmbedProxy=function(){};j["com.workinman.utils.JSEmbedProxy"]=d.JSEmbedProxy;d.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];d.JSEmbedProxy.alertOn=function(a){d.JSEmbedProxy.callJSEmbedMethod("addAlert('"+a+"', '')")};d.JSEmbedProxy.alertOff=
function(){d.JSEmbedProxy.callJSEmbedMethod("removeAlert('')")};d.JSEmbedProxy.get_exists=function(){return d.JSEmbedProxy.callJSEmbedMethod("exists()")};d.JSEmbedProxy.get_base=function(){return d.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};d.JSEmbedProxy.get_isCrossdomain=function(){return d.JSEmbedProxy.callJSEmbedMethod("isBaseCrossdomain()")};d.JSEmbedProxy.get_canvasScale=function(){return r.parseFloat(d.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};d.JSEmbedProxy.get_canvasWidth=function(){return r.parseFloat(d.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};
d.JSEmbedProxy.get_canvasHeight=function(){return r.parseFloat(d.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"))};d.JSEmbedProxy.get_isPaused=function(){return d.JSEmbedProxy.callJSEmbedMethod("isPaused()")};d.JSEmbedProxy.pause=function(){d.JSEmbedProxy.callJSEmbedMethod("pause()")};d.JSEmbedProxy.unpause=function(){d.JSEmbedProxy.callJSEmbedMethod("unpause()")};d.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(g){}return""};d.WMAssetManager=function(){this._LOADING_CHANCES=
3;this._baseUrl="";this._assets=new B.StringMap;this._defs=new B.StringMap;this._flump=new B.StringMap;this._packs=new B.StringMap;this._chunks=new B.StringMap;this._manifests=new B.StringMap;this._flagBaseIsCrossdomain=!1;this._loadingProgress=this._loadingTotal=this._packsLoaded=this._packsMax=this._loadingChances=0;this._loadingPackProgress=new B.StringMap};j["com.workinman.utils.WMAssetManager"]=d.WMAssetManager;d.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];d.WMAssetManager.prototype=
{getFont:function(a){return!1==this._assets.exists(a)?(d.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+a+" exists! Returning null."),null):new l.Font(this._assets.get(a).get_pack(),a)},getLibrary:function(a){return!1==this._flump.exists(a)?(d.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+a+" exists! Is it defined in config.xml?"),null):this._flump.get(a)},getSound:function(a){return!1==this._assets.exists(a)?(d.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+
a+" exists! Returning null."),null):this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getSound(this._assets.get(a).get_path(),!0)},getXML:function(a){if(!1==this._assets.exists(a))return d.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+a+" exists! Returning null."),null;a=C.parse(r.string(this.getFile(a)));return new H.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?(d.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+
a+" exists! Returning empty string."),""):this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getFile(r.string(this._assets.get(a).get_path()),!0)},getTexture:function(a){a=a.split(".")[0];return!1==this._assets.exists(a)?(d.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+a+" exists! Returning null."),null):!0==this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getTexture(this._assets.get(a).get_path(),
!0)},hasAsset:function(a){return this._assets.exists(a)},_parseSpritesheet:function(a){for(var b=this.getXML(a+".xml"),a=this.getTexture(a),g="",c=new J.Rectangle(0,0,0,0),d,b=b.nodes.resolve("SubTexture").iterator();b.hasNext();)d=b.next(),g=d.att.resolve("name").toString(),c.x=r.parseFloat(d.att.resolve("x").toString()),c.y=r.parseFloat(d.att.resolve("y").toString()),c.width=r.parseFloat(d.att.resolve("width").toString()),c.height=r.parseFloat(d.att.resolve("height").toString()),d=D.createTexture(c.width|
0,c.height|0),d.get_graphics().drawSubImage(a,0,0,c.x|0,c.y|0,c.width|0,c.height|0),this.addConstructedAsset(g,d)},_onAllLoadComplete:function(){d.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(G.ConstantsCloud.EVENT_FILES_LOADED))},addConstructedAsset:function(a,b){new d._WMAssetManager.AssetDef(a,this._assets,b)},addPack:function(a){for(var b=F.iter(a.get_manifest()._entries);b.hasNext();){var g=
b.next();new d._WMAssetManager.AssetDef(g.name,this._assets,a)}},isPackLoaded:function(a){return this._packs.exists(a)},_loadManifest:function(a,b,g,c){null==c&&(c=!0);null==g&&(g="");var e=this,f=D._platform.loadAssetPack(a);this._loadingTotal+=f._total;this._loadingPackProgress.set(b,0);f.error.connect(function(a){d.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+a);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEvent(G.ConstantsCloud.EVENT_FILES_ERROR));
e._loadingChances--;!0==c?0<=e._loadingChances?U.delay(function(){d.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+e._loadingChances+" more chances.");e.loadPack(b,g,!1)},500):d.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out."):d.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed, not attempting to retry.")});f.progressChanged.connect(function(){var a=f._progress-e._loadingPackProgress.get(b);e._loadingPackProgress.set(b,
f._progress);e._loadingProgress+=a;a=Math.round(100*(e._loadingProgress/e._loadingTotal));d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(G.ConstantsCloud.EVENT_FILES_LOADING,{value:a}))});f.get(function(a){e.addPack(a);e._packsLoaded++;for(var g=0,c=e._defs.get(b).get_flump();g<c.length;){var d=c[g];++g;e._flump.set(d,new E.Library(a,d))}g=0;for(c=e._defs.get(b).get_tiles();g<c.length;)d=c[g],++g,e._parseSpritesheet(d);e._packs.set(b,a);e._packsLoaded>=e._packsMax&&e._onAllLoadComplete()})},
loadPack:function(a,b,g){null==g&&(g=!0);null==b&&(b="");!1==this._defs.exists(a)&&d.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+a+" , define the pack in config.xml.");d.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+a);g&&(this._loadingChances=this._LOADING_CHANCES,this._packsMax++);g=o.Manifest.build(a);""!=this._baseUrl&&(this._flagBaseIsCrossdomain?g.set_externalBasePath(this._baseUrl):g.set_relativeBasePath(this._baseUrl));this._loadManifest(g,a,b)},addPackDef:function(a,
b,g){null==b&&(b=[]);null==g&&(g=[]);this._defs.set(a,new d._WMAssetManager.PackDef(a,b,g))},_parseChunk:function(a,b){for(var g=[],c=[],e=b.nodes.resolve("chunk").iterator();e.hasNext();){var f=e.next();g.push(f.get_innerData().toString())}for(e=b.nodes.resolve("pack").iterator();e.hasNext();)f=e.next(),c.push(f.get_innerData().toString());return new d._WMAssetManager.ChunkDef(a,c,g)},loadFolder:function(a){d.WorkinCloud.instance.log("[WMAssetManager](loadFolder) "+a);this.isPackLoaded(a)||(this.addPackDef(a),
this.loadPack(a))},loadChunk:function(a){if(""!=a){!1==this._chunks.exists(a)&&d.WorkinCloud.instance.log("[WMAssetManager](loadChunk) No chunk named "+a+" defined.");for(var b=0,g=this._chunks.get(a).get_chunkIds();b<g.length;){var c=g[b];++b;this.loadChunk(c)}this._packsLoaded>=this._packsMax&&(this._loadingProgress=this._loadingTotal=0,d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(G.ConstantsCloud.EVENT_FILES_LOADING,{value:0})));b=0;for(g=this._chunks.get(a).get_packIds();b<
g.length;)c=g[b],++b,!1==this.isPackLoaded(c)&&this.loadPack(c)}},isChunkLoaded:function(a){if(""==a)return!0;if(!1==this._chunks.exists(a))return d.WorkinCloud.instance.log("[WMAssetManager](isChunkLoaded) No chunk named "+a+" defined."),!1;for(var b=0,a=this._chunks.get(a).get_packIds();b<a.length;){var g=a[b];++b;if(!1==this.isPackLoaded(g))return!1}return!0},addChunk:function(a,b){var g=this._parseChunk(a,b);this._chunks.set(a,g)},setCrossdomainBaseUrl:function(a){this._flagBaseIsCrossdomain=
!0;this.set_baseUrl(a)},set_baseUrl:function(a){this._baseUrl=a;d.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+a+"'");return this._baseUrl},get_baseUrl:function(){return this._baseUrl},__class__:d.WMAssetManager};d._WMAssetManager={};d._WMAssetManager.AssetDef=function(a,b,g){this._path=a;a=a.split("/");this._id=a[a.length-1].split(".")[0];this._constructed=!1;this._data=this._pack=null;L.__instanceof(g,o.AssetPack)?this._pack=g:(this._constructed=!0,this._data=g);this._hash=
b;this._hash.set(this._path,this);this._path!=this._path.split(".")[0]&&this._hash.set(this._path.split(".")[0],this);this._path!=this._id&&this._hash.set(this._id,this)};j["com.workinman.utils._WMAssetManager.AssetDef"]=d._WMAssetManager.AssetDef;d._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];d._WMAssetManager.AssetDef.prototype={get_pack:function(){return this._pack},get_path:function(){return this._path},get_data:function(){return this._data},get_constructed:function(){return this._constructed},
__class__:d._WMAssetManager.AssetDef};d._WMAssetManager.PackDef=function(a,b,g){this._id=a;this._flump=b;this._tiles=g};j["com.workinman.utils._WMAssetManager.PackDef"]=d._WMAssetManager.PackDef;d._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];d._WMAssetManager.PackDef.prototype={get_tiles:function(){return this._tiles},get_flump:function(){return this._flump},__class__:d._WMAssetManager.PackDef};d._WMAssetManager.ChunkDef=function(a,b,g){this._id=a;this._packs=
b;this._chunks=g};j["com.workinman.utils._WMAssetManager.ChunkDef"]=d._WMAssetManager.ChunkDef;d._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];d._WMAssetManager.ChunkDef.prototype={get_chunkIds:function(){return this._chunks},get_packIds:function(){return this._packs},__class__:d._WMAssetManager.ChunkDef};d._WMEventDispatcher={};d._WMEventDispatcher.WMEventTracker=function(){this._signalConnection=[];this._signal=new q.Signal1};j["com.workinman.utils._WMEventDispatcher.WMEventTracker"]=
d._WMEventDispatcher.WMEventTracker;d._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","utils","_WMEventDispatcher","WMEventTracker"];d._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;for(var a=0,b=this._signalConnection;a<b.length;){var g=b[a];++a;g.dispose()}this._signalConnection=null},isEmtpy:function(){return null==this._signal._head},dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalConnection.length;0<
b;)b--,R.compareMethods(this._signalConnection[b].get_listener(),a)&&(this._signalConnection[b].dispose(),this._signalConnection.splice(b,1))},addEventListener:function(a){this._signalConnection.push(new d._WMEventDispatcher.SignalTracker(a,this._signal.connect(a)))},__class__:d._WMEventDispatcher.WMEventTracker};d._WMEventDispatcher.SignalTracker=function(a,b){this._function=a;this._connection=b};j["com.workinman.utils._WMEventDispatcher.SignalTracker"]=d._WMEventDispatcher.SignalTracker;d._WMEventDispatcher.SignalTracker.__name__=
["com","workinman","utils","_WMEventDispatcher","SignalTracker"];d._WMEventDispatcher.SignalTracker.prototype={get_listener:function(){return this._function},dispose:function(){this._function=null;this._connection.dispose();this._connection=null},__class__:d._WMEventDispatcher.SignalTracker};d.WMInput=function(){this._multiTouchAvail=!1;this._inputDown=new B.StringMap;this._keyCodes=new B.StringMap;this._virtualCodes=new B.StringMap;this._keyDown=new B.StringMap;this._virtualDown=new B.StringMap;
this._touchList=new B.StringMap;this._touchRemoval=[];this.registerInput("input_click");this._scale=1;this._offset=new n.WorkinPoint;this._pointer=new d.WMPointer("",0)};j["com.workinman.utils.WMInput"]=d.WMInput;d.WMInput.__name__=["com","workinman","utils","WMInput"];d.WMInput.prototype={_onPointerUp:function(a){this._inputDown.set("input_click",!1);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.end(b,a);!1==this._multiTouchAvail&&this._touchList.exists("const")&&
this._touchList.get("const").end(b,a);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(0,"input_click",b,a,this._pointer.get_swipe()))},_onPointerMove:function(a){var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.move(b,a);!1==this._multiTouchAvail&&this._touchList.exists("const")&&this._touchList.get("const").move(b,a);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(2,"input_click",b,a,this._pointer.get_swipe()))},
_onPointerDown:function(a){this._inputDown.set("input_click",!0);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.begin(b,a);if(!1==this._multiTouchAvail){var g=new d.WMPointer("const",0);g.begin(b,a);this._touchList.set("const",g)}d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(1,"input_click",b,a,this._pointer.get_swipe()))},_onTouchUp:function(a){var b=a.viewX/this._scale,g=a.viewY/this._scale,b=b+this._offset.x,g=g+this._offset.y;
this._touchList.get(r.string(a.id)).end(b,g);0<this._touchList.get(r.string(a.id)).get_index()&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(0,"input_click",b,g,this._touchList.get(r.string(a.id)).get_swipe()))},_onTouchMove:function(a){var b=a.viewX/this._scale,g=a.viewY/this._scale,b=b+this._offset.x,g=g+this._offset.y;this._touchList.get(r.string(a.id)).move(b,g);0<this._touchList.get(r.string(a.id)).get_index()&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(2,
"input_click",b,g,this._touchList.get(r.string(a.id)).get_swipe()))},_onTouchDown:function(a){var b=0,g=!1;do for(var g=!0,c=function(a){return function(){return a.iterator()}}(this._touchList)();c.hasNext();){var e=c.next();if(b==e.get_index()){b++;g=!1;break}}while(!1==g);g=new d.WMPointer(r.string(a.id),b);this._touchList.set(g.get_id(),g);c=a.viewX/this._scale;a=a.viewY/this._scale;c+=this._offset.x;a+=this._offset.y;g.begin(c,a);0<b&&d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(1,
"input_click",c,a,g.get_swipe()))},_isInputDown:function(a){for(var b=0,g=this._keyCodes.get(a);b<g.length;){var c=g[b];++b;if(!0==this._keyDown.get(c))return!0}b=0;for(g=this._virtualCodes.get(a);b<g.length;)if(a=g[b],++b,!0==this._virtualDown.get(a))return!0;return!1},_onKeyUp:function(a){var b=r.string(a.key);this._keyDown.exists(b)&&this._keyDown.set(b,!1);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:0}))},
_onKeyDown:function(a){var b=r.string(a.key);this._keyDown.exists(b)&&this._keyDown.set(b,!0);d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventData(G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:1}))},getInput:function(a){return this._inputDown.get(a)},registerInput:function(a,b,g){!1==this._inputDown.exists(a)&&(this._inputDown.set(a,!1),this._keyCodes.set(a,[]),this._virtualCodes.set(a,[]));if(null!=b)for(var c=0;c<b.length;){var d=b[c];++c;this._keyCodes.get(a).push(r.string(d));
this._keyDown.set(r.string(d),!1)}if(null!=g)for(c=0;c<g.length;)b=g[c],++c,this._virtualCodes.get(a).push(b),this._virtualDown.set(b,!1)},prime:function(){this._multiTouchAvail=D._platform.getTouch().get_supported();D._platform.getKeyboard().down.connect(v(this,this._onKeyDown));D._platform.getKeyboard().up.connect(v(this,this._onKeyUp));this._multiTouchAvail&&(D._platform.getTouch().down.connect(v(this,this._onTouchDown)),D._platform.getTouch().move.connect(v(this,this._onTouchMove)),D._platform.getTouch().up.connect(v(this,
this._onTouchUp)));D._platform.getPointer().down.connect(v(this,this._onPointerDown));D._platform.getPointer().move.connect(v(this,this._onPointerMove));D._platform.getPointer().up.connect(v(this,this._onPointerUp))},set_scale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},update:function(a){for(var b=this._inputDown.keys();b.hasNext();){var g=b.next();"input_click"!=g&&(!0==this._inputDown.get(g)?!1==this._isInputDown(g)&&(this._inputDown.set(g,!1),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(0,
g,0,0))):!0==this._isInputDown(g)&&(this._inputDown.set(g,!0),d.WorkinCloud.instance.get_dispatcher().dispatchEvent(new m.WMEventInput(1,g,0,0))))}this._pointer.update(a);for(b=function(a){return function(){return a.iterator()}}(this._touchList)();b.hasNext();)g=b.next(),g.get_phase()==m.WMEventInput.PHASE_UP?this._touchRemoval.push(g.get_id()):g.update(a);a=0;for(b=this._touchRemoval;a<b.length;)g=b[a],++a,this._touchList.get(g).dispose(),this._touchList.remove(g);for(;0<this._touchRemoval.length;)this._touchRemoval.pop()},
__class__:d.WMInput};d.WMPointer=function(a,b){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=!0;this._timer=d.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._origin=new n.WorkinPoint(0,0);this._current=new n.WorkinPoint(0,0);this._last=new n.WorkinPoint(0,0);this._delta=new n.WorkinPoint(0,0);this._motionDelta=new n.WorkinLine;this._line=new n.WorkinLine(new n.WorkinPoint(0,0),new n.WorkinPoint(0,0));this._deltaLine=this._line.copy();
this._camera=new n.WorkinCamera(0,0);this._phase=m.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1};j["com.workinman.utils.WMPointer"]=d.WMPointer;d.WMPointer.__name__=["com","workinman","utils","WMPointer"];d.WMPointer.prototype={update:function(a){this._resetDeltaLine=!0;this._timer-=a;0>this._timer&&(this._timer=d.WMPointer._DELTA_TIMEOUT,this._deltaLine.originToPoint(this._current))},_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);this._current.x+=
this._camera.get_pos().x-this._camera.get_screenCenterX();this._current.y+=this._camera.get_pos().y-this._camera.get_screenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last);this._deltaLine.to(this._origin,this._current);this._motionDelta.to(this._motionDelta.get_p1(),this._current)},_testSwipe:function(){if(!1==this._consumed){var a=this._origin.x-this._current.x,b=this._origin.y-this._current.y;this._swipe=Math.abs(a)>=d.WMPointer._DELTA_ALLOWANCE&&Math.abs(b)<d.WMPointer._DELTA_ALLOWANCE?
0<a?this.SWIPE_LEFT:this.SWIPE_RIGHT:Math.abs(b)>=d.WMPointer._DELTA_ALLOWANCE&&Math.abs(a)<d.WMPointer._DELTA_ALLOWANCE?0<b?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE}else this._swipe=this.SWIPE_NONE},end:function(a,b){this._phase=m.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._testSwipe();this._line.endToPoint(this._current)},move:function(a,b){this._updateInfo(a,b);!1!=d.WorkinCloud.instance.get_input().getInput("input_click")&&(this._phase=m.WMEventInput.PHASE_MOVE,this._testSwipe(),this._line.endToPoint(this._current))},
begin:function(a,b){this._origin.to(a,b);this._origin.x+=this._camera.get_pos().x-this._camera.get_screenCenterX();this._origin.y+=this._camera.get_pos().y-this._camera.get_screenCenterY();this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._motionDelta.to(this._origin,this._current);this._consumed=!1;this._phase=m.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},
get_index:function(){return this._index},get_id:function(){return this._id},get_swipe:function(){return this._swipe},get_phase:function(){return this._phase},dispose:function(){this._motionDelta.dispose();this._delta=this._last=this._current=this._origin=this._motionDelta=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._camera=this._deltaLine=null},__class__:d.WMPointer};d.WMLocalize=function(){};j["com.workinman.utils.WMLocalize"]=d.WMLocalize;d.WMLocalize.__name__=["com",
"workinman","utils","WMLocalize"];d.WMLocalize.prototype={getData:function(a,b){null==b&&(b="");""==b&&(b=G.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+d.WorkinCloud.instance.getString(G.ConstantsCloud.STRING_REGION_ID)+".xml");for(var g=d.WorkinCloud.instance.get_assets().getXML(b).nodes.resolve("string").iterator();g.hasNext();){var c=g.next();if(c.att.resolve("id")==a)return new d.WMLocalizedData(c.att.resolve("id"),c.get_innerData(),c.att.resolve("fontName"),r.parseFloat(c.att.resolve("fontScale")),
r.parseFloat(c.att.resolve("offsetX")),r.parseFloat(c.att.resolve("offsetX")))}d.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+a);return new d.WMLocalizedData(a,"","",1,0,0)},__class__:d.WMLocalize};d.WMLocalizedData=function(a,b,g,c,d,e){this._id=a;this._string=b;this._fontName=g;this._scale=c;this._offsetX=d;this._offsetY=e};j["com.workinman.utils.WMLocalizedData"]=d.WMLocalizedData;d.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];d.WMLocalizedData.prototype=
{get_offsetY:function(){return this._offsetY},get_offsetX:function(){return this._offsetX},get_scale:function(){return this._scale},get_fontName:function(){return this._fontName},get_string:function(){return this._string},__class__:d.WMLocalizedData};d.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._flagSystemMute=this._flagMuted=!1;this._mixer=new K.Mixer;this._sounds=[]};j["com.workinman.utils.WMSound"]=d.WMSound;d.WMSound.__name__=["com","workinman","utils",
"WMSound"];d.WMSound.prototype={get_musicPlaying:function(){return this._musicPlaying},update:function(a){for(var b=0;b<this._sounds.length;){if(this._sounds[b].get_fade()==d.WMSound.FADE_OUT){if(0<this._sounds[b].get_playback().volume._value){var g=this._sounds[b].get_playback().volume;g.set__(g._value-a*this._sounds[b].get_fadeSpeed());0>=this._sounds[b].get_playback().volume._value&&(this._sounds[b].setFade(d.WMSound.FADE_NONE),this._sounds[b].get_playback().volume.set__(0))}}else this._sounds[b].get_fade()==
d.WMSound.FADE_IN&&this._sounds[b].get_playback().volume._value<this._sounds[b].volume&&(g=this._sounds[b].get_playback().volume,g.set__(g._value+a*this._sounds[b].get_fadeSpeed()),this._sounds[b].get_playback().volume._value>=this._sounds[b].volume&&(this._sounds[b].setFade(d.WMSound.FADE_NONE),this._sounds[b].get_playback().volume.set__(this._sounds[b].volume)));b++}null!=this.get_musicPlaying()&&(this.get_musicPlaying().get_fade()==d.WMSound.FADE_OUT?0<this.get_musicPlaying().get_playback().volume._value&&
(g=this.get_musicPlaying().get_playback().volume,g.set__(g._value-a*this.get_musicPlaying().get_fadeSpeed()),0>=this.get_musicPlaying().get_playback().volume._value&&(this.get_musicPlaying().setFade(d.WMSound.FADE_NONE),this.get_musicPlaying().get_playback().volume.set__(0))):this.get_musicPlaying().get_fade()==d.WMSound.FADE_IN&&this.get_musicPlaying().get_playback().volume._value<this.get_musicPlaying().volume&&(g=this.get_musicPlaying().get_playback().volume,g.set__(g._value+a*this.get_musicPlaying().get_fadeSpeed()),
this.get_musicPlaying().get_playback().volume._value>=this.get_musicPlaying().volume&&(this.get_musicPlaying().setFade(d.WMSound.FADE_NONE),this.get_musicPlaying().get_playback().volume.set__(this.get_musicPlaying().volume))))},_muteMusic:function(a){""!=this._musicId&&(a?this._musicPlaying=null:(this._musicPlaying=a=new d._WMSound.SoundDef(this._musicId,this._mixer.newSound(d.WorkinCloud.instance.get_assets().getSound(this._musicId),1),!0),a.playSound(this._musicGain)))},playMusic:function(a,b){null==
b&&(b=1);if(!(G.ConstantsCloud.getIsAndroid()&&null!=this._musicPlaying||this._musicId==a))if(this._musicId=a,this._musicGain=b,!(this.getMute()||""==a)){null!=this._musicPlaying&&this._musicPlaying.dispose();var g=new d._WMSound.SoundDef(a,this._mixer.newSound(d.WorkinCloud.instance.get_assets().getSound(this._musicId),1),!0);this._musicPlaying=g;g.playSound(b)}},_muteAllToggle:function(a){if(a){for(this._mixer.stopAll();0<this._sounds.length;)this._sounds.splice(0,1);this._muteMusic(!0)}else a||
this._muteMusic(!1)},playSound:function(a,b){null==b&&(b=1);if(!G.ConstantsCloud.getIsAndroid()&&!this.getMute()){for(var g=0;g<this._sounds.length;){if(this._sounds[g].id==a){this._sounds[g].playSound(b);return}g++}g=new d._WMSound.SoundDef(a,this._mixer.newSound(d.WorkinCloud.instance.get_assets().getSound(a),4),!1);this._sounds.push(g);g.playSound(b)}},setSystemMute:function(a){(this._flagSystemMute=a)?this._muteAllToggle(this._flagSystemMute):this._muteAllToggle(this._flagMuted)},setMute:function(a){this._flagMuted=
a;this._flagSystemMute||this._muteAllToggle(this._flagMuted)},getMute:function(){return this._flagSystemMute||this._flagMuted},__class__:d.WMSound};d._WMSound={};d._WMSound.SoundDef=function(a,b,g){null==g&&(g=!1);this.id=a;this.isMusic=g;this.volume=1;this._flagPlayed=this._flagHasSound=!1;this._sound=b;this._fade=d.WMSound.FADE_NONE;this._fadeSpeed=1};j["com.workinman.utils._WMSound.SoundDef"]=d._WMSound.SoundDef;d._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];d._WMSound.SoundDef.prototype=
{playSound:function(a){null==a&&(a=1);this.volume=a;this._playback=this.isMusic?this._sound.loop(a):this._sound.play(a)},setFade:function(a,b){null==b&&(b=1);this._fade=a;this._fadeSpeed=b},get_fadeSpeed:function(){return this._fadeSpeed},get_fade:function(){return this._fade},get_playback:function(){return this._playback},dispose:function(){this._playback.dispose();this._playback=null},__class__:d._WMSound.SoundDef};K={Mixer:function(){this._sounds=[]}};j["flambe.sound.Mixer"]=K.Mixer;K.Mixer.__name__=
["flambe","sound","Mixer"];K.Mixer.__super__=Q;K.Mixer.prototype=w(Q.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var g=b[a];++a;g.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var g=new K._Mixer.MixerSound(a,b);this._sounds.push(g);return g},get_name:function(){return"Mixer_3"},__class__:K.Mixer});d.WorkinCloud=function(){this._TIMER_STACK=0.1;this._values=new B.StringMap;this._defaults=new B.StringMap;this._dispatcher=
new d.WMEventDispatcher;this._input=new d.WMInput;this._assets=new d.WMAssetManager;this._sound=new d.WMSound;this._localize=new d.WMLocalize;this._stack=[];this._timerStack=-1};j["com.workinman.utils.WorkinCloud"]=d.WorkinCloud;d.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];d.WorkinCloud.prototype={updateStack:function(a){1>this._stack.length||(this._timerStack-=a,0>this._timerStack&&(this._stack[0](),this._stack.shift(),this._timerStack=this._TIMER_STACK))},_updateDisplays:function(a){this._dispatcher.dispatchEvent(new m.WMEventData(c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,
{valueID:a}))},resetValue:function(a){var b=this._defaults.get(a);this._values.set(a,b);this._updateDisplays(a)},modifyValue:function(a,b){null==b&&(b=1);this._values.set(a,this.getFloat(a)+b);this._updateDisplays(a);return this.getFloat(a)},setValue:function(a,b){this._values.set(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},sharedObjectSetData:function(a,b){var g=S.WMSharedObject.getLocal(a);g.set_data(b);
g.flush();g.dispose()},sharedObjectGetData:function(a){var a=S.WMSharedObject.getLocal(a),b=a.get_data();a.dispose();return b},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},setFloat:function(a,b){this.setValue(a,b)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},get_sound:function(){return this._sound},get_assets:function(){return this._assets},get_input:function(){return this._input},
get_dispatcher:function(){return this._dispatcher},get_localize:function(){return this._localize},log:function(){null},__class__:d.WorkinCloud};d.WorkinUtils=function(){};j["com.workinman.utils.WorkinUtils"]=d.WorkinUtils;d.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];d.WorkinUtils.getRandom=function(a,b,g){null==g&&(g=!0);var c=Math.random();1==c&&(c=0.99);return g?a+Math.floor(c*(b+1-a)):a+c*(b-a)};P=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap=
{}};j["flambe.Entity"]=P;P.__name__=["flambe","Entity"];P.__interfaces__=[q.Disposable];P.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,g=this.firstChild;null!=g;){var c=g.next;if(g==a){null==b?this.firstChild=c:b.next=c;g.parent=null;g.next=null;break}b=g;g=c}},
addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var g=null,c=this.firstChild;null!=c;)g=c,c=c.next;null!=g?g.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,g=this.firstComponent;null!=g;){var c=g.next;if(g==a)return null==b?this.firstComponent=c:b.init(this,c),delete this._compMap[g.get_name()],g.onRemoved(),g.init(null,null),!0;b=g;g=c}return!1},add:function(a){null!=a.owner&&
a.owner.remove(a);var b=a.get_name(),g=this._compMap[b];null!=g&&this.remove(g);this._compMap[b]=a;b=null;for(g=this.firstComponent;null!=g;)b=g,g=g.next;null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},__class__:P};f={Platform:function(){}};j["flambe.platform.Platform"]=f.Platform;f.Platform.__name__=["flambe","platform","Platform"];f.Platform.prototype={__class__:f.Platform};f.html={};f.html.HtmlPlatform=function(){};j["flambe.platform.html.HtmlPlatform"]=f.html.HtmlPlatform;
f.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];f.html.HtmlPlatform.__interfaces__=[f.Platform];f.html.HtmlPlatform.prototype={createRenderer:function(a){try{var b=fa._CanvasElement.CanvasUtil.getContextWebGL(a,{alpha:!1,depth:!1});if(null!=b)if(f.html.HtmlUtil.detectSlowDriver(b))null;else return new f.html.WebGLRenderer(this._stage,b)}catch(g){}return new f.html.CanvasRenderer(a)},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},getX:function(a,
b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getRenderer:function(){return this._renderer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new f.BasicKeyboard;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getTouch:function(){return this._touch},
getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;D.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getStage:function(){return this._stage},loadAssetPack:function(a){return(new f.html.HtmlAssetPackLoader(this,a)).promise},useMonotonicTimer:function(){var a=this;this._lastUpdate=Date.now();var b=f.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=b){var g=
x.window.performance,c=null!=g&&f.html.HtmlUtil.polyfill("now",g);this.inRecursiveUpdate=!0;c?this._lastUpdate=g.now():null;var d=null,d=function(e){a.update(c?g.now():e);b(d,a.canvas)};b(d,this.canvas)}else this.useIntervalTimer()},useIntervalTimer:function(){var a=this;x.window.setInterval(function(){a.update(Date.now())},16)},init:function(){var a=this;f.html.HtmlUtil.fixAndroidMath();this.canvas=null;try{this.canvas=x.window.flambe.canvas}catch(b){}this.canvas.setAttribute("tabindex","0");this.canvas.style.outlineStyle=
"none";this.canvas.setAttribute("moz-opaque","true");this._stage=new f.html.HtmlStage(this.canvas);this._pointer=new f.BasicPointer;this._mouse=new f.html.HtmlMouse(this._pointer,this.canvas);this._renderer=this.createRenderer(this.canvas);this.mainLoop=new f.MainLoop;this.canUseMonotonicTimer=this.inRecursiveUpdate=this.musicPlaying=!1;this._canvas=this.canvas;this._container=this.canvas.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction=
"none";var g=0,c=function(b){if(!(1E3>b.timeStamp-g)){var c=a.canvas.getBoundingClientRect(),d=a.getX(b,c),c=a.getY(b,c);switch(b.type){case "mousedown":b.target==a.canvas&&(b.preventDefault(),a._mouse.submitDown(d,c,b.button),a.canvas.focus());break;case "mousemove":a._mouse.submitMove(d,c);break;case "mouseup":a._mouse.submitUp(d,c,b.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(d,c,"mousewheel"==b.type?b.wheelDelta/40:-b.detail)&&b.preventDefault()}}};x.window.addEventListener("mousedown",
c,!1);x.window.addEventListener("mousemove",c,!1);x.window.addEventListener("mouseup",c,!1);this.canvas.addEventListener("mousewheel",c,!1);this.canvas.addEventListener("DOMMouseScroll",c,!1);var d="undefined"!=typeof x.window.ontouchstart,c="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(d||c){var e=new f.BasicTouch(this._pointer,d?4:x.navigator.msMaxTouchPoints);this._touch=e;c=function(b){var c=d?b.changedTouches:[b],s=b.target.getBoundingClientRect();g=b.timeStamp;
switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();f.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&f.html.HtmlUtil.hideMobileBrowser();for(b=0;b<c.length;){var h=c[b];++b;var i=a.getX(h,s),j=a.getY(h,s),h=(d?h.identifier:h.pointerId)|0;e.submitDown(h,i,j)}break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<c.length;)h=c[b],++b,i=a.getX(h,s),j=a.getY(h,s),h=(d?h.identifier:h.pointerId)|0,e.submitMove(h,i,j);break;case "touchend":case "touchcancel":case "MSPointerUp":b.preventDefault();
for(b=0;b<c.length;)h=c[b],++b,i=a.getX(h,s),j=a.getY(h,s),h=(d?h.identifier:h.pointerId)|0,e.submitUp(h,i,j)}};d?(this.canvas.addEventListener("touchstart",c,!1),this.canvas.addEventListener("touchmove",c,!1),this.canvas.addEventListener("touchend",c,!1),this.canvas.addEventListener("touchcancel",c,!1)):(this.canvas.addEventListener("MSPointerDown",c,!1),this.canvas.addEventListener("MSPointerMove",c,!1),this.canvas.addEventListener("MSPointerUp",c,!1))}else this._touch=new f.DummyTouch;var h=x.window.onerror;
x.window.onerror=function(a,b,g){D.uncaughtError.emit1(a);return null!=h?h(a,b,g):!1};var i=f.html.HtmlUtil.loadExtension("hidden",x.document);null!=i.value?(c=function(){D.hidden.set__(R.field(x.document,i.field))},c(null),x.document.addEventListener(i.prefix+"visibilitychange",c,!1)):(c=function(a){D.hidden.set__("pagehide"==a.type)},x.window.addEventListener("pageshow",c,!1),x.window.addEventListener("pagehide",c,!1));D.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this.escapeUpdateLoop=
this._skipFrame=!1;this.useMonotonicTimer();null},__class__:f.html.HtmlPlatform};q.Value=function(a,b){this._value=a;this._changed=null!=b?new q.Signal2(b):null};j["flambe.util.Value"]=q.Value;q.Value.__name__=["flambe","util","Value"];q.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new q.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},watch:function(a){a(this._value,this._value);
return this.get_changed().connect(a)},__class__:q.Value};q.SignalConnection=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};j["flambe.util.SignalConnection"]=q.SignalConnection;q.SignalConnection.__name__=["flambe","util","SignalConnection"];q.SignalConnection.__interfaces__=[q.Disposable];q.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:q.SignalConnection};
q.SignalBase=function(a){this._head=null!=a?new q.SignalConnection(this,a):null;this._deferredTasks=null};j["flambe.util.SignalBase"]=q.SignalBase;q.SignalBase.__name__=["flambe","util","SignalBase"];q.SignalBase.prototype={listRemove:function(a){for(var b=null,g=this._head;null!=g;){if(g==a){a=g._next;null==b?this._head=a:b._next=a;break}b=g;g=g._next}},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var g=null,c=this._head;null!=c;)g=c,c=c._next;null!=g?g._next=a:this._head=
a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=q.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,g=this._deferredTasks;null!=g;)b=g,g=g.next;a=new q._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var g=this.willEmit(),c=g;null!=c;)c._listener(a,b),c.stayInList||c.dispose(),c=c._next;this.didEmit(g)},
emit1:function(a){for(var b=this.willEmit(),g=b;null!=g;)g._listener(a),g.stayInList||g.dispose(),g=g._next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},disconnect:function(a){var b=this;this._head==q.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var g=this,c=new q.SignalConnection(this,a);this._head==q.SignalBase.DISPATCHING_SENTINEL?
this.defer(function(){g.listAdd(c,b)}):this.listAdd(c,b);return c},__class__:q.SignalBase};q.Signal2=function(a){q.SignalBase.call(this,a)};j["flambe.util.Signal2"]=q.Signal2;q.Signal2.__name__=["flambe","util","Signal2"];q.Signal2.__super__=q.SignalBase;q.Signal2.prototype=w(q.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:q.Signal2});q.Signal1=function(a){q.SignalBase.call(this,a)};j["flambe.util.Signal1"]=q.Signal1;q.Signal1.__name__=["flambe",
"util","Signal1"];q.Signal1.__super__=q.SignalBase;q.Signal1.prototype=w(q.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:q.Signal1});M={AnimatedFloat:function(a,b){this._behavior=null;q.Value.call(this,a,b)}};j["flambe.animation.AnimatedFloat"]=M.AnimatedFloat;M.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];M.AnimatedFloat.__super__=q.Value;M.AnimatedFloat.prototype=w(q.Value.prototype,{update:function(a){null!=this._behavior&&
(q.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return q.Value.prototype.set__.call(this,a)},__class__:M.AnimatedFloat});D=function(){};j["flambe.System"]=D;D.__name__=["flambe","System"];D.init=function(){D._calledInit||(D._platform.init(),D._calledInit=!0)};D.createTexture=function(a,b){return D._platform.getRenderer().createEmptyTexture(a,b)};A=function(){this._realDt=0};j["flambe.SpeedAdjuster"]=
A;A.__name__=["flambe","SpeedAdjuster"];A.__super__=Q;A.prototype=w(Q.prototype,{onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_5"},__class__:A});M.Behavior=function(){};j["flambe.animation.Behavior"]=M.Behavior;M.Behavior.__name__=["flambe","animation","Behavior"];M.Behavior.prototype={__class__:M.Behavior};o={Asset:function(){}};j["flambe.asset.Asset"]=o.Asset;o.Asset.__name__=["flambe","asset","Asset"];o.Asset.__interfaces__=
[q.Disposable];o.Asset.prototype={__class__:o.Asset};o.AssetFormat=j["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data,ZIP,TAR".split(",")};o.AssetFormat.WEBP=["WEBP",0];o.AssetFormat.WEBP.toString=k;o.AssetFormat.WEBP.__enum__=o.AssetFormat;o.AssetFormat.JXR=["JXR",1];o.AssetFormat.JXR.toString=k;o.AssetFormat.JXR.__enum__=o.AssetFormat;o.AssetFormat.PNG=["PNG",2];o.AssetFormat.PNG.toString=k;o.AssetFormat.PNG.__enum__=
o.AssetFormat;o.AssetFormat.JPG=["JPG",3];o.AssetFormat.JPG.toString=k;o.AssetFormat.JPG.__enum__=o.AssetFormat;o.AssetFormat.GIF=["GIF",4];o.AssetFormat.GIF.toString=k;o.AssetFormat.GIF.__enum__=o.AssetFormat;o.AssetFormat.DDS=["DDS",5];o.AssetFormat.DDS.toString=k;o.AssetFormat.DDS.__enum__=o.AssetFormat;o.AssetFormat.PVR=["PVR",6];o.AssetFormat.PVR.toString=k;o.AssetFormat.PVR.__enum__=o.AssetFormat;o.AssetFormat.PKM=["PKM",7];o.AssetFormat.PKM.toString=k;o.AssetFormat.PKM.__enum__=o.AssetFormat;
o.AssetFormat.MP3=["MP3",8];o.AssetFormat.MP3.toString=k;o.AssetFormat.MP3.__enum__=o.AssetFormat;o.AssetFormat.M4A=["M4A",9];o.AssetFormat.M4A.toString=k;o.AssetFormat.M4A.__enum__=o.AssetFormat;o.AssetFormat.OPUS=["OPUS",10];o.AssetFormat.OPUS.toString=k;o.AssetFormat.OPUS.__enum__=o.AssetFormat;o.AssetFormat.OGG=["OGG",11];o.AssetFormat.OGG.toString=k;o.AssetFormat.OGG.__enum__=o.AssetFormat;o.AssetFormat.WAV=["WAV",12];o.AssetFormat.WAV.toString=k;o.AssetFormat.WAV.__enum__=o.AssetFormat;o.AssetFormat.Data=
["Data",13];o.AssetFormat.Data.toString=k;o.AssetFormat.Data.__enum__=o.AssetFormat;o.AssetFormat.ZIP=["ZIP",14];o.AssetFormat.ZIP.toString=k;o.AssetFormat.ZIP.__enum__=o.AssetFormat;o.AssetFormat.TAR=["TAR",15];o.AssetFormat.TAR.toString=k;o.AssetFormat.TAR.__enum__=o.AssetFormat;o.AssetEntry=function(a,b,g,c){this.name=a;this.url=b;this.format=g;this.bytes=c};j["flambe.asset.AssetEntry"]=o.AssetEntry;o.AssetEntry.__name__=["flambe","asset","AssetEntry"];o.AssetEntry.prototype={__class__:o.AssetEntry};
o.AssetPack=function(){};j["flambe.asset.AssetPack"]=o.AssetPack;o.AssetPack.__name__=["flambe","asset","AssetPack"];o.AssetPack.__interfaces__=[q.Disposable];o.AssetPack.prototype={__class__:o.AssetPack};o.File=function(){};j["flambe.asset.File"]=o.File;o.File.__name__=["flambe","asset","File"];o.File.__interfaces__=[o.Asset];o.File.prototype={__class__:o.File};L=void 0;x=void 0;fa=void 0;x=function(){};j["js.Browser"]=x;x.__name__=["js","Browser"];o.Manifest=function(){this._entries=[]};j["flambe.asset.Manifest"]=
o.Manifest;o.Manifest.__name__=["flambe","asset","Manifest"];o.Manifest.build=function(a,b){null==b&&(b=!0);var g=R.field(ha.Meta.getType(o.Manifest).assets[0],a);if(null==g){if(b)throw q.Strings.withFields("Missing asset pack",["name",a]);return null}var c=new o.Manifest;c.set_relativeBasePath("assets");for(var d=0;d<g.length;){var e=g[d];++d;var f=e.name,h=a+"/"+f+"?v="+r.string(e.md5),i=o.Manifest.inferFormat(f);i!=o.AssetFormat.Data&&(f=q.Strings.removeFileExtension(f));c.add(f,h,e.bytes,i)}return c};
o.Manifest.inferFormat=function(a){a=q.Strings.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return o.AssetFormat.GIF;case "jpg":case "jpeg":return o.AssetFormat.JPG;case "jxr":case "wdp":return o.AssetFormat.JXR;case "png":return o.AssetFormat.PNG;case "webp":return o.AssetFormat.WEBP;case "dds":return o.AssetFormat.DDS;case "pvr":return o.AssetFormat.PVR;case "pkm":return o.AssetFormat.PKM;case "m4a":return o.AssetFormat.M4A;case "mp3":return o.AssetFormat.MP3;case "ogg":return o.AssetFormat.OGG;
case "opus":return o.AssetFormat.OPUS;case "wav":return o.AssetFormat.WAV;case "zip":return o.AssetFormat.ZIP;case "tar":return o.AssetFormat.TAR}else null;return o.AssetFormat.Data};o.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=
null!=this.get_externalBasePath()&&o.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),g=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.format==o.AssetFormat.Data&&(g=b);return null!=g?q.Strings.joinPath(g,a.url):a.url},iterator:function(){return F.iter(this._entries)},add:function(a,b,g,c){null==g&&(g=0);null==c&&(c=o.Manifest.inferFormat(b));a=new o.AssetEntry(a,b,c,g);this._entries.push(a);return a},__class__:o.Manifest};
ca={FpsDisplay:function(){this.reset()}};j["flambe.debug.FpsDisplay"]=ca.FpsDisplay;ca.FpsDisplay.__name__=["flambe","debug","FpsDisplay"];ca.FpsDisplay.__super__=Q;ca.FpsDisplay.prototype=w(Q.prototype,{reset:function(){this._fpsTime=this._fpsFrames=0},onUpdate:function(a){++this._fpsFrames;this._fpsTime+=a;if(1<this._fpsTime){var a="FPS: "+(100*(this._fpsFrames/this._fpsTime)|0)/100,b=this.owner._compMap.Sprite_1;null!=b?b.set_text(a):null;this.reset()}},get_name:function(){return"FpsDisplay_0"},
__class__:ca.FpsDisplay});l={};l.BlendMode=j["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","Mask","Copy"]};l.BlendMode.Normal=["Normal",0];l.BlendMode.Normal.toString=k;l.BlendMode.Normal.__enum__=l.BlendMode;l.BlendMode.Add=["Add",1];l.BlendMode.Add.toString=k;l.BlendMode.Add.__enum__=l.BlendMode;l.BlendMode.Mask=["Mask",2];l.BlendMode.Mask.toString=k;l.BlendMode.Mask.__enum__=l.BlendMode;l.BlendMode.Copy=["Copy",3];l.BlendMode.Copy.toString=
k;l.BlendMode.Copy.__enum__=l.BlendMode;J={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};j["flambe.math.Point"]=J.Point;J.Point.__name__=["flambe","math","Point"];J.Point.prototype={__class__:J.Point};l.Sprite=function(){this.blendMode=this.scissor=null;var a=this;this._flags=139;this._localMatrix=new J.Matrix;var b=function(){a._flags|=12};this.x=new M.AnimatedFloat(0,b);this.y=new M.AnimatedFloat(0,b);this.rotation=new M.AnimatedFloat(0,b);this.scaleX=new M.AnimatedFloat(1,
b);this.scaleY=new M.AnimatedFloat(1,b);this.anchorX=new M.AnimatedFloat(0,b);this.anchorY=new M.AnimatedFloat(0,b);this.alpha=new M.AnimatedFloat(1)};j["flambe.display.Sprite"]=l.Sprite;l.Sprite.__name__=["flambe","display","Sprite"];l.Sprite.hitTest=function(a,b,g){var c=a._compMap.Sprite_1;if(null!=c){if(3!=(c._flags&3))return null;c.getLocalMatrix().inverseTransform(b,g,l.Sprite._scratchPoint)&&(b=l.Sprite._scratchPoint.x,g=l.Sprite._scratchPoint.y);var d=c.scissor;if(null!=d&&!d.contains(b,g))return null}a=
l.Sprite.hitTestBackwards(a.firstChild,b,g);return null!=a?a:null!=c&&c.containsLocal(b,g)?c:null};l.Sprite.render=function(a,b){var g=a._compMap.Sprite_1;if(null!=g){var c=g.alpha._value;if(0==(g._flags&1)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=g.blendMode&&b.setBlendMode(g.blendMode);var c=g.getLocalMatrix(),d=c.m02,e=c.m12;0!=(g._flags&128)&&(d=Math.round(d),e=Math.round(e));b.transform(c.m00,c.m10,c.m01,c.m11,d,e);c=g.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);g.draw(b)}c=
a._compMap.Director_4;if(null!=c){c=c.occludedScenes;for(d=0;d<c.length;)e=c[d],++d,l.Sprite.render(e,b)}for(c=a.firstChild;null!=c;)d=c.next,l.Sprite.render(c,b),c=d;null!=g&&b.restore()};l.Sprite.hitTestBackwards=function(a,b,g){if(null!=a){var c=l.Sprite.hitTestBackwards(a.next,b,g);return null!=c?c:l.Sprite.hitTest(a,b,g)}return null};l.Sprite.__super__=Q;l.Sprite.prototype=w(Q.prototype,{set_pointerEnabled:function(a){this._flags=q.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=
q.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new q.Signal1);return this._pointerUp},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new q.Signal1);return this._pointerDown},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},setScale:function(a){this.scaleX.set__(a);
this.scaleY.set__(a);return this},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},
getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_1"},__class__:l.Sprite});l.FillSprite=function(a,b,g){l.Sprite.call(this);this.color=a;this.width=new M.AnimatedFloat(b);this.height=new M.AnimatedFloat(g)};j["flambe.display.FillSprite"]=l.FillSprite;l.FillSprite.__name__=["flambe","display","FillSprite"];l.FillSprite.__super__=l.Sprite;l.FillSprite.prototype=w(l.Sprite.prototype,{onUpdate:function(a){l.Sprite.prototype.onUpdate.call(this,
a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:l.FillSprite});l.Glyph=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};j["flambe.display.Glyph"]=l.Glyph;l.Glyph.__name__=["flambe","display","Glyph"];l.Glyph.prototype=
{setKerning:function(a,b){null==this._kernings&&(this._kernings=new B.IntMap);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,g){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,g+this.yOffset,this.x,this.y,this.width,this.height)},__class__:l.Glyph};l.Font=function(a,b){this.name=b;this._pack=a;this.reload()};j["flambe.display.Font"]=l.Font;l.Font.__name__=["flambe","display","Font"];l.Font.prototype={reload:function(){this._glyphs=
new B.IntMap;this._glyphs.set(l.Font.NEWLINE.charCode,l.Font.NEWLINE);for(var a=new l._Font.ConfigParser(this._pack.getFile(this.name+".fnt").toString()),b=new B.IntMap,g=this.name.lastIndexOf("/"),g=0<=g?F.substr(this.name,0,g+1):"",c=a.keywords();c.hasNext();)switch(c.next()){case "info":for(var d=a.pairs();d.hasNext();){var e=d.next();switch(e.key){case "size":this.size=e.getInt()}}break;case "page":for(var d=0,f=null,h=a.pairs();h.hasNext();)switch(e=h.next(),e.key){case "id":d=e.getInt();break;
case "file":f=e.getString()}b.set(d,this._pack.getTexture(g+q.Strings.removeFileExtension(f)));break;case "char":d=null;for(f=a.pairs();f.hasNext();)switch(e=f.next(),e.key){case "id":d=new l.Glyph(e.getInt());break;case "x":d.x=e.getInt();break;case "y":d.y=e.getInt();break;case "width":d.width=e.getInt();break;case "height":d.height=e.getInt();break;case "page":d.page=b.get(e.getInt());break;case "xoffset":d.xOffset=e.getInt();break;case "yoffset":d.yOffset=e.getInt();break;case "xadvance":d.xAdvance=
e.getInt()}this._glyphs.set(d.charCode,d);break;case "kerning":d=null;f=-1;for(h=a.pairs();h.hasNext();)switch(e=h.next(),e.key){case "first":d=this._glyphs.get(e.getInt());break;case "second":f=e.getInt();break;case "amount":d.setKerning(f,e.getInt())}}},layoutText:function(a,b,g){null==g&&(g=0);null==b&&(b=l.TextAlign.Left);return new l.TextLayout(this,a,b,g)},getGlyphs:function(a){for(var b=[],g=0,c=a.length;g<c;){var d=g++,d=this._glyphs.get(a.charCodeAt(d));null!=d?b.push(d):null}return b},__class__:l.Font};
l.TextAlign=j["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};l.TextAlign.Left=["Left",0];l.TextAlign.Left.toString=k;l.TextAlign.Left.__enum__=l.TextAlign;l.TextAlign.Center=["Center",1];l.TextAlign.Center.toString=k;l.TextAlign.Center.__enum__=l.TextAlign;l.TextAlign.Right=["Right",2];l.TextAlign.Right.toString=k;l.TextAlign.Right.__enum__=l.TextAlign;l.TextLayout=function(a,b,g,c){this.lines=0;var d=this;this._font=a;this._glyphs=
[];this._offsets=[];this.bounds=new J.Rectangle;for(var e=[],f=b.length,h=0;h<f;){var i=h++,j=b.charCodeAt(i),j=a._glyphs.get(j);null!=j?this._glyphs.push(j):null}for(var b=-1,k=0,m=0,f=a._glyphs.get(10),h=function(){d.bounds.width=J.FMath.max(d.bounds.width,k);d.bounds.height+=m;e[d.lines]=k;m=k=0;++d.lines},i=0;i<this._glyphs.length;){j=this._glyphs[i];this._offsets[i]=k;var n=0<c&&k+j.width>c;n||j==f?(n&&(0<=b?(this._glyphs[b]=f,k=this._offsets[b],i=b):this._glyphs.splice(i,0,f)),b=-1,m=a.size,
h()):(32==j.charCode&&(b=i),k+=j.xAdvance,m=J.FMath.max(m,j.height+j.yOffset),i+1<this._glyphs.length&&(k+=j.getKerning(this._glyphs[i+1].charCode)));++i}h();for(var i=0,b=l.TextLayout.getAlignOffset(g,e[0],c),f=1.79769313486231E308,h=-1.79769313486231E308,o=n=0,q=this._glyphs.length;o<q;){j=this._glyphs[o];10==j.charCode&&(i+=a.size,++n,b=l.TextLayout.getAlignOffset(g,e[n],c));this._offsets[o]+=b;var p=i+j.yOffset,f=f<p?f:p,h=J.FMath.max(h,p+j.height);++o}this.bounds.x=l.TextLayout.getAlignOffset(g,
this.bounds.width,c);this.bounds.y=f;this.bounds.height=h-f};j["flambe.display.TextLayout"]=l.TextLayout;l.TextLayout.__name__=["flambe","display","TextLayout"];l.TextLayout.getAlignOffset=function(a,b,g){switch(a[1]){case 0:return 0;case 2:return g-b;case 1:return(g-b)/2}};l.TextLayout.prototype={draw:function(a){for(var b=0,g=0,c=this._glyphs.length;g<c;){var d=this._glyphs[g];10==d.charCode?b+=this._font.size:d.draw(a,this._offsets[g],b);++g}},__class__:l.TextLayout};l._Font={};l._Font.ConfigParser=
function(a){this._configText=a;this._keywordPattern=new $("([a-z]+)(.*)","");this._pairPattern=new $('([a-z]+)=("[^"]*"|[^\\s]+)',"")};j["flambe.display._Font.ConfigParser"]=l._Font.ConfigParser;l._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];l._Font.ConfigParser.advance=function(a,b){var g=b.matchedPos();return F.substr(a,g.pos+g.len,a.length)};l._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=l._Font.ConfigParser.advance(b,
a._pairPattern);return new l._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=l._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:l._Font.ConfigParser};l._Font.ConfigPair=function(a,b){this.key=a;this._value=b};
j["flambe.display._Font.ConfigPair"]=l._Font.ConfigPair;l._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];l._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:F.substr(this._value,1,this._value.length-2)},getInt:function(){return r.parseInt(this._value)},__class__:l._Font.ConfigPair};l.Graphics=function(){};j["flambe.display.Graphics"]=l.Graphics;l.Graphics.__name__=["flambe","display","Graphics"];l.Graphics.prototype={__class__:l.Graphics};
l.ImageSprite=function(a){l.Sprite.call(this);this.texture=a};j["flambe.display.ImageSprite"]=l.ImageSprite;l.ImageSprite.__name__=["flambe","display","ImageSprite"];l.ImageSprite.__super__=l.Sprite;l.ImageSprite.prototype=w(l.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:l.ImageSprite});l.Orientation=j["flambe.display.Orientation"]={__ename__:["flambe",
"display","Orientation"],__constructs__:["Portrait","Landscape"]};l.Orientation.Portrait=["Portrait",0];l.Orientation.Portrait.toString=k;l.Orientation.Portrait.__enum__=l.Orientation;l.Orientation.Landscape=["Landscape",1];l.Orientation.Landscape.toString=k;l.Orientation.Landscape.__enum__=l.Orientation;l.TextSprite=function(a,b){null==b&&(b="");this._layout=null;var g=this;l.Sprite.call(this);this._font=a;this._text=b;this._align=l.TextAlign.Left;this._flags|=64;this.wrapWidth=new M.AnimatedFloat(0,
function(){g._flags|=64})};j["flambe.display.TextSprite"]=l.TextSprite;l.TextSprite.__name__=["flambe","display","TextSprite"];l.TextSprite.__super__=l.Sprite;l.TextSprite.prototype=w(l.Sprite.prototype,{onUpdate:function(a){l.Sprite.prototype.onUpdate.call(this,a);this.wrapWidth.update(a)},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value))},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=
64);return a},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=64);return a},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},getNaturalHeight:function(){this.updateLayout();return this._layout.lines*this._font.size},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},draw:function(a){this.updateLayout();this._layout.draw(a,this._align)},__class__:l.TextSprite});l.Texture=
function(){};j["flambe.display.Texture"]=l.Texture;l.Texture.__name__=["flambe","display","Texture"];l.Texture.__interfaces__=[o.Asset];l.Texture.prototype={__class__:l.Texture};e={};e.Key=j["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
e.Key.A=["A",0];e.Key.A.toString=k;e.Key.A.__enum__=e.Key;e.Key.B=["B",1];e.Key.B.toString=k;e.Key.B.__enum__=e.Key;e.Key.C=["C",2];e.Key.C.toString=k;e.Key.C.__enum__=e.Key;e.Key.D=["D",3];e.Key.D.toString=k;e.Key.D.__enum__=e.Key;e.Key.E=["E",4];e.Key.E.toString=k;e.Key.E.__enum__=e.Key;e.Key.F=["F",5];e.Key.F.toString=k;e.Key.F.__enum__=e.Key;e.Key.G=["G",6];e.Key.G.toString=k;e.Key.G.__enum__=e.Key;e.Key.H=["H",7];e.Key.H.toString=k;e.Key.H.__enum__=e.Key;e.Key.I=["I",8];e.Key.I.toString=k;e.Key.I.__enum__=
e.Key;e.Key.J=["J",9];e.Key.J.toString=k;e.Key.J.__enum__=e.Key;e.Key.K=["K",10];e.Key.K.toString=k;e.Key.K.__enum__=e.Key;e.Key.L=["L",11];e.Key.L.toString=k;e.Key.L.__enum__=e.Key;e.Key.M=["M",12];e.Key.M.toString=k;e.Key.M.__enum__=e.Key;e.Key.N=["N",13];e.Key.N.toString=k;e.Key.N.__enum__=e.Key;e.Key.O=["O",14];e.Key.O.toString=k;e.Key.O.__enum__=e.Key;e.Key.P=["P",15];e.Key.P.toString=k;e.Key.P.__enum__=e.Key;e.Key.Q=["Q",16];e.Key.Q.toString=k;e.Key.Q.__enum__=e.Key;e.Key.R=["R",17];e.Key.R.toString=
k;e.Key.R.__enum__=e.Key;e.Key.S=["S",18];e.Key.S.toString=k;e.Key.S.__enum__=e.Key;e.Key.T=["T",19];e.Key.T.toString=k;e.Key.T.__enum__=e.Key;e.Key.U=["U",20];e.Key.U.toString=k;e.Key.U.__enum__=e.Key;e.Key.V=["V",21];e.Key.V.toString=k;e.Key.V.__enum__=e.Key;e.Key.W=["W",22];e.Key.W.toString=k;e.Key.W.__enum__=e.Key;e.Key.X=["X",23];e.Key.X.toString=k;e.Key.X.__enum__=e.Key;e.Key.Y=["Y",24];e.Key.Y.toString=k;e.Key.Y.__enum__=e.Key;e.Key.Z=["Z",25];e.Key.Z.toString=k;e.Key.Z.__enum__=e.Key;e.Key.Number0=
["Number0",26];e.Key.Number0.toString=k;e.Key.Number0.__enum__=e.Key;e.Key.Number1=["Number1",27];e.Key.Number1.toString=k;e.Key.Number1.__enum__=e.Key;e.Key.Number2=["Number2",28];e.Key.Number2.toString=k;e.Key.Number2.__enum__=e.Key;e.Key.Number3=["Number3",29];e.Key.Number3.toString=k;e.Key.Number3.__enum__=e.Key;e.Key.Number4=["Number4",30];e.Key.Number4.toString=k;e.Key.Number4.__enum__=e.Key;e.Key.Number5=["Number5",31];e.Key.Number5.toString=k;e.Key.Number5.__enum__=e.Key;e.Key.Number6=["Number6",
32];e.Key.Number6.toString=k;e.Key.Number6.__enum__=e.Key;e.Key.Number7=["Number7",33];e.Key.Number7.toString=k;e.Key.Number7.__enum__=e.Key;e.Key.Number8=["Number8",34];e.Key.Number8.toString=k;e.Key.Number8.__enum__=e.Key;e.Key.Number9=["Number9",35];e.Key.Number9.toString=k;e.Key.Number9.__enum__=e.Key;e.Key.Numpad0=["Numpad0",36];e.Key.Numpad0.toString=k;e.Key.Numpad0.__enum__=e.Key;e.Key.Numpad1=["Numpad1",37];e.Key.Numpad1.toString=k;e.Key.Numpad1.__enum__=e.Key;e.Key.Numpad2=["Numpad2",38];
e.Key.Numpad2.toString=k;e.Key.Numpad2.__enum__=e.Key;e.Key.Numpad3=["Numpad3",39];e.Key.Numpad3.toString=k;e.Key.Numpad3.__enum__=e.Key;e.Key.Numpad4=["Numpad4",40];e.Key.Numpad4.toString=k;e.Key.Numpad4.__enum__=e.Key;e.Key.Numpad5=["Numpad5",41];e.Key.Numpad5.toString=k;e.Key.Numpad5.__enum__=e.Key;e.Key.Numpad6=["Numpad6",42];e.Key.Numpad6.toString=k;e.Key.Numpad6.__enum__=e.Key;e.Key.Numpad7=["Numpad7",43];e.Key.Numpad7.toString=k;e.Key.Numpad7.__enum__=e.Key;e.Key.Numpad8=["Numpad8",44];e.Key.Numpad8.toString=
k;e.Key.Numpad8.__enum__=e.Key;e.Key.Numpad9=["Numpad9",45];e.Key.Numpad9.toString=k;e.Key.Numpad9.__enum__=e.Key;e.Key.NumpadAdd=["NumpadAdd",46];e.Key.NumpadAdd.toString=k;e.Key.NumpadAdd.__enum__=e.Key;e.Key.NumpadDecimal=["NumpadDecimal",47];e.Key.NumpadDecimal.toString=k;e.Key.NumpadDecimal.__enum__=e.Key;e.Key.NumpadDivide=["NumpadDivide",48];e.Key.NumpadDivide.toString=k;e.Key.NumpadDivide.__enum__=e.Key;e.Key.NumpadEnter=["NumpadEnter",49];e.Key.NumpadEnter.toString=k;e.Key.NumpadEnter.__enum__=
e.Key;e.Key.NumpadMultiply=["NumpadMultiply",50];e.Key.NumpadMultiply.toString=k;e.Key.NumpadMultiply.__enum__=e.Key;e.Key.NumpadSubtract=["NumpadSubtract",51];e.Key.NumpadSubtract.toString=k;e.Key.NumpadSubtract.__enum__=e.Key;e.Key.F1=["F1",52];e.Key.F1.toString=k;e.Key.F1.__enum__=e.Key;e.Key.F2=["F2",53];e.Key.F2.toString=k;e.Key.F2.__enum__=e.Key;e.Key.F3=["F3",54];e.Key.F3.toString=k;e.Key.F3.__enum__=e.Key;e.Key.F4=["F4",55];e.Key.F4.toString=k;e.Key.F4.__enum__=e.Key;e.Key.F5=["F5",56];e.Key.F5.toString=
k;e.Key.F5.__enum__=e.Key;e.Key.F6=["F6",57];e.Key.F6.toString=k;e.Key.F6.__enum__=e.Key;e.Key.F7=["F7",58];e.Key.F7.toString=k;e.Key.F7.__enum__=e.Key;e.Key.F8=["F8",59];e.Key.F8.toString=k;e.Key.F8.__enum__=e.Key;e.Key.F9=["F9",60];e.Key.F9.toString=k;e.Key.F9.__enum__=e.Key;e.Key.F10=["F10",61];e.Key.F10.toString=k;e.Key.F10.__enum__=e.Key;e.Key.F11=["F11",62];e.Key.F11.toString=k;e.Key.F11.__enum__=e.Key;e.Key.F12=["F12",63];e.Key.F12.toString=k;e.Key.F12.__enum__=e.Key;e.Key.F13=["F13",64];e.Key.F13.toString=
k;e.Key.F13.__enum__=e.Key;e.Key.F14=["F14",65];e.Key.F14.toString=k;e.Key.F14.__enum__=e.Key;e.Key.F15=["F15",66];e.Key.F15.toString=k;e.Key.F15.__enum__=e.Key;e.Key.Left=["Left",67];e.Key.Left.toString=k;e.Key.Left.__enum__=e.Key;e.Key.Up=["Up",68];e.Key.Up.toString=k;e.Key.Up.__enum__=e.Key;e.Key.Right=["Right",69];e.Key.Right.toString=k;e.Key.Right.__enum__=e.Key;e.Key.Down=["Down",70];e.Key.Down.toString=k;e.Key.Down.__enum__=e.Key;e.Key.Alt=["Alt",71];e.Key.Alt.toString=k;e.Key.Alt.__enum__=
e.Key;e.Key.Backquote=["Backquote",72];e.Key.Backquote.toString=k;e.Key.Backquote.__enum__=e.Key;e.Key.Backslash=["Backslash",73];e.Key.Backslash.toString=k;e.Key.Backslash.__enum__=e.Key;e.Key.Backspace=["Backspace",74];e.Key.Backspace.toString=k;e.Key.Backspace.__enum__=e.Key;e.Key.CapsLock=["CapsLock",75];e.Key.CapsLock.toString=k;e.Key.CapsLock.__enum__=e.Key;e.Key.Comma=["Comma",76];e.Key.Comma.toString=k;e.Key.Comma.__enum__=e.Key;e.Key.Command=["Command",77];e.Key.Command.toString=k;e.Key.Command.__enum__=
e.Key;e.Key.Control=["Control",78];e.Key.Control.toString=k;e.Key.Control.__enum__=e.Key;e.Key.Delete=["Delete",79];e.Key.Delete.toString=k;e.Key.Delete.__enum__=e.Key;e.Key.End=["End",80];e.Key.End.toString=k;e.Key.End.__enum__=e.Key;e.Key.Enter=["Enter",81];e.Key.Enter.toString=k;e.Key.Enter.__enum__=e.Key;e.Key.Equals=["Equals",82];e.Key.Equals.toString=k;e.Key.Equals.__enum__=e.Key;e.Key.Escape=["Escape",83];e.Key.Escape.toString=k;e.Key.Escape.__enum__=e.Key;e.Key.Home=["Home",84];e.Key.Home.toString=
k;e.Key.Home.__enum__=e.Key;e.Key.Insert=["Insert",85];e.Key.Insert.toString=k;e.Key.Insert.__enum__=e.Key;e.Key.LeftBracket=["LeftBracket",86];e.Key.LeftBracket.toString=k;e.Key.LeftBracket.__enum__=e.Key;e.Key.Minus=["Minus",87];e.Key.Minus.toString=k;e.Key.Minus.__enum__=e.Key;e.Key.PageDown=["PageDown",88];e.Key.PageDown.toString=k;e.Key.PageDown.__enum__=e.Key;e.Key.PageUp=["PageUp",89];e.Key.PageUp.toString=k;e.Key.PageUp.__enum__=e.Key;e.Key.Period=["Period",90];e.Key.Period.toString=k;e.Key.Period.__enum__=
e.Key;e.Key.Quote=["Quote",91];e.Key.Quote.toString=k;e.Key.Quote.__enum__=e.Key;e.Key.RightBracket=["RightBracket",92];e.Key.RightBracket.toString=k;e.Key.RightBracket.__enum__=e.Key;e.Key.Semicolon=["Semicolon",93];e.Key.Semicolon.toString=k;e.Key.Semicolon.__enum__=e.Key;e.Key.Shift=["Shift",94];e.Key.Shift.toString=k;e.Key.Shift.__enum__=e.Key;e.Key.Slash=["Slash",95];e.Key.Slash.toString=k;e.Key.Slash.__enum__=e.Key;e.Key.Space=["Space",96];e.Key.Space.toString=k;e.Key.Space.__enum__=e.Key;e.Key.Tab=
["Tab",97];e.Key.Tab.toString=k;e.Key.Tab.__enum__=e.Key;e.Key.Menu=["Menu",98];e.Key.Menu.toString=k;e.Key.Menu.__enum__=e.Key;e.Key.Search=["Search",99];e.Key.Search.toString=k;e.Key.Search.__enum__=e.Key;e.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=e.Key;a.toString=k;return a};e.KeyboardEvent=function(){this.init(0,null)};j["flambe.input.KeyboardEvent"]=e.KeyboardEvent;e.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];e.KeyboardEvent.prototype={init:function(a,b){this.id=
a;this.key=b},__class__:e.KeyboardEvent};e.MouseButton=j["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};e.MouseButton.Left=["Left",0];e.MouseButton.Left.toString=k;e.MouseButton.Left.__enum__=e.MouseButton;e.MouseButton.Middle=["Middle",1];e.MouseButton.Middle.toString=k;e.MouseButton.Middle.__enum__=e.MouseButton;e.MouseButton.Right=["Right",2];e.MouseButton.Right.toString=k;e.MouseButton.Right.__enum__=e.MouseButton;e.MouseButton.Unknown=
function(a){a=["Unknown",3,a];a.__enum__=e.MouseButton;a.toString=k;return a};e.MouseCursor=j["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};e.MouseCursor.Default=["Default",0];e.MouseCursor.Default.toString=k;e.MouseCursor.Default.__enum__=e.MouseCursor;e.MouseCursor.Button=["Button",1];e.MouseCursor.Button.toString=k;e.MouseCursor.Button.__enum__=e.MouseCursor;e.MouseCursor.None=["None",2];e.MouseCursor.None.toString=k;e.MouseCursor.None.__enum__=
e.MouseCursor;e.MouseEvent=function(){this.init(0,0,0,null)};j["flambe.input.MouseEvent"]=e.MouseEvent;e.MouseEvent.__name__=["flambe","input","MouseEvent"];e.MouseEvent.prototype={init:function(a,b,g,c){this.id=a;this.viewX=b;this.viewY=g;this.button=c},__class__:e.MouseEvent};e.EventSource=j["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};e.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=e.EventSource;a.toString=k;return a};e.EventSource.Touch=
function(a){a=["Touch",1,a];a.__enum__=e.EventSource;a.toString=k;return a};e.PointerEvent=function(){this.init(0,0,0,null,null)};j["flambe.input.PointerEvent"]=e.PointerEvent;e.PointerEvent.__name__=["flambe","input","PointerEvent"];e.PointerEvent.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:e.PointerEvent};e.TouchPoint=function(a){this.id=a;this._source=e.EventSource.Touch(this)};j["flambe.input.TouchPoint"]=e.TouchPoint;
e.TouchPoint.__name__=["flambe","input","TouchPoint"];e.TouchPoint.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:e.TouchPoint};J.FMath=function(){};j["flambe.math.FMath"]=J.FMath;J.FMath.__name__=["flambe","math","FMath"];J.FMath.max=function(a,b){return a>b?a:b};J.FMath.min=function(a,b){return a<b?a:b};J.FMath.clamp=function(a,b,c){return a<b?b:a>c?c:a};J.Matrix=function(){this.identity()};j["flambe.math.Matrix"]=J.Matrix;J.Matrix.__name__=["flambe","math","Matrix"];J.Matrix.multiply=
function(a,b,c){null==c&&(c=new J.Matrix);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=f;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=f;return c};J.Matrix.prototype={clone:function(a){null==a&&(a=new J.Matrix);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;
c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],f=a[d+1];c[d++]=e*this.m00+f*this.m01+this.m02;c[d++]=e*this.m10+f*this.m11+this.m12}},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},translate:function(a,
b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=f},__class__:J.Matrix};J.Rectangle=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};j["flambe.math.Rectangle"]=J.Rectangle;J.Rectangle.__name__=["flambe","math",
"Rectangle"];J.Rectangle.prototype={equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},clone:function(a){null==a&&(a=new J.Rectangle);a.set(this.x,this.y,this.width,this.height);return a},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},set:function(a,b,c,d){this.x=a;this.y=b;this.width=
c;this.height=d},__class__:J.Rectangle};f.BasicAsset=function(){this._disposed=!1};j["flambe.platform.BasicAsset"]=f.BasicAsset;f.BasicAsset.__name__=["flambe","platform","BasicAsset"];f.BasicAsset.__interfaces__=[o.Asset];f.BasicAsset.prototype={onDisposed:function(){null},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},__class__:f.BasicAsset};f.BasicAssetPackLoader=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new q.Promise;this._bytesLoaded=new B.StringMap;
this._pack=new f._BasicAssetPackLoader.BasicAssetPack(b,this);var d=ia.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new B.StringMap,h=0;h<d.length;){var i=d[h];++h;var j=e.get(i.name);null==j&&(j=[],e.set(i.name,j));j.push(i)}this._assetsRemaining=ia.count(e);for(d=function(){return function(a){return function(){return function(){return a.iterator()}}()}}()(e)();d.hasNext();)j=d.next(),j=[j],this.pickBestEntry(j[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,
d)}catch(s){c.handleError(d,"Unexpected error: "+r.string(s))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],f.BasicAssetPackLoader.isAudio(d.format)?c.handleLoad(d,f.DummySound.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(j))}};j["flambe.platform.BasicAssetPackLoader"]=f.BasicAssetPackLoader;f.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];f.BasicAssetPackLoader.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;
default:return!1}};f.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit1(q.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=function(a){return function(){return a.iterator()}}(this._bytesLoaded)();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},
handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files;break;case 14:case 15:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},getAssetFormats:function(){null},loadEntry:function(){null},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=
0;d<c.length;){var e=c[d];++d;for(var f=0;f<a.length;){var h=a[f];++f;if(h.format==e){b(h);return}}}b(null)})},onDisposed:function(){},__class__:f.BasicAssetPackLoader};f._BasicAssetPackLoader={};f._BasicAssetPackLoader.BasicAssetPack=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new B.StringMap;this.sounds=new B.StringMap;this.files=new B.StringMap};j["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=f._BasicAssetPackLoader.BasicAssetPack;f._BasicAssetPackLoader.BasicAssetPack.__name__=
["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];f._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[o.AssetPack];f._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=function(a){return function(){return a.iterator()}}(this.textures)();a.hasNext();)a.next().dispose();this.textures=null;for(a=function(a){return function(){return a.iterator()}}(this.sounds)();a.hasNext();)a.next().dispose();
this.sounds=null;for(a=function(a){return function(){return a.iterator()}}(this.files)();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw q.Strings.withFields("Missing file",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw q.Strings.withFields("Missing sound",["name",a]);return c},getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);
if(null==c&&b)throw q.Strings.withFields("Missing texture",["name",a]);return c},__class__:f._BasicAssetPackLoader.BasicAssetPack};f.BasicFile=function(a){f.BasicAsset.call(this);this._content=a};j["flambe.platform.BasicFile"]=f.BasicFile;f.BasicFile.__name__=["flambe","platform","BasicFile"];f.BasicFile.__interfaces__=[o.File];f.BasicFile.__super__=f.BasicAsset;f.BasicFile.prototype=w(f.BasicAsset.prototype,{onDisposed:function(){this._content=null},toString:function(){return this._content},__class__:f.BasicFile});
A={KeyboardSystem:function(){}};j["flambe.subsystem.KeyboardSystem"]=A.KeyboardSystem;A.KeyboardSystem.__name__=["flambe","subsystem","KeyboardSystem"];A.KeyboardSystem.prototype={__class__:A.KeyboardSystem};f.BasicKeyboard=function(){this.down=new q.Signal1;this.up=new q.Signal1;this.backButton=new q.Signal0;this._keyStates=new B.IntMap};j["flambe.platform.BasicKeyboard"]=f.BasicKeyboard;f.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];f.BasicKeyboard.__interfaces__=[A.KeyboardSystem];
f.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),f.BasicKeyboard._sharedEvent.init(f.BasicKeyboard._sharedEvent.id+1,f.KeyCodes.toKey(a)),this.up.emit1(f.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),f.BasicKeyboard._sharedEvent.init(f.BasicKeyboard._sharedEvent.id+1,f.KeyCodes.toKey(a)),this.down.emit1(f.BasicKeyboard._sharedEvent));
return!0},__class__:f.BasicKeyboard};A.MouseSystem=function(){};j["flambe.subsystem.MouseSystem"]=A.MouseSystem;A.MouseSystem.__name__=["flambe","subsystem","MouseSystem"];f.BasicMouse=function(a){this._pointer=a;this._source=e.EventSource.Mouse(f.BasicMouse._sharedEvent);this.down=new q.Signal1;this.move=new q.Signal1;this.up=new q.Signal1;this.scroll=new q.Signal1;this._y=this._x=0;this._cursor=e.MouseCursor.Default;this._buttonStates=new B.IntMap};j["flambe.platform.BasicMouse"]=f.BasicMouse;f.BasicMouse.__name__=
["flambe","platform","BasicMouse"];f.BasicMouse.__interfaces__=[A.MouseSystem];f.BasicMouse.prototype={prepare:function(a,b,c){this._x=a;this._y=b;f.BasicMouse._sharedEvent.init(f.BasicMouse._sharedEvent.id+1,a,b,c)},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(c);return!0},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,f.MouseCodes.toButton(c)),this._pointer.submitUp(a,b,this._source),
this.up.emit1(f.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(f.BasicMouse._sharedEvent)},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,f.MouseCodes.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit1(f.BasicMouse._sharedEvent))},__class__:f.BasicMouse};A.PointerSystem=function(){};j["flambe.subsystem.PointerSystem"]=A.PointerSystem;
A.PointerSystem.__name__=["flambe","subsystem","PointerSystem"];A.PointerSystem.prototype={__class__:A.PointerSystem};f.BasicPointer=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new q.Signal1;this.move=new q.Signal1;this.up=new q.Signal1;this._x=a;this._y=b;this._isDown=c};j["flambe.platform.BasicPointer"]=f.BasicPointer;f.BasicPointer.__name__=["flambe","platform","BasicPointer"];f.BasicPointer.__interfaces__=[A.PointerSystem];f.BasicPointer.prototype={prepare:function(a,
b,c,d){this._x=a;this._y=b;f.BasicPointer._sharedEvent.init(f.BasicPointer._sharedEvent.id+1,a,b,c,d)},submitUp:function(a,b,c){if(this._isDown){this._isDown=!1;var d=[],e=l.Sprite.hitTest(D.root,a,b);if(null!=e){var h=e.owner;do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._pointerUp,null!=i&&(i.emit1(f.BasicPointer._sharedEvent),f.BasicPointer._sharedEvent._stopped))return;this.up.emit1(f.BasicPointer._sharedEvent)}},
submitMove:function(a,b,c){var d=[],e=l.Sprite.hitTest(D.root,a,b);if(null!=e){var h=e.owner;do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._pointerMove,null!=i&&(i.emit1(f.BasicPointer._sharedEvent),f.BasicPointer._sharedEvent._stopped))return;this.move.emit1(f.BasicPointer._sharedEvent)},submitDown:function(a,b,c){if(!this._isDown){this._isDown=!0;var d=[],e=l.Sprite.hitTest(D.root,a,b);if(null!=e){var h=e.owner;
do{var i=h._compMap.Sprite_1;null!=i&&d.push(i);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(i=d[a],++a,i=i._pointerDown,null!=i&&(i.emit1(f.BasicPointer._sharedEvent),f.BasicPointer._sharedEvent._stopped))return;this.down.emit1(f.BasicPointer._sharedEvent)}},__class__:f.BasicPointer};A.TouchSystem=function(){};j["flambe.subsystem.TouchSystem"]=A.TouchSystem;A.TouchSystem.__name__=["flambe","subsystem","TouchSystem"];A.TouchSystem.prototype={__class__:A.TouchSystem};f.BasicTouch=
function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new B.IntMap;this._points=[];this.down=new q.Signal1;this.move=new q.Signal1;this.up=new q.Signal1};j["flambe.platform.BasicTouch"]=f.BasicTouch;f.BasicTouch.__name__=["flambe","platform","BasicTouch"];f.BasicTouch.__interfaces__=[A.TouchSystem];f.BasicTouch.prototype={submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),F.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=
null,this._pointer.submitUp(b,c,d._source)),this.up.emit1(d))},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit1(a))},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new e.TouchPoint(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit1(d)}},get_supported:function(){return!0},
__class__:f.BasicTouch};K.Sound=function(){};j["flambe.sound.Sound"]=K.Sound;K.Sound.__name__=["flambe","sound","Sound"];K.Sound.__interfaces__=[o.Asset];K.Sound.prototype={__class__:K.Sound};f.DummySound=function(){f.BasicAsset.call(this);this._playback=new f.DummyPlayback(this)};j["flambe.platform.DummySound"]=f.DummySound;f.DummySound.__name__=["flambe","platform","DummySound"];f.DummySound.__interfaces__=[K.Sound];f.DummySound.getInstance=function(){null==f.DummySound._instance&&(f.DummySound._instance=
new f.DummySound);return f.DummySound._instance};f.DummySound.__super__=f.BasicAsset;f.DummySound.prototype=w(f.BasicAsset.prototype,{loop:function(){return this._playback},play:function(){return this._playback},__class__:f.DummySound});K.Playback=function(){};j["flambe.sound.Playback"]=K.Playback;K.Playback.__name__=["flambe","sound","Playback"];K.Playback.__interfaces__=[q.Disposable];K.Playback.prototype={__class__:K.Playback};f.DummyPlayback=function(a){this._sound=a;this.volume=new M.AnimatedFloat(0)};
j["flambe.platform.DummyPlayback"]=f.DummyPlayback;f.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];f.DummyPlayback.__interfaces__=[K.Playback];f.DummyPlayback.prototype={dispose:function(){},get_ended:function(){return!0},__class__:f.DummyPlayback};f.DummyTouch=function(){this.down=new q.Signal1;this.move=new q.Signal1;this.up=new q.Signal1};j["flambe.platform.DummyTouch"]=f.DummyTouch;f.DummyTouch.__name__=["flambe","platform","DummyTouch"];f.DummyTouch.__interfaces__=[A.TouchSystem];
f.DummyTouch.prototype={get_supported:function(){return!1},__class__:f.DummyTouch};f.EventGroup=function(){this._entries=[]};j["flambe.platform.EventGroup"]=f.EventGroup;f.EventGroup.__name__=["flambe","platform","EventGroup"];f.EventGroup.__interfaces__=[q.Disposable];f.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,
b,function(a){d.dispose();c(a)})},addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new f._EventGroup.Entry(a,b,c))},__class__:f.EventGroup};f._EventGroup={};f._EventGroup.Entry=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};j["flambe.platform._EventGroup.Entry"]=f._EventGroup.Entry;f._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];f._EventGroup.Entry.prototype={__class__:f._EventGroup.Entry};f.InternalGraphics=function(){};j["flambe.platform.InternalGraphics"]=
f.InternalGraphics;f.InternalGraphics.__name__=["flambe","platform","InternalGraphics"];f.InternalGraphics.__interfaces__=[l.Graphics];f.InternalGraphics.prototype={__class__:f.InternalGraphics};f.KeyCodes=function(){};j["flambe.platform.KeyCodes"]=f.KeyCodes;f.KeyCodes.__name__=["flambe","platform","KeyCodes"];f.KeyCodes.toKey=function(a){switch(a){case 65:return e.Key.A;case 66:return e.Key.B;case 67:return e.Key.C;case 68:return e.Key.D;case 69:return e.Key.E;case 70:return e.Key.F;case 71:return e.Key.G;
case 72:return e.Key.H;case 73:return e.Key.I;case 74:return e.Key.J;case 75:return e.Key.K;case 76:return e.Key.L;case 77:return e.Key.M;case 78:return e.Key.N;case 79:return e.Key.O;case 80:return e.Key.P;case 81:return e.Key.Q;case 82:return e.Key.R;case 83:return e.Key.S;case 84:return e.Key.T;case 85:return e.Key.U;case 86:return e.Key.V;case 87:return e.Key.W;case 88:return e.Key.X;case 89:return e.Key.Y;case 90:return e.Key.Z;case 48:return e.Key.Number0;case 49:return e.Key.Number1;case 50:return e.Key.Number2;
case 51:return e.Key.Number3;case 52:return e.Key.Number4;case 53:return e.Key.Number5;case 54:return e.Key.Number6;case 55:return e.Key.Number7;case 56:return e.Key.Number8;case 57:return e.Key.Number9;case 96:return e.Key.Numpad0;case 97:return e.Key.Numpad1;case 98:return e.Key.Numpad2;case 99:return e.Key.Numpad3;case 100:return e.Key.Numpad4;case 101:return e.Key.Numpad5;case 102:return e.Key.Numpad6;case 103:return e.Key.Numpad7;case 104:return e.Key.Numpad8;case 105:return e.Key.Numpad9;case 107:return e.Key.NumpadAdd;
case 110:return e.Key.NumpadDecimal;case 111:return e.Key.NumpadDivide;case 108:return e.Key.NumpadEnter;case 106:return e.Key.NumpadMultiply;case 109:return e.Key.NumpadSubtract;case 112:return e.Key.F1;case 113:return e.Key.F2;case 114:return e.Key.F3;case 115:return e.Key.F4;case 116:return e.Key.F5;case 117:return e.Key.F6;case 118:return e.Key.F7;case 119:return e.Key.F8;case 120:return e.Key.F9;case 121:return e.Key.F10;case 122:return e.Key.F11;case 123:return e.Key.F12;case 37:return e.Key.Left;
case 38:return e.Key.Up;case 39:return e.Key.Right;case 40:return e.Key.Down;case 18:return e.Key.Alt;case 192:return e.Key.Backquote;case 220:return e.Key.Backslash;case 8:return e.Key.Backspace;case 20:return e.Key.CapsLock;case 188:return e.Key.Comma;case 15:return e.Key.Command;case 17:return e.Key.Control;case 46:return e.Key.Delete;case 35:return e.Key.End;case 13:return e.Key.Enter;case 187:return e.Key.Equals;case 27:return e.Key.Escape;case 36:return e.Key.Home;case 45:return e.Key.Insert;
case 219:return e.Key.LeftBracket;case 189:return e.Key.Minus;case 34:return e.Key.PageDown;case 33:return e.Key.PageUp;case 190:return e.Key.Period;case 222:return e.Key.Quote;case 221:return e.Key.RightBracket;case 186:return e.Key.Semicolon;case 16:return e.Key.Shift;case 191:return e.Key.Slash;case 32:return e.Key.Space;case 9:return e.Key.Tab;case 16777234:return e.Key.Menu;case 16777247:return e.Key.Search}return e.Key.Unknown(a)};f.MainLoop=function(){this._tickables=[]};j["flambe.platform.MainLoop"]=
f.MainLoop;f.MainLoop.__name__=["flambe","platform","MainLoop"];f.MainLoop.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_5;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(var d=a.firstComponent;null!=d;)c=d.next,d.onUpdate(b),d=c;for(d=a.firstChild;null!=d;)c=d.next,f.MainLoop.updateEntity(d,b),d=c};f.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),l.Sprite.render(D.root,b),a.didRender())},
update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}D.volume.update(a);f.MainLoop.updateEntity(D.root,a)}},__class__:f.MainLoop};f.MouseCodes=function(){};j["flambe.platform.MouseCodes"]=f.MouseCodes;f.MouseCodes.__name__=["flambe","platform","MouseCodes"];f.MouseCodes.toButton=function(a){switch(a){case 0:return e.MouseButton.Left;case 1:return e.MouseButton.Middle;case 2:return e.MouseButton.Right}return e.MouseButton.Unknown(a)};
f.Renderer=function(){};j["flambe.platform.Renderer"]=f.Renderer;f.Renderer.__name__=["flambe","platform","Renderer"];f.Renderer.prototype={__class__:f.Renderer};f.Tickable=function(){};j["flambe.platform.Tickable"]=f.Tickable;f.Tickable.__name__=["flambe","platform","Tickable"];f.Tickable.prototype={__class__:f.Tickable};f.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};j["flambe.platform.html.CanvasGraphics"]=f.html.CanvasGraphics;f.html.CanvasGraphics.__name__=
["flambe","platform","html","CanvasGraphics"];f.html.CanvasGraphics.__interfaces__=[f.InternalGraphics];f.html.CanvasGraphics.prototype={onResize:function(){},didRender:function(){},willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=
b},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},drawSubImage:function(a,b,c,d,e,f,h){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,
b,c,d,e,f,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,d|0,e|0,f|0,h|0,b|0,c|0,f|0,h|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e,f)},save:function(){this._canvasCtx.save()},
__class__:f.html.CanvasGraphics};f.html.CanvasRenderer=function(a){this.graphics=new f.html.CanvasGraphics(a);D.hasGPU.set__(!0)};j["flambe.platform.html.CanvasRenderer"]=f.html.CanvasRenderer;f.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];f.html.CanvasRenderer.__interfaces__=[f.Renderer];f.html.CanvasRenderer.prototype={didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},createCompressedTexture:function(){return null},getCompressedTextureFormats:function(){return[]},
createEmptyTexture:function(a,b){return new f.html.CanvasTexture(f.html.HtmlUtil.createEmptyCanvas(a,b))},createTexture:function(a){return new f.html.CanvasTexture(f.html.CanvasRenderer.CANVAS_TEXTURES?f.html.HtmlUtil.createCanvas(a):a)},__class__:f.html.CanvasRenderer};f.html.CanvasTexture=function(a){this.pattern=this._graphics=null;f.BasicAsset.call(this);this.image=a};j["flambe.platform.html.CanvasTexture"]=f.html.CanvasTexture;f.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];
f.html.CanvasTexture.__interfaces__=[l.Texture];f.html.CanvasTexture.__super__=f.BasicAsset;f.html.CanvasTexture.prototype=w(f.BasicAsset.prototype,{onDisposed:function(){this.image.dispose&&this.image.dispose();this._graphics=this.pattern=this.image=null},getContext2d:function(){L.__instanceof(this.image,HTMLCanvasElement)||(this.image=f.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new f.html._CanvasTexture.InternalGraphics(this));
return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},__class__:f.html.CanvasTexture});f.html._CanvasTexture={};f.html._CanvasTexture.InternalGraphics=function(a){f.html.CanvasGraphics.call(this,a.image);this._renderTarget=a};j["flambe.platform.html._CanvasTexture.InternalGraphics"]=f.html._CanvasTexture.InternalGraphics;f.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];f.html._CanvasTexture.InternalGraphics.__super__=
f.html.CanvasGraphics;f.html._CanvasTexture.InternalGraphics.prototype=w(f.html.CanvasGraphics.prototype,{fillRect:function(a,b,c,d,e){f.html.CanvasGraphics.prototype.fillRect.call(this,a,b,c,d,e);this._renderTarget.pattern=null},drawSubImage:function(a,b,c,d,e,h,i){f.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,c,d,e,h,i);this._renderTarget.pattern=null},drawImage:function(a,b,c){f.html.CanvasGraphics.prototype.drawImage.call(this,a,b,c);this._renderTarget.pattern=null},__class__:f.html._CanvasTexture.InternalGraphics});
f.html.HtmlAssetPackLoader=function(a,b){f.BasicAssetPackLoader.call(this,a,b)};j["flambe.platform.html.HtmlAssetPackLoader"]=f.html.HtmlAssetPackLoader;f.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];f.html.HtmlAssetPackLoader.detectImageFormats=function(a){var b=[o.AssetFormat.PNG,o.AssetFormat.JPG,o.AssetFormat.GIF],c=2;U.delay(function(){b.unshift(o.AssetFormat.WEBP);--c;0==c&&a(b)},90);U.delay(function(){b.unshift(o.AssetFormat.JXR);--c;0==c&&a(b)},100)};
f.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=x.document.createElement("audio");if(null==a||null==v(a,a.canPlayType))return[];var b=new $("\\b(iPhone|iPod|iPad|Android)\\b",""),c=x.window.navigator.userAgent;if(!f.html.WebAudioSound.get_supported()&&b.match(c))return[];for(var b=[{format:o.AssetFormat.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:o.AssetFormat.MP3,mimeType:"audio/mpeg"},{format:o.AssetFormat.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:o.AssetFormat.OGG,mimeType:"audio/ogg; codecs=vorbis"},
{format:o.AssetFormat.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var h="";try{h=a.canPlayType(e.mimeType)}catch(i){}""!=h&&c.push(e.format)}return c};f.html.HtmlAssetPackLoader.detectArchiveFormats=function(){return[o.AssetFormat.ZIP,o.AssetFormat.TAR]};f.html.HtmlAssetPackLoader.supportsBlob=function(){if(f.html.HtmlAssetPackLoader._detectBlobSupport){if(!f.html.HtmlAssetPackLoader.verifyBlobBrowserCompatibility())return f.html.HtmlAssetPackLoader._URL=null,f.html.HtmlAssetPackLoader._detectBlobSupport=
!1;f.html.HtmlAssetPackLoader._detectBlobSupport=!1;var a=new XMLHttpRequest;a.open("GET",".",!0);a.responseType="blob";if(""!=a.responseType&&"blob"!=a.responseType)return!1;f.html.HtmlAssetPackLoader._URL=f.html.HtmlUtil.loadExtension("URL").value}return null!=f.html.HtmlAssetPackLoader._URL&&null!=f.html.HtmlAssetPackLoader._URL.createObjectURL};f.html.HtmlAssetPackLoader.verifyBlobBrowserCompatibility=function(){return-1!=x.window.navigator.userAgent.toLowerCase().indexOf("silk")||-1!=x.window.navigator.userAgent.toLowerCase().indexOf("applewebkit/534.30")||
-1!=x.window.navigator.userAgent.toLowerCase().indexOf("applewebkit/535.19")||-1!=x.window.navigator.userAgent.toLowerCase().indexOf("IEMobile/10.0")||-1!=x.window.navigator.userAgent.toLowerCase().indexOf("IEMobile/9.0")?!1:!0};f.html.HtmlAssetPackLoader.__super__=f.BasicAssetPackLoader;f.html.HtmlAssetPackLoader.prototype=w(f.BasicAssetPackLoader.prototype,{download:function(a,b,c,d){var e=this,f=new XMLHttpRequest,h=0,i=function(){h=Date.now();f.open("GET",a,!0);f.responseType=c;""==f.responseType&&
(f.responseType="arraybuffer");f.send()},j=0;if("undefined"!=typeof f.onprogress){var l=4;f.onprogress=function(a){h=Date.now();e.handleProgress(b,a.loaded)};j=x.window.setInterval(function(){1<=f.readyState&&5E3<Date.now()-h&&(f.abort(),--l,0<l?i():(x.window.clearInterval(j),e.handleError(b,"Request timed out")))},1E3)}f.onload=function(){x.window.clearInterval(j);var a=f.response;null==a?a=f.responseText:"blob"==c&&"arraybuffer"==f.responseType&&(a=new Blob([f.response]));d(a)};f.onerror=function(){x.window.clearInterval(j);
e.handleError(b,"Failed to load asset: error #"+f.status)};i();return f},getAssetFormats:function(a){var b=this;null==f.html.HtmlAssetPackLoader._supportedFormats&&(f.html.HtmlAssetPackLoader._supportedFormats=new q.Promise,f.html.HtmlAssetPackLoader.detectImageFormats(function(a){f.html.HtmlAssetPackLoader._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(f.html.HtmlAssetPackLoader.detectAudioFormats()).concat(f.html.HtmlAssetPackLoader.detectArchiveFormats()).concat([o.AssetFormat.Data]))}));
f.html.HtmlAssetPackLoader._supportedFormats.get(a)},getArchiveEntryData:function(a,b){var c="",d=o.Manifest.inferFormat(a.fileName),e="",e="";0<a.fileName.indexOf("/")?e=a.fileName.substr("/"==a.fileName.charAt(0)?1:0,a.fileName.length):(e=F.substr(b.name,0<b.name.lastIndexOf("/")?b.name.lastIndexOf("/")+1:0,b.name.length),e=e+"/"+r.string(a.fileName));switch(d[1]){case 2:c="image/png";break;case 3:c="image/jpeg";break;case 1:c="image/vnd.ms-photo";break;case 4:c="image/gif";break;case 0:c="image/webp";
break;case 9:c="audio/mp4";break;case 8:c="audio/mpeg";break;case 11:case 10:c="audio/ogg";break;case 12:c="audio/wave";break;case 14:c="application/zip";break;case 5:case 6:case 7:c="application/octet-stream";break;case 15:c="application/x-tar";break;case 13:c=""}""!=c&&(e=q.Strings.removeFileExtension(e));return{type:c,format:d,name:e}},loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d=x.document.createElement("img"),e=new f.EventGroup;e.addDisposingListener(d,
"load",function(){f.html.HtmlAssetPackLoader.supportsBlob()&&f.html.HtmlAssetPackLoader._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTexture(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});f.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"blob",function(a){d.src=f.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",
function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(f.html.WebAudioSound.get_supported())this.download(a,b,"arraybuffer",function(a){f.html.WebAudioSound.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new f.html.WebAudioSound(a))},function(){c.handleLoad(b,f.DummySound.getInstance())})});else{var h=x.document.createElement("audio");h.preload="auto";var i=++f.html.HtmlAssetPackLoader._mediaRefCount;
null==f.html.HtmlAssetPackLoader._mediaElements&&(f.html.HtmlAssetPackLoader._mediaElements=new B.IntMap);f.html.HtmlAssetPackLoader._mediaElements.set(i,h);e=new f.EventGroup;e.addDisposingListener(h,"canplaythrough",function(){f.html.HtmlAssetPackLoader._mediaElements.remove(i);c.handleLoad(b,new f.html.HtmlSound(h))});e.addDisposingListener(h,"error",function(){f.html.HtmlAssetPackLoader._mediaElements.remove(i);var a=h.error.code;3==a||4==a?c.handleLoad(b,f.DummySound.getInstance()):c.handleError(b,
"Failed to load audio: "+h.error.code)});e.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new f.BasicFile(a))});break;case 14:f.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"arraybuffer",function(a){for(var a=z.Bytes.ofData(new Uint8Array(a)),d,a=(new t.Reader(new z.BytesInput(a))).read().iterator();a.hasNext();){var e=
a.next();d=q.Strings.getUrlExtension(e.fileName);if("."==e.fileName.charAt(0)||0<=e.fileName.indexOf("/."))d="";if(!(""==d||null==d)){c._assetsRemaining+=1;d=c.promise;d.set_total(d._total+e.dataSize);d=c.getArchiveEntryData(e,b);var h=new Uint8Array(e.data.b),h=new Blob([h.buffer],{type:d.type});d.format==o.AssetFormat.Data&&(h=new Blob([t.Reader.unzip(e)],{type:d.type}));h=f.html.HtmlAssetPackLoader._URL.createObjectURL(h);e=c.manifest.add(d.name,e.fileName,e.dataSize,d.format);c.loadEntry(h,e)}}c.handleLoad(b,
new f.BasicFile(""))}):null;break;case 15:f.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"arraybuffer",function(a){for(var a=z.Bytes.ofData(new Uint8Array(a)),d,a=(new ea.Reader(new z.BytesInput(a))).read().iterator();a.hasNext();){var e=a.next();d=q.Strings.getUrlExtension(e.fileName);if("."==e.fileName.charAt(0)||0<=e.fileName.indexOf("/."))d="";if(!(""==d||null==d)){c._assetsRemaining+=1;d=c.promise;d.set_total(d._total+e.fileSize);d=c.getArchiveEntryData(e,b);var h=new Uint8Array(e.data.b),
h=new Blob([h.buffer],{type:d.type});d.format==o.AssetFormat.Data&&(h=new Blob([e.data],{type:d.type}));h=f.html.HtmlAssetPackLoader._URL.createObjectURL(h);e=c.manifest.add(d.name,e.fileName,e.fileSize,d.format);c.loadEntry(h,e)}}c.handleLoad(b,new f.BasicFile(""))}):null}},__class__:f.html.HtmlAssetPackLoader});f.html.HtmlMouse=function(a,b){f.BasicMouse.call(this,a);this._canvas=b};j["flambe.platform.html.HtmlMouse"]=f.html.HtmlMouse;f.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];
f.html.HtmlMouse.__super__=f.BasicMouse;f.html.HtmlMouse.prototype=w(f.BasicMouse.prototype,{__class__:f.html.HtmlMouse});f.html.HtmlSound=function(a){f.BasicAsset.call(this);this.audioElement=a};j["flambe.platform.html.HtmlSound"]=f.html.HtmlSound;f.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];f.html.HtmlSound.__interfaces__=[K.Sound];f.html.HtmlSound.__super__=f.BasicAsset;f.html.HtmlSound.prototype=w(f.BasicAsset.prototype,{onDisposed:function(){this.audioElement.dispose&&this.audioElement.dispose();
this.audioElement=null},loop:function(a){null==a&&(a=1);return new f.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new f.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:f.html.HtmlSound});f.html._HtmlSound={};f.html._HtmlSound.HtmlPlayback=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=x.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new M.AnimatedFloat(b,function(){d.updateVolume()});
this.updateVolume();this.playAudio();D.hidden._value&&this.set_paused(!0)};j["flambe.platform.html._HtmlSound.HtmlPlayback"]=f.html._HtmlSound.HtmlPlayback;f.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];f.html._HtmlSound.HtmlPlayback.__interfaces__=[f.Tickable,K.Playback];f.html._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=D.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();
this._tickableAdded||(f.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=D.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=D.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),
this._hideBinding.dispose(),!0):!1},get_ended:function(){return this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},__class__:f.html._HtmlSound.HtmlPlayback};A.StageSystem=function(){};j["flambe.subsystem.StageSystem"]=A.StageSystem;A.StageSystem.__name__=["flambe","subsystem","StageSystem"];f.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new q.Signal0;this.scaleFactor=f.html.HtmlStage.computeScaleFactor();
1!=this.scaleFactor&&(f.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),f.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));f.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(x.window.addEventListener("orientationchange",function(){f.html.HtmlUtil.callLater(v(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());x.window.addEventListener("resize",v(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new q.Value(null);
null!=x.window.orientation&&(x.window.addEventListener("orientationchange",v(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new q.Value(!1);f.html.HtmlUtil.addVendorListener(x.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};j["flambe.platform.html.HtmlStage"]=f.html.HtmlStage;f.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];f.html.HtmlStage.__interfaces__=[A.StageSystem];f.html.HtmlStage.computeScaleFactor=
function(){var a=x.window.devicePixelRatio;null==a&&(a=1);var b=x.document.createElement("canvas").getContext("2d"),b=f.html.HtmlUtil.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=x.window.screen.height;return 1136<a*x.window.screen.width||1136<a*b?1:a};f.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==f.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],x.document).value)},onOrientationChange:function(){this.orientation.set__(f.html.HtmlUtil.orientation(x.window.orientation))},
hideMobileBrowser:function(){var a=this,b=x.document.documentElement.style;b.height=x.window.innerHeight+100+"px";b.width=x.window.innerWidth+"px";b.overflow="visible";f.html.HtmlUtil.callLater(function(){f.html.HtmlUtil.hideMobileBrowser();f.html.HtmlUtil.callLater(function(){b.height=x.window.innerHeight+"px";a.onWindowResize(null)},100)})},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=
d|0;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:f.html.HtmlStage};f.html.HtmlUtil=function(){};j["flambe.platform.html.HtmlUtil"]=f.html.HtmlUtil;f.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];f.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);x.window.setTimeout(a,
b)};f.html.HtmlUtil.hideMobileBrowser=function(){x.window.scrollTo(1,0)};f.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=x.window);var c=R.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+F.substr(a,1,null),d=0,e=f.html.HtmlUtil.VENDOR_PREFIXES;d<e.length;){var h=e[d];++d;var i=h+c,j=R.field(b,i);if(null!=j)return{prefix:h,field:i,value:j}}return{prefix:null,field:null,value:null}};f.html.HtmlUtil.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=
a[c];++c;d=f.html.HtmlUtil.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};f.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=x.window);var c=f.html.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};f.html.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=f.html.HtmlUtil.VENDOR_PREFIXES;d<e.length;){var h=e[d];++d;a.setProperty("-"+h+"-"+b,c)}a.setProperty(b,c)};f.html.HtmlUtil.addVendorListener=function(a,b,c,d){for(var e=
0,h=f.html.HtmlUtil.VENDOR_PREFIXES;e<h.length;){var i=h[e];++e;a.addEventListener(i+b,c,d)}a.addEventListener(b,c,d)};f.html.HtmlUtil.orientation=function(a){switch(a){case -90:case 90:return l.Orientation.Landscape;default:return l.Orientation.Portrait}};f.html.HtmlUtil.createEmptyCanvas=function(a,b){var c=x.document.createElement("canvas");c.width=a;c.height=b;return c};f.html.HtmlUtil.createCanvas=function(a){var b=f.html.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();
c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};f.html.HtmlUtil.detectSlowDriver=function(a){if(0<=x.navigator.platform.indexOf("Win")&&null!=x.window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};f.html.HtmlUtil.fixAndroidMath=function(){if(0<=x.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=
function(a){return 0==a?1:b(a)}}};f.html.WebAudioSound=function(a){f.BasicAsset.call(this);this.buffer=a};j["flambe.platform.html.WebAudioSound"]=f.html.WebAudioSound;f.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];f.html.WebAudioSound.__interfaces__=[K.Sound];f.html.WebAudioSound.get_supported=function(){if(f.html.WebAudioSound._detectSupport){f.html.WebAudioSound._detectSupport=!1;var a=f.html.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(f.html.WebAudioSound.ctx=
new a,f.html.WebAudioSound.gain=null!=f.html.WebAudioSound.ctx.createGainNode?f.html.WebAudioSound.ctx.createGainNode():f.html.WebAudioSound.ctx.createGain(),f.html.WebAudioSound.gain.connect(f.html.WebAudioSound.ctx.destination),D.volume.watch(function(a){f.html.WebAudioSound.gain.gain.value=a}))}return null!=f.html.WebAudioSound.ctx};f.html.WebAudioSound.__super__=f.BasicAsset;f.html.WebAudioSound.prototype=w(f.BasicAsset.prototype,{onDisposed:function(){this.buffer=null},get_duration:function(){return this.buffer.duration},
loop:function(a){null==a&&(a=1);return new f.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new f.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:f.html.WebAudioSound});f.html._WebAudioSound={};f.html._WebAudioSound.WebAudioPlayback=function(a,b,c){var d=this;this._sound=a;this._head=f.html.WebAudioSound.gain;this._sourceNode=f.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;null!=this._sourceNode.noteOn?
this._sourceNode.noteOn(0):this._sourceNode.start(0);this.playAudio();this.volume=new M.AnimatedFloat(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);D.hidden._value&&this.set_paused(!0)};j["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=f.html._WebAudioSound.WebAudioPlayback;f.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];f.html._WebAudioSound.WebAudioPlayback.__interfaces__=[f.Tickable,K.Playback];f.html._WebAudioSound.WebAudioPlayback.prototype=
{playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=f.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(f.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=D.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);
this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=null!=f.html.WebAudioSound.ctx.createGainNode?f.html.WebAudioSound.ctx.createGainNode():f.html.WebAudioSound.ctx.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0);null!=this._sourceNode&&(this._sourceNode.disconnect(),this._sourceNode=null);null!=this._gainNode&&(this._gainNode.disconnect(),this._gainNode=null);this._tickableAdded=!1;null!=this._hideBinding&&(this._hideBinding.dispose(),
this._hideBinding=null)},update:function(a){this.volume.update(a);return 0<=this._pausedAt||null==this._sourceNode||3==this._sourceNode.playbackState?(this._tickableAdded=!1,null!=this._hideBinding&&this._hideBinding.dispose(),!0):!1},get_position:function(){return null==this._sourceNode||3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(f.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return null==
this._sourceNode?!0:3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},__class__:f.html._WebAudioSound.WebAudioPlayback};f.html.WebGLBatcher=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=
this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,1);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawImageShader=new f.shader.DrawImageGL(a);this._drawPatternShader=new f.shader.DrawPatternGL(a);this._fillRectShader=new f.shader.FillRectGL(a);this.resize(16)};j["flambe.platform.html.WebGLBatcher"]=
f.html.WebGLBatcher;f.html.WebGLBatcher.__name__=["flambe","platform","html","WebGLBatcher"];f.html.WebGLBatcher.prototype={bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a._width,a._height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*
a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,
1);break;case 2:this._gl.blendFunc(0,770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.nativeTexture),this._currentTexture=this._lastTexture);
this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);this._lastShader==this._drawPatternShader&&this._drawPatternShader.setMaxUV(this._lastTexture.maxU,this._lastTexture.maxV);this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=
b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},prepareFillRect:function(a,b,c){return this.prepareQuad(6,
a,b,c,this._fillRectShader)},prepareDrawImage:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawImageShader)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},bindFramebuffer:function(a){a!=this._lastRenderTarget&&(this.flush(),this.bindRenderTarget(a))},deleteTexture:function(a){a==this._lastTexture&&(this.flush(),
this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},didRender:function(){this.flush()},willRender:function(){},resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},__class__:f.html.WebGLBatcher};f.html.WebGLGraphics=function(a,b){this._inverseProjection=this._stateList=null;null==f.html.WebGLGraphics._scratchQuadArray&&
(f.html.WebGLGraphics._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};j["flambe.platform.html.WebGLGraphics"]=f.html.WebGLGraphics;f.html.WebGLGraphics.__name__=["flambe","platform","html","WebGLGraphics"];f.html.WebGLGraphics.__interfaces__=[f.InternalGraphics];f.html.WebGLGraphics.prototype={transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=f.html.WebGLGraphics._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,
8,e);return e},onResize:function(a,b){this._stateList=new f.html._WebGLGraphics.DrawingState;var c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new J.Matrix;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},didRender:function(){this._batcher.didRender()},willRender:function(){this._batcher.willRender()},applyScissor:function(a,b,c,d){var e=this._stateList,h=f.html.WebGLGraphics._scratchQuadArray;h[0]=a;h[1]=b;
h[2]=a+c;h[3]=b+d;e.matrix.transformArray(h,4,h);this._inverseProjection.transformArray(h,4,h);a=h[0];b=h[1];c=h[2]-a;d=h[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},setBlendMode:function(a){this._stateList.blendMode=a},multiplyAlpha:function(a){this._stateList.alpha*=a},fillRect:function(a,b,c,d,e){var f=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,
f.scissor),h=this._batcher.data;h[f]=b[0];h[++f]=b[1];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[2];h[++f]=b[3];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[4];h[++f]=b[5];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e;h[++f]=b[6];h[++f]=b[7];h[++f]=c;h[++f]=d;h[++f]=a;h[++f]=e},drawSubImage:function(a,b,c,d,e,f,h){var i=this._stateList,b=this.transformQuad(b,c,f,h),j=a._width,l=a._height,c=a.maxU*d/j,k=a.maxV*e/l,d=a.maxU*(d+f)/j,e=a.maxV*(e+h)/l,h=i.alpha,a=this._batcher.prepareDrawImage(this._renderTarget,
i.blendMode,i.scissor,a),i=this._batcher.data;i[a]=b[0];i[++a]=b[1];i[++a]=c;i[++a]=k;i[++a]=h;i[++a]=b[2];i[++a]=b[3];i[++a]=d;i[++a]=k;i[++a]=h;i[++a]=b[4];i[++a]=b[5];i[++a]=d;i[++a]=e;i[++a]=h;i[++a]=b[6];i[++a]=b[7];i[++a]=c;i[++a]=e;i[++a]=h},drawImage:function(a,b,c){this.drawSubImage(a,b,c,0,0,a.get_width(),a.get_height())},restore:function(){this._stateList=this._stateList.prev},transform:function(a,b,c,d,e,h){var i=this._stateList;f.html.WebGLGraphics._scratchMatrix.set(a,b,c,d,e,h);J.Matrix.multiply(i.matrix,
f.html.WebGLGraphics._scratchMatrix,i.matrix)},save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new f.html._WebGLGraphics.DrawingState,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},__class__:f.html.WebGLGraphics};f.html._WebGLGraphics={};f.html._WebGLGraphics.DrawingState=function(){this.scissor=this.prev=this.next=null;this.matrix=new J.Matrix;this.alpha=1;this.blendMode=
l.BlendMode.Normal};j["flambe.platform.html._WebGLGraphics.DrawingState"]=f.html._WebGLGraphics.DrawingState;f.html._WebGLGraphics.DrawingState.__name__=["flambe","platform","html","_WebGLGraphics","DrawingState"];f.html._WebGLGraphics.DrawingState.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=J.FMath.max(this.scissor.x,a),f=J.FMath.max(this.scissor.y,b),c=J.FMath.min(this.scissor.x+this.scissor.width,a+c),d=J.FMath.min(this.scissor.y+this.scissor.height,b+d),a=e,b=f,c=c-e,
d=d-f;else this.scissor=new J.Rectangle;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:f.html._WebGLGraphics.DrawingState};f.html.WebGLRenderer=function(a,b){var c=this;this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();D.hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init()},!1);a.resize.connect(v(this,this.onResize));this.init()};j["flambe.platform.html.WebGLRenderer"]=f.html.WebGLRenderer;
f.html.WebGLRenderer.__name__=["flambe","platform","html","WebGLRenderer"];f.html.WebGLRenderer.__interfaces__=[f.Renderer];f.html.WebGLRenderer.prototype={init:function(){this.batcher=new f.html.WebGLBatcher(this.gl);this.graphics=new f.html.WebGLGraphics(this.batcher,null);this.onResize();D.hasGPU.set__(!0)},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},
createCompressedTexture:function(){this.gl.isContextLost();return null},getCompressedTextureFormats:function(){return[]},createEmptyTexture:function(a,b){if(this.gl.isContextLost())return null;var c=new f.html.WebGLTexture(this,a,b);c.clear();return c},createTexture:function(a){if(this.gl.isContextLost())return null;var b=new f.html.WebGLTexture(this,a.width,a.height);b.uploadImageData(a);return b},__class__:f.html.WebGLRenderer};f.html.WebGLTexture=function(a,b,c){this.framebuffer=this._graphics=
null;f.BasicAsset.call(this);this._renderer=a;this._width=b;this._height=c;this._widthPow2=f.html.WebGLTexture.nextPowerOfTwo(b);this._heightPow2=f.html.WebGLTexture.nextPowerOfTwo(c);this.maxU=b/this._widthPow2;this.maxV=c/this._heightPow2;b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};j["flambe.platform.html.WebGLTexture"]=
f.html.WebGLTexture;f.html.WebGLTexture.__name__=["flambe","platform","html","WebGLTexture"];f.html.WebGLTexture.__interfaces__=[l.Texture];f.html.WebGLTexture.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};f.html.WebGLTexture.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};f.html.WebGLTexture.__super__=f.BasicAsset;f.html.WebGLTexture.prototype=w(f.BasicAsset.prototype,{get_graphics:function(){if(null==this._graphics){this._graphics=
new f.html.WebGLGraphics(this._renderer.batcher,this);this._graphics.onResize(this._width,this._height);var a=this._renderer.gl;this.framebuffer=a.createFramebuffer();this._renderer.batcher.bindFramebuffer(this);a.framebufferTexture2D(36160,36064,3553,this.nativeTexture,0)}return this._graphics},get_height:function(){return this._height},get_width:function(){return this._width},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);
this._graphics=this.framebuffer=this.nativeTexture=null},clear:function(){this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,this._widthPow2,this._heightPow2,0,6408,5121,null)},uploadImageData:function(a){if(this._widthPow2!=a.width||this._heightPow2!=a.height){var b=f.html.HtmlUtil.createEmptyCanvas(this._widthPow2,this._heightPow2);b.getContext("2d").drawImage(a,0,0);f.html.WebGLTexture.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);
this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},__class__:f.html.WebGLTexture});f.shader={};f.shader.ShaderGL=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,f.shader.ShaderGL.createShader(a,35633,b));a.attachShader(this._program,f.shader.ShaderGL.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};j["flambe.platform.shader.ShaderGL"]=f.shader.ShaderGL;f.shader.ShaderGL.__name__=
["flambe","platform","shader","ShaderGL"];f.shader.ShaderGL.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};f.shader.ShaderGL.prototype={getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},prepare:function(){null},useProgram:function(){this._gl.useProgram(this._program)},__class__:f.shader.ShaderGL};f.shader.DrawImageGL=function(a){f.shader.ShaderGL.call(this,
a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=
this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};j["flambe.platform.shader.DrawImageGL"]=f.shader.DrawImageGL;f.shader.DrawImageGL.__name__=["flambe","platform","shader","DrawImageGL"];f.shader.DrawImageGL.__super__=f.shader.ShaderGL;f.shader.DrawImageGL.prototype=w(f.shader.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);
this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},__class__:f.shader.DrawImageGL});f.shader.DrawPatternGL=function(a){f.shader.ShaderGL.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec2 u_maxUV;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, mod(v_uv, u_maxUV)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_maxUV=this.getUniformLocation("u_maxUV");this.setTexture(0)};j["flambe.platform.shader.DrawPatternGL"]=
f.shader.DrawPatternGL;f.shader.DrawPatternGL.__name__=["flambe","platform","shader","DrawPatternGL"];f.shader.DrawPatternGL.__super__=f.shader.ShaderGL;f.shader.DrawPatternGL.prototype=w(f.shader.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,20,16)},setMaxUV:function(a,b){this._gl.uniform2f(this.u_maxUV,a,b)},setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},__class__:f.shader.DrawPatternGL});f.shader.FillRectGL=function(a){f.shader.ShaderGL.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};j["flambe.platform.shader.FillRectGL"]=f.shader.FillRectGL;f.shader.FillRectGL.__name__=["flambe","platform","shader","FillRectGL"];f.shader.FillRectGL.__super__=f.shader.ShaderGL;f.shader.FillRectGL.prototype=w(f.shader.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);
this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:f.shader.FillRectGL});A={Director:function(){this._transitor=null}};j["flambe.scene.Director"]=A.Director;A.Director.__name__=["flambe","scene","Director"];A.Director.__super__=Q;A.Director.prototype=w(Q.prototype,{completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},
invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_6;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_6;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},
onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return"Director_4"},__class__:A.Director});A._Director={};A._Director.Transitor=function(){};j["flambe.scene._Director.Transitor"]=A._Director.Transitor;A._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];A._Director.Transitor.prototype=
{complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},__class__:A._Director.Transitor};A.Scene=function(){};j["flambe.scene.Scene"]=A.Scene;A.Scene.__name__=["flambe","scene","Scene"];A.Scene.__super__=Q;A.Scene.prototype=w(Q.prototype,{get_name:function(){return"Scene_6"},__class__:A.Scene});A.Transition=function(){};j["flambe.scene.Transition"]=A.Transition;A.Transition.__name__=["flambe","scene","Transition"];A.Transition.prototype=
{complete:function(){},update:function(){return!0},__class__:A.Transition};K._Mixer={};K._Mixer.MixerSound=function(a,b){this._source=a;this._channels=b;this._playbacks=[]};j["flambe.sound._Mixer.MixerSound"]=K._Mixer.MixerSound;K._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];K._Mixer.MixerSound.__interfaces__=[q.Disposable,K.Sound];K._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var c=b[a];++a;c.dispose()}this._source=null;this._playbacks=
[]},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var c=a++,d=this._playbacks[c];if(null==d||d.get_ended())return c}return-1},playOrLoop:function(a,b){var c=this.findOpenChannel();if(0>c)return new f.DummyPlayback(this);var d=b?this._source.loop(a):this._source.play(a);return this._playbacks[c]=d},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,!1)},__class__:K._Mixer.MixerSound};E={BitmapSprite:function(a){l.Sprite.call(this);
this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};j["flambe.swf.BitmapSprite"]=E.BitmapSprite;E.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];E.BitmapSprite.__super__=l.Sprite;E.BitmapSprite.prototype=w(l.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:E.BitmapSprite});
E.Symbol=function(){};j["flambe.swf.Symbol"]=E.Symbol;E.Symbol.__name__=["flambe","swf","Symbol"];E.Symbol.prototype={__class__:E.Symbol};E.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var c=a.rect;this.x=c[0];this.y=c[1];this.width=c[2];this.height=c[3];c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};j["flambe.swf.BitmapSymbol"]=E.BitmapSymbol;E.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];E.BitmapSymbol.__interfaces__=[E.Symbol];E.BitmapSymbol.prototype=
{get_name:function(){return this._name},createSprite:function(){return new E.BitmapSprite(this)},__class__:E.BitmapSymbol};E.Library=function(a,b){this._symbols=new B.StringMap;var c=Y.parse(a.getFile(b+"/library.json").toString());this.frameRate=c.frameRate;for(var d=[],e=0,f=c.movies;e<f.length;){var h=f[e];++e;h=new E.MovieSymbol(this,h);d.push(h);this._symbols.set(h.get_name(),h)}e=c.textureGroups;(1!=e[0].scaleFactor||1<e.length)&&null;h=e[0].atlases;for(e=0;e<h.length;){c=h[e];++e;for(var i=
a.getTexture(b+"/"+q.Strings.removeFileExtension(c.file)),f=0,c=c.textures;f<c.length;){var j=c[f];++f;j=new E.BitmapSymbol(j,i);this._symbols.set(j.get_name(),j)}}for(e=0;e<d.length;){h=d[e];++e;f=0;for(c=h.layers;f<c.length;){h=c[f];++f;h=h.keyframes;i=h.length;for(j=0;j<i;){var l=j++,k=h[l];if(null!=k.symbolName){var m=this._symbols.get(k.symbolName);k.symbol=m}if(1==k.duration&&l+1<i&&(l=h[l+1],!l.visible||null==l.symbolName))k.visible=!1}}}};j["flambe.swf.Library"]=E.Library;E.Library.__name__=
["flambe","swf","Library"];E.Library.prototype={getSymbol:function(a){return this._symbols.get(a)},__class__:E.Library};E.MovieSprite=function(a){this._looped=null;l.Sprite.call(this);this.symbol=a;this.speed=new M.AnimatedFloat(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new E._MovieSprite.LayerAnimator(a.layers[d])}this._position=this._frame=0;this["goto"](1)};j["flambe.swf.MovieSprite"]=E.MovieSprite;E.MovieSprite.__name__=["flambe",
"swf","MovieSprite"];E.MovieSprite.__super__=l.Sprite;E.MovieSprite.prototype=w(l.Sprite.prototype,{rewind:function(){this._position=0;this._flags|=32},set_paused:function(a){this._flags=q.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=J.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=
c[b],++b,d.composeFrame(a);this._frame=a}},onUpdate:function(a){l.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&48){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit0());break;case 32:this._flags&=-33}this["goto"](this._position*this.symbol.frameRate)},onRemoved:function(){l.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=
b[a];++a;this.owner.removeChild(c.content)}},onAdded:function(){l.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},__class__:E.MovieSprite});E._MovieSprite={};E._MovieSprite.LayerAnimator=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new P;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=
0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new l.Sprite:e.symbol.createSprite()}this.content.add(this._sprites[0])}};j["flambe.swf._MovieSprite.LayerAnimator"]=E._MovieSprite.LayerAnimator;E._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];E._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_1.set_visible(!1),
this.keyframeIdx=c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_1&&(N.getClass(d)==E.MovieSprite&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_1;var e=b[this.keyframeIdx],f=e.visible&&null!=e.symbol;d.set_visible(f);if(f){var f=e.x,h=e.y,i=e.scaleX,j=e.scaleY,l=e.skewX,
k=e.skewY,m=e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var n;0>c?(n=1-a,n=1-n*n,c=-c):n=a*a;a=c*n+(1-c)*a}b=b[this.keyframeIdx+1];f+=(b.x-f)*a;h+=(b.y-h)*a;i+=(b.scaleX-i)*a;j+=(b.scaleY-j)*a;l+=(b.skewX-l)*a;k+=(b.skewY-k)*a;m+=(b.alpha-m)*a}b=d.getLocalMatrix();a=Math.sin(l);l=Math.cos(l);c=Math.sin(k);k=Math.cos(k);b.set(k*i,c*i,-a*j,l*j,f,h);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(m)}}}},__class__:E._MovieSprite.LayerAnimator};E.MovieSymbol=function(a,
b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,f=new E.MovieLayer(b.layers[e]);this.frames=Math.max(f.frames,this.frames);this.layers[e]=f}this.duration=this.frames/this.frameRate};j["flambe.swf.MovieSymbol"]=E.MovieSymbol;E.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];E.MovieSymbol.__interfaces__=[E.Symbol];E.MovieSymbol.prototype={createSprite:function(){return new E.MovieSprite(this)},get_name:function(){return this._name},
__class__:E.MovieSymbol};E.MovieLayer=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new E.MovieKeyframe(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+(b.duration|0):0};j["flambe.swf.MovieLayer"]=E.MovieLayer;E.MovieLayer.__name__=["flambe","swf","MovieLayer"];E.MovieLayer.prototype={__class__:E.MovieLayer};E.MovieKeyframe=function(a,b){this.ease=
0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);
null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};j["flambe.swf.MovieKeyframe"]=E.MovieKeyframe;E.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];E.MovieKeyframe.prototype={__class__:E.MovieKeyframe};q.BitSets=function(){};j["flambe.util.BitSets"]=q.BitSets;q.BitSets.__name__=["flambe","util","BitSets"];q.BitSets.set=function(a,b,c){return c?a|b:a&~b};q.Promise=function(){this.success=new q.Signal1;this.error=new q.Signal1;
this.progressChanged=new q.Signal0;this.hasResult=!1;this._total=this._progress=0};j["flambe.util.Promise"]=q.Promise;q.Promise.__name__=["flambe","util","Promise"];q.Promise.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit0());return a},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit0());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";
this._result=a;this.hasResult=!0;this.success.emit1(a);return a},__class__:q.Promise};q.Signal0=function(a){q.SignalBase.call(this,a)};j["flambe.util.Signal0"]=q.Signal0;q.Signal0.__name__=["flambe","util","Signal0"];q.Signal0.__super__=q.SignalBase;q.Signal0.prototype=w(q.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:q.Signal0});q._SignalBase={};q._SignalBase.Task=function(a){this.next=null;this.fn=a};j["flambe.util._SignalBase.Task"]=q._SignalBase.Task;
q._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];q._SignalBase.Task.prototype={__class__:q._SignalBase.Task};q.Strings=function(){};j["flambe.util.Strings"]=q.Strings;q.Strings.__name__=["flambe","util","Strings"];q.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?F.substr(a,b+1,null):null};q.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?F.substr(a,0,b):a};q.Strings.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=
F.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=F.substr(a,b+1,null));return q.Strings.getFileExtension(a)};q.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};q.Strings.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];if(L.__instanceof(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=e+"="+r.string(f);d+=2}a+="]"}return a};ea=void 0;ea={Reader:function(a){this.i=a}};j["format.tar.Reader"]=ea.Reader;
ea.Reader.__name__=["format","tar","Reader"];ea.Reader.prototype={parseOctal:function(a){for(var b=0,c=0,d=a.length;c<d;){var e=c++,e=a.b[e];if(0==e)break;if(32!=e){if(48>e||55<e)throw"Invalid octal char";b=8*b+(e-48)}}return b},readPad:function(a){this.i.read(512*Math.ceil(a/512)-a)},readEntryHeader:function(){var a=this.i,b=a.readUntil(0);if(0==b.length){for(b=0;1023>b;)if(b++,0!=a.readByte())throw"Invalid TAR end";return null}a.read(99-b.length);var c=this.parseOctal(a.read(8)),d=this.parseOctal(a.read(8)),
e=this.parseOctal(a.read(8)),f=this.parseOctal(a.read(12)),h=this.parseOctal(a.read(8)),h=512*h+this.parseOctal(a.read(4));a.read(8);a.readByte();var i=a.readUntil(0);a.read(99-i.length);a.readString(8);i=a.readUntil(0);a.read(31-i.length);var j=a.readUntil(0);a.read(31-j.length);this.parseOctal(a.read(8));this.parseOctal(a.read(8));var l=a.readUntil(0);a.read(166-l.length);a=new Date;a.setTime(1E3*h);return{fileName:b,fileSize:f,fileTime:a,fmod:c,uid:d,uname:i,gid:e,gname:j,data:null}},read:function(){var a=
new aa;for(z.Bytes.alloc(65536);;){var b=this.readEntryHeader();if(null==b)break;var c=b.fileSize;b.data=this.i.read(c);this.readPad(c);a.add(b)}return a},__class__:ea.Reader};H=void 0;B=void 0;U=void 0;T=void 0;W=void 0;ha=void 0;z=void 0;t=void 0;Y=void 0;Z=void 0;Y=function(){};j["haxe.Json"]=Y;Y.__name__=["haxe","Json"];Y.parse=function(a){return(new Y).doParse(a)};Y.prototype={parseNumber:function(a){for(var b=this.pos-1,c=45==a,d=!c,e=48==a,f=!1,h=!1,i=!1,j=!1;;){a=this.str.charCodeAt(this.pos++);
switch(a){case 48:e&&!f&&this.invalidNumber(b);c&&(c=!1,e=!0);d=!0;break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e&&!f&&this.invalidNumber(b);c&&(c=!1);d=!0;e=!1;break;case 46:(c||f)&&this.invalidNumber(b);d=!1;f=!0;break;case 101:case 69:(c||e||h)&&this.invalidNumber(b);d=!1;h=!0;break;case 43:case 45:(!h||i)&&this.invalidNumber(b);d=!1;i=!0;break;default:d||this.invalidNumber(b),this.pos--,j=!0}if(j)break}a=r.parseFloat(F.substr(this.str,b,this.pos-b));b=a|0;return b==
a?b:a},invalidNumber:function(a){throw"Invalid number at position "+a+": "+F.substr(this.str,a,this.pos-a);},parseString:function(){for(var a=this.pos,b=new X;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){b.addSub(this.str,a,this.pos-a-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:b.b+="\r";break;case 110:b.b+="\n";break;case 116:b.b+="\t";break;case 98:b.b+="\u0008";break;case 102:b.b+="\u000c";break;case 47:case 92:case 34:b.b+=String.fromCharCode(c);break;case 117:a=
r.parseInt("0x"+F.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}a=this.pos}else if(c!=c)throw"Unclosed string";}b.addSub(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;){var a=this.str.charCodeAt(this.pos++);switch(a){case 32:case 13:case 10:case 9:break;case 123:for(var b={},c=null,a=null;;){var d=this.str.charCodeAt(this.pos++);switch(d){case 32:case 13:case 10:case 9:break;
case 125:return(null!=c||!1==a)&&this.invalidChar(),b;case 58:null==c&&this.invalidChar();b[c]=this.parseRec();c=null;a=!0;break;case 44:a?a=!1:this.invalidChar();break;case 34:a&&this.invalidChar();c=this.parseString();break;default:this.invalidChar()}}break;case 91:b=[];for(a=null;;)switch(d=this.str.charCodeAt(this.pos++),d){case 32:case 13:case 10:case 9:break;case 93:return!1==a&&this.invalidChar(),b;case 44:a?a=!1:this.invalidChar();break;default:a&&this.invalidChar(),this.pos--,b.push(this.parseRec()),
a=!0}break;case 116:a=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!0;case 102:a=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!1;case 110:a=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=
this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:return this.parseNumber(a);default:this.invalidChar()}}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.str=a;this.pos=0;return this.parseRec()},__class__:Y};W=function(){this.buf=new X;this.cache=[];this.useCache=W.USE_CACHE;
this.useEnumIndex=W.USE_ENUM_INDEX;this.shash=new B.StringMap;this.scount=0};j["haxe.Serializer"]=W;W.__name__=["haxe","Serializer"];W.run=function(a){var b=new W;b.serialize(a);return b.toString()};W.prototype={serialize:function(a){var b=N["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b+=r.string(a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b+=r.string(a)):this.buf.b+=r.string(0>a?
"m":"p");break;case 3:this.buf.b+=r.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var c=0;this.buf.b+="a";for(var d=a.length,e=0;e<d;)b=e++,null==a[b]?c++:(0<c&&(1==c?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=r.string(c)),c=0),this.serialize(a[b]));0<c&&(1==c?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=r.string(c)));this.buf.b+="h";break;case aa:this.buf.b+="l";for(a=a.iterator();a.hasNext();)b=
a.next(),this.serialize(b);this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.b+=r.string(F.dateStr(a));break;case B.StringMap:this.buf.b+="b";for(c=a.keys();c.hasNext();)b=c.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+="h";break;case B.IntMap:this.buf.b+="q";for(c=a.keys();c.hasNext();)b=c.next(),this.buf.b+=":",this.buf.b+=r.string(b),this.serialize(a.get(b));this.buf.b+="h";break;case B.ObjectMap:this.buf.b+="M";for(c=a.keys();c.hasNext();)b=c.next(),d=R.field(b,"__id__"),
R.deleteField(b,"__id__"),this.serialize(b),b.__id__=d,this.serialize(a.h[b.__id__]);this.buf.b+="h";break;case z.Bytes:b=0;c=a.length-2;d=new X;for(e=W.BASE64;b<c;){var f=a.b[b++],h=a.b[b++],i=a.b[b++];d.b+=r.string(e.charAt(f>>2));d.b+=r.string(e.charAt((f<<4|h>>4)&63));d.b+=r.string(e.charAt((h<<2|i>>6)&63));d.b+=r.string(e.charAt(i&63))}b==c?(f=a.b[b++],h=a.b[b++],d.b+=r.string(e.charAt(f>>2)),d.b+=r.string(e.charAt((f<<4|h>>4)&63)),d.b+=r.string(e.charAt(h<<2&63))):b==c+1&&(f=a.b[b++],d.b+=r.string(e.charAt(f>>
2)),d.b+=r.string(e.charAt(f<<4&63)));b=d.b;this.buf.b+="s";this.buf.b+=r.string(b.length);this.buf.b+=":";this.buf.b+=r.string(b);break;default:this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(N.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(N.getClassName(b)),this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=
b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=r.string(this.useEnumIndex?"j":"w");this.serializeString(N.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=r.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";d=a.length;this.buf.b+=r.string(d-2);for(e=2;e<d;)b=e++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+r.string(a);}},serializeFields:function(a){for(var b=0,c=R.fields(a);b<
c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(R.field(a,d))}this.buf.b+="g"},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",this.buf.b+=r.string(e),!0}this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b+=r.string(b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=V.urlEncode(a),this.buf.b+=r.string(a.length),this.buf.b+=
":",this.buf.b+=r.string(a))},toString:function(){return this.buf.b},__class__:W};U=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};j["haxe.Timer"]=U;U.__name__=["haxe","Timer"];U.delay=function(a,b){var c=new U(b);c.run=function(){c.stop();a()};return c};U.prototype={run:function(){null},stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},__class__:U};T=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=T.DEFAULT_RESOLVER;null==
a&&(a=N,T.DEFAULT_RESOLVER=a);this.setResolver(a)};j["haxe.Unserializer"]=T;T.__name__=["haxe","Unserializer"];T.initCodes=function(){for(var a=[],b=0,c=T.BASE64.length;b<c;){var d=b++;a[T.BASE64.charCodeAt(d)]=d}return a};T.run=function(a){return(new T(a)).unserialize()};T.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);
if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return r.parseFloat(F.substr(this.buf,a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid string length";a=F.substr(this.buf,this.pos,b);this.pos+=b;a=V.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);
if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw"Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw"Invalid string reference";return this.scache[b];case 120:throw this.unserialize();case 99:b=this.unserialize();a=this.resolver.resolveClass(b);
if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;this.pos++;var c=this.readDigits(),d=N.getEnumConstructs(a)[c];if(null==d)throw"Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,
d);this.cache.push(b);return b;case 108:b=new aa;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 98:c=new B.StringMap;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new B.IntMap;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);if(104!=b)throw"Invalid IntMap format";
return c;case 77:c=new B.ObjectMap;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 118:return b=F.strDate(F.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid bytes length";d=T.CODES;null==d&&(d=T.initCodes(),T.CODES=d);for(var a=this.pos,e=b&3,f=a+(b-e),h=z.Bytes.alloc(3*(b>>2)+(2<=e?
e-1:0)),i=0;a<f;){var j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)];h.b[i++]=(j<<2|l>>4)&255;j=d[c.charCodeAt(a++)];h.b[i++]=(l<<4|j>>2)&255;l=d[c.charCodeAt(a++)];h.b[i++]=(j<<6|l)&255}2<=e&&(j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)],h.b[i++]=(j<<2|l>>4)&255,3==e&&(j=d[c.charCodeAt(a++)],h.b[i++]=(l<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);
b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw"Invalid custom data";return b}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return N.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return N.createEnum(a,b,d)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==
this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!L.__instanceof(b,String))throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:T};
Z={Adler32:function(){this.a1=1;this.a2=0}};j["haxe.crypto.Adler32"]=Z.Adler32;Z.Adler32.__name__=["haxe","crypto","Adler32"];Z.Adler32.read=function(a){var b=new Z.Adler32,c=a.readByte(),d=a.readByte(),e=a.readByte(),a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};Z.Adler32.prototype={equals:function(a){return a.a1==this.a1&&a.a2==this.a2},update:function(a,b,c){for(var d=this.a1,e=this.a2,f=b,b=b+c;f<b;)c=f++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},__class__:Z.Adler32};B={IntMap:function(){this.h=
{}}};j["haxe.ds.IntMap"]=B.IntMap;B.IntMap.__name__=["haxe","ds","IntMap"];B.IntMap.__interfaces__=[ga];B.IntMap.prototype={keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return F.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:B.IntMap};B.ObjectMap=function(){this.h={};this.h.__keys__={}};j["haxe.ds.ObjectMap"]=
B.ObjectMap;B.ObjectMap.__name__=["haxe","ds","ObjectMap"];B.ObjectMap.__interfaces__=[ga];B.ObjectMap.prototype={keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return F.iter(a)},set:function(a,b){var c=null!=a.__id__?a.__id__:a.__id__=++B.ObjectMap.count;this.h[c]=b;this.h.__keys__[c]=a},__class__:B.ObjectMap};B.StringMap=function(){this.h={}};j["haxe.ds.StringMap"]=B.StringMap;B.StringMap.__name__=["haxe","ds","StringMap"];B.StringMap.__interfaces__=
[ga];B.StringMap.prototype={toString:function(){var a=new X;a.b+="{";for(var b=this.keys();b.hasNext();){var c=b.next();a.b+=r.string(c);a.b+=" => ";a.b+=r.string(r.string(this.get(c)));b.hasNext()&&(a.b+=", ")}a.b+="}";return a.b},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return F.iter(a)},remove:function(a){a=
"$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:B.StringMap};z={Bytes:function(a,b){this.length=a;this.b=b}};j["haxe.io.Bytes"]=z.Bytes;z.Bytes.__name__=["haxe","io","Bytes"];z.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new z.Bytes(a,b)};z.Bytes.ofData=function(a){return new z.Bytes(a.length,a)};z.Bytes.prototype=
{toString:function(){return this.readString(0,this.length)},readString:function(a,b){if(0>a||0>b||a+b>this.length)throw z.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,f=a,h=a+b;f<h;){var i=d[f++];if(128>i){if(0==i)break;c+=e(i)}else if(224>i)c+=e((i&63)<<6|d[f++]&127);else if(240>i)var j=d[f++],c=c+e((i&31)<<12|(j&127)<<6|d[f++]&127);else var j=d[f++],l=d[f++],c=c+e((i&15)<<18|(j&127)<<12|l<<6&127|d[f++]&127)}return c},blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+
d>b.length)throw z.Error.OutsideBounds;var e=this.b,b=b.b;if(e==b&&a>c)for(var f=d;0<f;)f--,e[f+a]=b[f+c];else for(var h=0;h<d;)f=h++,e[f+a]=b[f+c]},__class__:z.Bytes};z.BytesBuffer=function(){this.b=[]};j["haxe.io.BytesBuffer"]=z.BytesBuffer;z.BytesBuffer.__name__=["haxe","io","BytesBuffer"];z.BytesBuffer.prototype={getBytes:function(){var a=new z.Bytes(this.b.length,this.b);this.b=null;return a},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;for(var a=a.b,d=b,b=b+
c;d<b;)c=d++,this.b.push(a[c])},add:function(a){for(var b=a.b,c=0,a=a.length;c<a;){var d=c++;this.b.push(b[d])}},__class__:z.BytesBuffer};z.Input=function(){};j["haxe.io.Input"]=z.Input;z.Input.__name__=["haxe","io","Input"];z.Input.prototype={readString:function(a){var b=z.Bytes.alloc(a);this.readFullBytes(b,0,a);return b.toString()},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},readUInt16:function(){var a=
this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt16:function(){var a=this.readByte(),b=this.readByte(),a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUntil:function(a){for(var b=new X,c;(c=this.readByte())!=a;)b.b+=String.fromCharCode(c);return b.b},read:function(a){for(var b=z.Bytes.alloc(a),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw z.Error.Blocked;c+=d;a-=d}return b},readFullBytes:function(a,b,c){for(;0<c;)var d=this.readBytes(a,b,c),b=b+
d,c=c-d},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;for(;0<d;)e[b]=this.readByte(),b++,d--;return c},readByte:function(){throw"Not implemented";},__class__:z.Input};z.BytesInput=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;this.b=a.b;this.pos=b;this.len=c};j["haxe.io.BytesInput"]=z.BytesInput;z.BytesInput.__name__=["haxe","io","BytesInput"];z.BytesInput.__super__=z.Input;z.BytesInput.prototype=
w(z.Input.prototype,{readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;if(0==this.len&&0<c)throw new z.Eof;this.len<c&&(c=this.len);for(var d=this.b,a=a.b,e=0;e<c;){var f=e++;a[b+f]=d[this.pos+f]}this.pos+=c;this.len-=c;return c},readByte:function(){if(0==this.len)throw new z.Eof;this.len--;return this.b[this.pos++]},__class__:z.BytesInput});z.Eof=function(){};j["haxe.io.Eof"]=z.Eof;z.Eof.__name__=["haxe","io","Eof"];z.Eof.prototype={toString:function(){return"Eof"},
__class__:z.Eof};z.Error=j["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};z.Error.Blocked=["Blocked",0];z.Error.Blocked.toString=k;z.Error.Blocked.__enum__=z.Error;z.Error.Overflow=["Overflow",1];z.Error.Overflow.toString=k;z.Error.Overflow.__enum__=z.Error;z.Error.OutsideBounds=["OutsideBounds",2];z.Error.OutsideBounds.toString=k;z.Error.OutsideBounds.__enum__=z.Error;z.Error.Custom=function(a){a=["Custom",3,a];a.__enum__=z.Error;
a.toString=k;return a};ha={Meta:function(){}};j["haxe.rtti.Meta"]=ha.Meta;ha.Meta.__name__=["haxe","rtti","Meta"];ha.Meta.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};H={_Fast:{}};H._Fast.NodeAccess=function(a){this.__x=a};j["haxe.xml._Fast.NodeAccess"]=H._Fast.NodeAccess;H._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];H._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==C.Document?"Document":
this.__x.get_nodeName())+" is missing element "+a;return new H.Fast(b)},__class__:H._Fast.NodeAccess};H._Fast.AttribAccess=function(a){this.__x=a};j["haxe.xml._Fast.AttribAccess"]=H._Fast.AttribAccess;H._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];H._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==C.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:H._Fast.AttribAccess};
H._Fast.HasAttribAccess=function(a){this.__x=a};j["haxe.xml._Fast.HasAttribAccess"]=H._Fast.HasAttribAccess;H._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];H._Fast.HasAttribAccess.prototype={__class__:H._Fast.HasAttribAccess};H._Fast.HasNodeAccess=function(a){this.__x=a};j["haxe.xml._Fast.HasNodeAccess"]=H._Fast.HasNodeAccess;H._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];H._Fast.HasNodeAccess.prototype={__class__:H._Fast.HasNodeAccess};H._Fast.NodeListAccess=
function(a){this.__x=a};j["haxe.xml._Fast.NodeListAccess"]=H._Fast.NodeListAccess;H._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];H._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new aa,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new H.Fast(c))}return b},__class__:H._Fast.NodeListAccess};H.Fast=function(a){if(a.nodeType!=C.Document&&a.nodeType!=C.Element)throw"Invalid nodeType "+r.string(a.nodeType);this.x=a;this.node=new H._Fast.NodeAccess(a);
this.nodes=new H._Fast.NodeListAccess(a);this.att=new H._Fast.AttribAccess(a);this.has=new H._Fast.HasAttribAccess(a);this.hasNode=new H._Fast.HasNodeAccess(a)};j["haxe.xml.Fast"]=H.Fast;H.Fast.__name__=["haxe","xml","Fast"];H.Fast.prototype={get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==C.PCData&&c.nodeType==C.CData&&""==V.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==C.PCData&&
""==V.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+" does not only have data";}if(b.nodeType!=C.PCData&&b.nodeType!=C.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},get_name:function(){return this.x.nodeType==C.Document?"Document":this.x.get_nodeName()},__class__:H.Fast};H.Parser=function(){};j["haxe.xml.Parser"]=H.Parser;H.Parser.__name__=["haxe","xml","Parser"];H.Parser.parse=function(a){var b=C.createDocument();H.Parser.doParse(a,
0,b);return b};H.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,f=1,h=null,i=0,j=0,l=0,k=a.charCodeAt(b),m=new X;k==k;){switch(e){case 0:switch(k){case 10:case 13:case 9:case 32:break;default:e=f;continue}break;case 1:switch(k){case 60:e=0;f=2;break;default:i=b;e=13;continue}break;case 13:60==k?(e=C.createPCData(m.b+F.substr(a,i,b-i)),m=new X,c.addChild(e),j++,e=0,f=2):38==k&&(m.addSub(a,i,b-i),e=18,f=13,i=b+1);break;case 17:93==k&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=
C.createCData(F.substr(a,i,b-i)),c.addChild(e),j++,b+=2,e=1);break;case 2:switch(k){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=F.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=F.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}i=b+1;break;case 63:e=14;i=b;break;case 47:if(null==c)throw"Expected node name";
i=b+1;e=0;f=10;break;default:e=3;i=b;continue}break;case 3:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(b==i)throw"Expected node name";d=C.createElement(F.substr(a,i,b-i));c.addChild(d);e=0;f=4;continue}break;case 4:switch(k){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;i=b;continue}break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==b)throw"Expected attribute name";h=F.substr(a,i,b-i);if(d.exists(h))throw"Duplicate attribute";
e=0;f=6;continue}break;case 6:switch(k){case 61:e=0;f=7;break;default:throw"Expected =";}break;case 7:switch(k){case 34:case 39:e=8;i=b;break;default:throw'Expected "';}break;case 8:k==a.charCodeAt(i)&&(f=F.substr(a,i+1,b-i-1),d.set(h,f),e=0,f=4);break;case 9:i=b=H.Parser.doParse(a,b,d);e=1;break;case 11:switch(k){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(k){case 62:return 0==j&&c.addChild(C.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=k&&122>=k||65<=k&&
90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==b)throw"Expected node name";if(F.substr(a,i,b-i)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;f=12;continue}break;case 15:45==k&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(C.createComment(F.substr(a,i,b-i))),b+=2,e=1);break;case 16:91==k?l++:93==k?l--:62==k&&0==l&&(c.addChild(C.createDocType(F.substr(a,i,b-i))),e=1);break;case 14:63==k&&62==a.charCodeAt(b+1)&&(b++,e=F.substr(a,i+1,b-i-2),c.addChild(C.createProcessingInstruction(e)),
e=1);break;case 18:59==k&&(i=F.substr(a,i,b-i),35==i.charCodeAt(0)?(i=120==i.charCodeAt(1)?r.parseInt("0"+F.substr(i,1,i.length-1)):r.parseInt(F.substr(i,1,i.length-1)),m.b+=r.string(String.fromCharCode(i))):m.b=H.Parser.escapes.exists(i)?m.b+r.string(H.Parser.escapes.get(i)):m.b+r.string("&"+i+";"),i=b+1,e=f)}k=a.charCodeAt(++b)}1==e&&(i=b,e=13);if(13==e)return(b!=i||0==j)&&c.addChild(C.createPCData(m.b+F.substr(a,i,b-i))),b;throw"Unexpected end";};t={};t.ExtraField=j["haxe.zip.ExtraField"]={__ename__:["haxe",
"zip","ExtraField"],__constructs__:["FUnknown","FInfoZipUnicodePath","FUtf8"]};t.ExtraField.FUnknown=function(a,b){var c=["FUnknown",0,a,b];c.__enum__=t.ExtraField;c.toString=k;return c};t.ExtraField.FInfoZipUnicodePath=function(a,b){var c=["FInfoZipUnicodePath",1,a,b];c.__enum__=t.ExtraField;c.toString=k;return c};t.ExtraField.FUtf8=["FUtf8",2];t.ExtraField.FUtf8.toString=k;t.ExtraField.FUtf8.__enum__=t.ExtraField;t.Huffman=j["haxe.zip.Huffman"]={__ename__:["haxe","zip","Huffman"],__constructs__:["Found",
"NeedBit","NeedBits"]};t.Huffman.Found=function(a){a=["Found",0,a];a.__enum__=t.Huffman;a.toString=k;return a};t.Huffman.NeedBit=function(a,b){var c=["NeedBit",1,a,b];c.__enum__=t.Huffman;c.toString=k;return c};t.Huffman.NeedBits=function(a,b){var c=["NeedBits",2,a,b];c.__enum__=t.Huffman;c.toString=k;return c};t.HuffTools=function(){};j["haxe.zip.HuffTools"]=t.HuffTools;t.HuffTools.__name__=["haxe","zip","HuffTools"];t.HuffTools.prototype={make:function(a,b,c,d){var e=[],f=[];if(32<d)throw"Invalid huffman";
for(var h=0;h<d;){var i=h++;e.push(0);f.push(0)}for(h=0;h<c;){i=h++;i=a[i+b];if(i>=d)throw"Invalid huffman";e[i]++}for(var j=0,k=1,h=d-1;k<h;)i=k++,j=j+e[i]<<1,f[i]=j;e=new B.IntMap;for(h=0;h<c;)i=h++,j=a[i+b],0!=j&&(k=f[j-1],f[j-1]=k+1,e.set(k<<5|j,i));return this.treeCompress(t.Huffman.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},treeMake:function(a,b,c,d){if(d>b)throw"Invalid huffman";var e=c<<5|d;if(a.exists(e))return t.Huffman.Found(a.get(e));c<<=1;d+=1;return t.Huffman.NeedBit(this.treeMake(a,
b,c,d),this.treeMake(a,b,c|1,d))},treeWalk:function(a,b,c,d,e){switch(e[1]){case 1:var f=e[3],h=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,h),this.treeWalk(a,b|1<<c,c+1,d-1,f)):a[b]=this.treeCompress(e);break;default:a[b]=this.treeCompress(e)}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){switch(a[1]){case 1:b=a[3];a=t.Huffman.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));break;default:throw"assert";}return a}for(var c=1<<b,d=[],e=0;e<c;)e++,d.push(t.Huffman.Found(-1));
this.treeWalk(d,0,0,b,a);return t.Huffman.NeedBits(b,d)},treeDepth:function(a){var b;switch(a[1]){case 0:b=0;break;case 2:throw"assert";case 1:b=a[3],a=this.treeDepth(a[2]),b=this.treeDepth(b),b=1+(a<b?a:b)}return b},__class__:t.HuffTools};t._InflateImpl={};t._InflateImpl.Window=function(a){this.buffer=z.Bytes.alloc(65536);this.pos=0;a&&(this.crc=new Z.Adler32)};j["haxe.zip._InflateImpl.Window"]=t._InflateImpl.Window;t._InflateImpl.Window.__name__=["haxe","zip","_InflateImpl","Window"];t._InflateImpl.Window.prototype=
{checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},available:function(){return this.pos},getLastChar:function(){return this.buffer.b[this.pos-1]},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=z.Bytes.alloc(65536);this.pos-=32768;a.blit(0,
this.buffer,32768,this.pos);this.buffer=a},__class__:t._InflateImpl.Window};t._InflateImpl.State=j["haxe.zip._InflateImpl.State"]={__ename__:["haxe","zip","_InflateImpl","State"],__constructs__:"Head,Block,CData,Flat,Crc,Dist,DistOne,Done".split(",")};t._InflateImpl.State.Head=["Head",0];t._InflateImpl.State.Head.toString=k;t._InflateImpl.State.Head.__enum__=t._InflateImpl.State;t._InflateImpl.State.Block=["Block",1];t._InflateImpl.State.Block.toString=k;t._InflateImpl.State.Block.__enum__=t._InflateImpl.State;
t._InflateImpl.State.CData=["CData",2];t._InflateImpl.State.CData.toString=k;t._InflateImpl.State.CData.__enum__=t._InflateImpl.State;t._InflateImpl.State.Flat=["Flat",3];t._InflateImpl.State.Flat.toString=k;t._InflateImpl.State.Flat.__enum__=t._InflateImpl.State;t._InflateImpl.State.Crc=["Crc",4];t._InflateImpl.State.Crc.toString=k;t._InflateImpl.State.Crc.__enum__=t._InflateImpl.State;t._InflateImpl.State.Dist=["Dist",5];t._InflateImpl.State.Dist.toString=k;t._InflateImpl.State.Dist.__enum__=t._InflateImpl.State;
t._InflateImpl.State.DistOne=["DistOne",6];t._InflateImpl.State.DistOne.toString=k;t._InflateImpl.State.DistOne.__enum__=t._InflateImpl.State;t._InflateImpl.State.Done=["Done",7];t._InflateImpl.State.Done.toString=k;t._InflateImpl.State.Done.__enum__=t._InflateImpl.State;t.InflateImpl=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this["final"]=!1;this.htools=new t.HuffTools;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?t._InflateImpl.State.Head:t._InflateImpl.State.Block;
this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new t._InflateImpl.Window(c)};j["haxe.zip.InflateImpl"]=t.InflateImpl;t.InflateImpl.__name__=["haxe","zip","InflateImpl"];t.InflateImpl.prototype={inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();if(8!=(a&15)||7!=a>>4)throw"Invalid data";var b=this.input.readByte();if(0!=((a<<8)+b)%31)throw"Invalid data";if(0!=(b&32))throw"Unsupported dictionary";
this.state=t._InflateImpl.State.Block;return!0;case 4:a=this.window.checksum();if(null==a)return this.state=t._InflateImpl.State.Done,!0;b=Z.Adler32.read(this.input);if(!a.equals(b))throw"Invalid CRC";this.state=t._InflateImpl.State.Done;return!0;case 7:return!1;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw"Invalid data";this.state=t._InflateImpl.State.Flat;a=this.inflateLoop();this.resetBits();return a;
case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=t._InflateImpl.State.CData,!0;case 2:for(var a=this.getBits(5)+257,b=this.getBits(5)+1,c=this.getBits(4)+4,d=0;d<c;){var e=d++;this.lengths[t.InflateImpl.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(d=c;19>d;)e=d++,this.lengths[t.InflateImpl.CODE_LENGTHS_POS[e]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];e=0;for(d=a+b;e<d;)e++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=
this.htools.make(c,0,a,16);this.state=t._InflateImpl.State.CData;return!0;default:throw"Invalid data";}case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?t._InflateImpl.State.Crc:t._InflateImpl.State.Block),0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=t._InflateImpl.State.CData),0<this.needed;case 5:for(;0<this.len&&
0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=t._InflateImpl.State.CData);return 0<this.needed;case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this["final"]?t._InflateImpl.State.Crc:t._InflateImpl.State.Block;else{b-=257;a=t.InflateImpl.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.len=t.InflateImpl.LEN_BASE_VAL_TBL[b]+this.getBits(a);
b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=t.InflateImpl.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.dist=t.InflateImpl.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw"Invalid data";this.state=1==this.dist?t._InflateImpl.State.DistOne:t._InflateImpl.State.Dist}return!0}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=
e;a[c]=e;c++;break;case 16:e=c+3+this.getBits(2);if(e>b)throw"Invalid data";for(;c<e;)a[c]=d,c++;break;case 17:c+=3+this.getBits(3);if(c>b)throw"Invalid data";break;case 18:c+=11+this.getBits(7);if(c>b)throw"Invalid data";break;default:throw"Invalid data";}}},applyHuffman:function(a){var b;switch(a[1]){case 0:b=a=a[2];break;case 1:b=a[3];a=a[2];b=this.applyHuffman(this.getBit()?b:a);break;case 2:b=a[3],a=a[2],b=this.applyHuffman(b[this.getBits(a)])}return b},addDist:function(a,b){this.addBytes(this.window.buffer,
this.window.pos-a,b)},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},resetBits:function(){this.nbits=this.bits=0},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},getBit:function(){0==
this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},buildFixedHuffman:function(){if(null!=t.InflateImpl.FIXED_HUFFMAN)return t.InflateImpl.FIXED_HUFFMAN;
for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}t.InflateImpl.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return t.InflateImpl.FIXED_HUFFMAN},__class__:t.InflateImpl};t.Reader=function(a){this.i=a};j["haxe.zip.Reader"]=t.Reader;t.Reader.__name__=["haxe","zip","Reader"];t.Reader.unzip=function(a){if(!a.compressed)return a.data;throw"No uncompress support";};t.Reader.prototype={read:function(){for(var a=new aa,b=null;;){var c=this.readEntryHeader();if(null==c)break;if(0>c.dataSize){null==
b&&(b=z.Bytes.alloc(65536));for(var d=new z.BytesBuffer,e=new t.InflateImpl(this.i,!1,!1);;){var f=e.readBytes(b,0,65536);d.addBytes(b,0,f);if(65536>f)break}c.data=d.getBytes();c.crc32=this.i.readInt32();134695760==c.crc32&&(c.crc32=this.i.readInt32());c.dataSize=this.i.readInt32();c.fileSize=this.i.readInt32();c.dataSize=c.fileSize;c.compressed=!1}else c.data=this.i.read(c.dataSize);a.add(c)}return a},readEntryHeader:function(){var a=this.i,b=a.readInt32();if(33639248==b||101010256==b)return null;
if(67324752!=b)throw"Invalid Zip Data";a.readUInt16();var b=a.readUInt16(),c=0!=(b&2048);if(0!=(b&63479))throw"Unsupported flags "+b;var d=a.readUInt16(),e=0!=d;if(e&&8!=d)throw"Unsupported compression "+d;var d=this.readZipDate(),f=a.readInt32(),h=a.readInt32(),i=a.readInt32(),j=a.readInt16(),k=a.readInt16(),a=a.readString(j),k=this.readExtraFields(k);c&&k.push(t.ExtraField.FUtf8);0!=(b&8)&&(h=-1);return{fileName:a,fileSize:i,fileTime:d,compressed:e,dataSize:h,data:null,crc32:f,extraFields:k}},readExtraFields:function(a){for(var b=
new aa;0<a;){if(4>a)throw"Invalid extra fields data";var c=this.i.readUInt16(),d=this.i.readUInt16();if(a<d)throw"Invalid extra fields data";switch(c){case 28789:var e=this.i.readByte();if(1!=e){var f=new z.BytesBuffer;f.b.push(e);f.add(this.i.read(d-1));b.add(t.ExtraField.FUnknown(c,f.getBytes()))}else c=this.i.readInt32(),e=this.i.read(d-5).toString(),b.add(t.ExtraField.FInfoZipUnicodePath(e,c));break;default:b.add(t.ExtraField.FUnknown(c,this.i.read(d)))}a-=4+d}return b},readZipDate:function(){var a=
this.i.readUInt16(),b=a>>11&31,c=a>>5&63,a=a&31,d=this.i.readUInt16();return new Date((d>>9)+1980,(d>>5&15)-1,d&31,b,c,a<<1)},__class__:t.Reader};L=function(){};j["js.Boot"]=L;L.__name__=["js","Boot"];L.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=
2!=f?c+(","+L.__string_rec(a[f],b)):c+L.__string_rec(a[f],b);return c+")"}d=a.length;c="[";b+="\t";for(e=0;e<d;)f=e++,c+=(0<f?",":"")+L.__string_rec(a[f],b);return c+"]"}try{e=a.toString}catch(h){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="\t";d=null!=a.hasOwnProperty;for(e in a)if(!d||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+
L.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};L.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||L.__interfLoop(f,b))return!0}return L.__interfLoop(a.__super__,b)};L.__instanceof=function(a,b){if(null==b)return!1;switch(b){case na:return(a|0)===a;case ka:return"number"==typeof a;case la:return"boolean"==
typeof a;case String:return"string"==typeof a;case oa:return!0;default:if(null!=a){if("function"==typeof b){if(a instanceof b)return b==Array?null==a.__enum__:!0;if(L.__interfLoop(a.__class__,b))return!0}}else return!1;return b==pa&&null!=a.__name__||b==qa&&null!=a.__ename__?!0:a.__enum__==b}};L.__cast=function(a,b){if(L.__instanceof(a,b))return a;throw"Cannot cast "+r.string(a)+" to "+r.string(b);};fa={_CanvasElement:{}};fa._CanvasElement.CanvasUtil=function(){};j["js.html._CanvasElement.CanvasUtil"]=
fa._CanvasElement.CanvasUtil;fa._CanvasElement.CanvasUtil.__name__=["js","html","_CanvasElement","CanvasUtil"];fa._CanvasElement.CanvasUtil.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var ma=0;Array.prototype.indexOf&&(F.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;
Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;j.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=j.String=String;String.__name__=["String"];Array.prototype.__class__=j.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=j.Date=Date;Date.__name__=["Date"];var na=j.Int={__name__:["Int"]},oa=j.Dynamic={__name__:["Dynamic"]},ka=j.Float=Number;ka.__name__=["Float"];var la=j.Bool=Boolean;la.__ename__=["Bool"];var pa=j.Class=
{__name__:["Class"]},qa={};C.Element="element";C.PCData="pcdata";C.CData="cdata";C.Comment="comment";C.DocType="doctype";C.ProcessingInstruction="processingInstruction";C.Document="document";"undefined"!=typeof JSON&&(Y=JSON);p._flagConstructed=!1;p._privacyLinkOpened=!1;p._eulaLinkOpened=!1;c.constants.ConstantsApp.SHARED_OBJECT_ID="nlok_so_18";c.constants.ConstantsApp.EVENT_GENERATEWORLD="eventGenerateWorld";c.constants.ConstantsApp.EVENT_PAUSE="eventPause";c.constants.ConstantsApp.EVENT_UNPAUSE=
"eventUnpause";c.constants.ConstantsApp.EVENT_UPDATE_DISPLAY="eventUpdateDisplay";c.constants.ConstantsApp.EVENT_UPDATE_UPGRADE_ID="evenUpdateUpgradeID";c.constants.ConstantsApp.EVENT_MUTE_TOGGLE="eventMuteToggle";c.constants.ConstantsApp.EVENT_FREEZE_FRAME="EVENT_FREEZE_FRAME";c.constants.ConstantsApp.EVENT_SCREEN_SHAKE="EVENT_SCREEN_SHAKE";c.constants.ConstantsApp.EVENT_SLOW_MOTION="EVENT_SLOW_MOTION";c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURST="EVENT_PLAYER_SCORE_BURST";c.constants.ConstantsApp.EVENT_PLAYER_SCORE_BURSTS_CLOSE=
"EVENT_PLAYER_SCORE_BURSTS_CLOSE";c.constants.ConstantsApp.EVENT_SPEED_BOOST="EVENT_SPEED_BOOST";c.constants.ConstantsApp.EVENT_SPAWN_PARTICLE="EVENT_SPAWN_PARTICLE";c.constants.ConstantsApp.EVENT_SPAWN_EFFECT="EVENT_SPAWN_EFFECT";c.constants.ConstantsApp.EVENT_SPAWN_YUAN="EVENT_SPAWN_YUAN";c.constants.ConstantsApp.EVENT_PRINT_OVERLAY="EVENT_PRINT_OVERLAY";c.constants.ConstantsApp.EVENT_UPDATE_LEVEL="EVENT_UPDATE_LEVEL";c.constants.ConstantsApp.EVENT_SPAWN_PROJECTILE="EVENT_SPAWN_PROJECTILE";c.constants.ConstantsApp.EVENT_COLLECT_CHI=
"EVENT_COLLECT_CHI";c.constants.ConstantsApp.EVENT_COLLECT_TOKEN="EVENT_COLLECT_TOKEN";c.constants.ConstantsApp.EVENT_SAVE_GAME="EVENT_SAVE_GAME";c.constants.ConstantsApp.EVENT_SHIELD_UP="EVENT_SHIELD_UP";c.constants.ConstantsApp.EVENT_SHIELD_DOWN="EVENT_SHIELD_DOWN";c.constants.ConstantsApp.BOOL_PAUSED="bool_paused";c.constants.ConstantsApp.BOOL_MUTED="bool_muted";c.constants.ConstantsApp.BOOL_MOUSE_PRESSED="boolMousePressed";c.constants.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";c.constants.ConstantsApp.BOOL_GAME_WIN=
"bool_game_win";c.constants.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";c.constants.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";c.constants.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";c.constants.ConstantsApp.BOOL_MASTER_MENU_OPENED="bool_master_menu_opened";c.constants.ConstantsApp.BOOL_MASTER_BENDING="bool_master_bending";c.constants.ConstantsApp.BOOL_SHOW_TIP_MASTER="bool_show_tip_master";c.constants.ConstantsApp.BOOL_IS_PLAYER_RIDING="bool_is_player_riding";c.constants.ConstantsApp.BOOL_LOW_QUAL_MODE=
"BOOL_LOW_QUAL_MODE";c.constants.ConstantsApp.FLOAT_CANVAS_SCALE="canvas_scale";c.constants.ConstantsApp.FLOAT_COMBO="float_combo";c.constants.ConstantsApp.FLOAT_SCORE="float_score";c.constants.ConstantsApp.FLOAT_CHI="float_chi";c.constants.ConstantsApp.FLOAT_SPEED="float_speed";c.constants.ConstantsApp.FLOAT_MASTER_MENU_TIMER="float_master_menu_timer";c.constants.ConstantsApp.INT_ENVIRONMENT="int_environment";c.constants.ConstantsApp.INT_DISTANCE="distance";c.constants.ConstantsApp.INT_DISTANCE_BEST=
"distance_best";c.constants.ConstantsApp.INT_YUAN="yuan";c.constants.ConstantsApp.INT_YUAN_TOTAL="yuan_total";c.constants.ConstantsApp.INT_YUAN_COST="yuan_cost";c.constants.ConstantsApp.INT_HEALTH="health";c.constants.ConstantsApp.INT_ACTIVE_FERRETS="active_ferrets";c.constants.ConstantsApp.INT_UPGRADE_LEVEL="upgrade_level";c.constants.ConstantsApp.CONFIG_XML_PATH="config/config.xml";c.constants.ConstantsApp.STRING_ELEMENT="element";c.constants.ConstantsApp.STRING_UPGRADE_ID="upgrade_id";c.constants.ConstantsApp.TYPE_OBSTACLE=
"obstacle";c.constants.ConstantsApp.TYPE_PLAYER="player";c.constants.ConstantsApp.TYPE_PICKUP="pickup";c.constants.ConstantsApp.TYPE_BACKGROUND="bg";c.constants.ConstantsApp.TYPE_EFFECT="eff";c.constants.ConstantsApp.TYPE_PROJECTILE="projectile";c.constants.ConstantsApp.TYPE_ENEMY="enemy";c.constants.ConstantsApp.TYPE_ENEMY_PROJECTILE="enemy_projectile";c.constants.ConstantsApp.TYPE_PARTICLE="particle";c.constants.ConstantsApp.TYPE_PLAYER_SCORE_BURST="scoreburst";c.constants.ConstantsApp.INT_LEVEL_COLLECTOR=
"level_collector";c.constants.ConstantsApp.INT_LEVEL_FIRE="level_fire";c.constants.ConstantsApp.INT_LEVEL_EARTH="level_earth";c.constants.ConstantsApp.INT_LEVEL_WATER="level_water";c.constants.ConstantsApp.INT_LEVEL_AIR="level_air";c.constants.ConstantsApp.INT_LEVEL_NAGA="level_naga";c.constants.ConstantsApp.INT_LEVEL_FIRE_FERRET="level_fire_ferret";c.constants.ConstantsApp.INT_LEVEL_SKY_BISON="level_sky_bison";c.constants.ConstantsApp.STAGE_WIDTH=960;c.constants.ConstantsApp.STAGE_HEIGHT=560;c.constants.ConstantsApp.STAGE_CENTER_X=
480;c.constants.ConstantsApp.STAGE_CENTER_Y=280;c.constants.ConstantsApp.FRAMES_PER_SECOND=30;c.constants.ConstantsApp.GROUND_Y_BASE=1E3;c.constants.ConstantsApp.LIMIT_CHI=100;c.constants.ConstantsApp.TIME_TO_CRAZY=60;c.constants.ConstantsApp.POOL_SIZE_PARTICLES=40;c.constants.ConstantsApp.POOL_SIZE_YUANS=20;c.constants.ConstantsApp.POOL_SIZE_ENEMIES=5;c.constants.ConstantsApp.HEALTH_MAX=3;c.constants.ConstantsApp.REGEN_TIME=1.5;c.constants.ConstantsApp.USE_PARTICLE_POOLING=!0;c.constants.ConstantsApp.DEBUG_MODE=
!1;c.constants.ConstantsApp.MINIMUM_ATTRACT_DISTANCE=300;c.constants.ConstantsApp.INPUT_CLICK="input_click";c.constants.ConstantsApp.INPUT_UP="up";c.constants.ConstantsApp.INPUT_DOWN="down";c.constants.ConstantsApp.INPUT_LEFT="left";c.constants.ConstantsApp.INPUT_RIGHT="right";c.constants.ConstantsApp.INPUT_SPACE="space";c.constants.ConstantsApp.INPUT_E="e";c.constants.ConstantsApp.INPUT_Z="z";c.constants.ConstantsApp.LAYER_BG="bg";c.constants.ConstantsApp.LAYER_MAIN="main";c.constants.ConstantsApp.LAYER_PLAYER_BELOW=
"player_below";c.constants.ConstantsApp.LAYER_PLAYER="player";c.constants.ConstantsApp.LAYER_PLAYER_ABOVE="player_above";c.constants.ConstantsApp.LAYER_MAIN_TOP="top";c.constants.ConstantsApp.PARTICLE_FIRE="fire";c.constants.ConstantsApp.PARTICLE_FIRE_FERRET="fire_ferret";c.constants.ConstantsApp.PARTICLE_WATER="water";c.constants.ConstantsApp.PARTICLE_EARTH="earth";c.constants.ConstantsApp.PARTICLE_AIR="air";c.constants.ConstantsApp.PARTICLE_CHI="chi";c.constants.ConstantsApp.PARTICLE_EQUALIZER=
"equalizer";c.constants.ConstantsApp.PARTICLE_CABBAGE="cabbage";c.constants.ConstantsApp.PARTICLE_SMOKE="smoke";c.constants.ConstantsApp.PARTICLE_SPARKLE_WHITE="sparkle_white";c.constants.ConstantsApp.PARTICLE_NEW_RECORD="new_record";c.constants.ConstantsApp.PARTICLE_MASTER_MENU="master_menu";c.constants.ConstantsApp.PICKUP_TOKEN_FIRE_FERRET="token_fire_ferret";c.constants.ConstantsApp.PICKUP_TOKEN_SKY_BISON="token_sky_bison";c.constants.ConstantsApp.PICKUP_TOKEN_NAGA="token_naga";c.constants.ConstantsApp.EFFECT_AIR_JUMP=
"air_jump";c.constants.ConstantsApp.EFFECT_BEND_AIR="air_special";c.constants.ConstantsApp.EFFECT_BEND_EARTH="earth_bend";c.constants.ConstantsApp.EFFECT_BEND_WATER="bend_water";c.constants.ConstantsApp.EFFECT_BEND_FIRE="fire_bend";c.constants.ConstantsApp.EFFECT_IMPACT_AIR="air_hit";c.constants.ConstantsApp.EFFECT_IMPACT_EARTH="earth_hit";c.constants.ConstantsApp.EFFECT_IMPACT_WATER="water_hit";c.constants.ConstantsApp.EFFECT_IMPACT_FIRE="fire_hit";c.constants.ConstantsApp.EFFECT_SHOCKED="electricity_hit";
c.constants.ConstantsApp.ELEMENT_FIRE="fire";c.constants.ConstantsApp.ELEMENT_WATER="water";c.constants.ConstantsApp.ELEMENT_EARTH="earth";c.constants.ConstantsApp.ELEMENT_AIR="air";c.constants.ConstantsApp.ENEMY_RUNNER=0;c.constants.ConstantsApp.ENEMY_HANGER=1;c.constants.ConstantsApp.ENEMY_BIKER=2;c.constants.ConstantsApp.ENEMY_MECHA=3;c.constants.ConstantsApp.ENEMY_CRATE=4;c.constants.ConstantsApp.OPTION_STRESS_TEST=!1;c.constants.ConstantsApp.OPTION_AUTOFIRE=!1;c.constants.ConstantsApp.OPTION_RETINA=
!1;c.constants.ConstantsApp.OPTION_SKIP_SPLASH=!1;c.constants.ConstantsApp.scaleFactor=1;c.constants.ConstantsScreen.SCREEN_LOADING="loadpanel";c.constants.ConstantsScreen.SCREEN_SPLASH="splash";c.constants.ConstantsScreen.SCREEN_HELP="help";c.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";c.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";c.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";c.constants.ConstantsScreen.SCREEN_END_GAME="endgame";c.constants.ConstantsScreen.SCREEN_MASTER_BENDING=
"masterbending";c.constants.ConstantsScreen.SCREEN_SHOP="shop";c.constants.ConstantsScreen.TRANSITION_FADE=0;c.constants.ConstantsScreen.TRANSITION_SCROLL=1;c.constants.ConstantsScreen.TRANSITION_STAGED=2;c.constants.ConstantsScreen.TRANSITION_SCREENSHOT=3;c.constants.ConstantsScreen.CHANGE_OPEN_BEGIN=0;c.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;c.constants.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;c.constants.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;c.constants.ConstantsScreen.OUTPUT_OPENED=0;
c.constants.ConstantsScreen.OUTPUT_CLOSED=1;c.constants.ConstantsScreen.CONDITION_CLOSED_ALL=0;c.constants.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;c.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;c.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;c.constants.ConstantsScreen.CONDITION_IMMEDIATE=4;c.constants.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";c.constants.ConstantsScreen.FLOW_SPLASH_PRINTABLE="FLOW_SPLASH_PRINTABLE";c.constants.ConstantsScreen.FLOW_HELP_CLOSE=
"FLOW_HELP_CLOSE";c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";c.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";c.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_OPEN=
"FLOW_GAMEPLAY_ELEMENTS_OPEN";c.constants.ConstantsScreen.FLOW_GAMEPLAY_ELEMENTS_CLOSE="FLOW_GAMEPLAY_ELEMENTS_CLOSE";c.constants.ConstantsScreen.FLOW_SHOP_OPEN="FLOW_SHOP_OPEN";c.constants.ConstantsScreen.FLOW_SHOP_CLOSE="FLOW_SHOP_CLOSE";c.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";c.constants.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";c.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";c.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN=
"FLOW_BRANCH_LEVEL_WIN";c.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";c.constants.ConstantsScreen.FLOW_CHARACTER_SELECT_SPLASH="FLOW_CHARACTER_SELECT_SPLASH";c.constants.ConstantsScreen.FLOW_GAME_START="FLOW_GAME_START";h.buttons.ButtonBase.UP="workinBtnUp";h.buttons.ButtonBase.DOWN="workinBtnDown";h.buttons.ButtonBase.CLICK="workinBtnClick";h.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";h.screens.data.ScreenStateData.ACTION_STOP=0;h.screens.data.ScreenStateData.ACTION_OPENED=
1;h.screens.data.ScreenStateData.ACTION_EVENT=2;h.screens.data.ScreenStateData.ACTION_NEW_STATE=3;h.screens.data.ScreenStateData.ACTION_CLOSED=4;h.screens.data.ScreenStateData.ACTION_FLOW=5;i.World._STATE_PLAYING=1;i.World._WORLD_BOTTOM_BOUNDS=0;G.ConstantsCloud.FONT_DEFAULT="Basic";G.ConstantsCloud.STRING_REGION_ID="cloudregionid";G.ConstantsCloud.LOCALIZATION_XML_PATH="config/";G.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";G.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";
G.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY="EVENT_INPUT_ARBITRARY_KEY";m.WMEventFlow.EVENT_FLOW="Nflow";m.WMEventInput.EVENT_INPUT="eventinput";m.WMEventInput.PHASE_DOWN=1;m.WMEventInput.PHASE_UP=0;m.WMEventInput.PHASE_MOVE=2;m.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";m.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";m.WMEventUpdate.EVENT_UPDATE="eventupdate";n.WorkinMotion.EASE_IN_OUT="ease";n.WorkinMotion.EASE_IN="in";n.WorkinMotion.EASE_OUT=
"out";n.WorkinMotion.EASE_IN_FAST="infast";n.WorkinMotion.EASE_OUT_FAST="outfast";n.WorkinMotion.EASE_LINEAR="linear";n.WorkinMotion.EASE_BOUNCE_IN="bouncein";u.ServiceAnalytics._offlineUserId="";u.ServiceAnalytics._offlineTrackingId="";u.ServiceAnalytics._appId="";u.ServiceAnalytics._sessionId="";u.ServiceAnalytics._flagInitted=!1;u.ServiceAnalytics._flagStarted=!1;u.ServiceAnalytics._flagLoaded=!1;u.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";u.ServiceAnalytics.OPTION_ENABLE_TRACKING=
!0;d.WMPointer._DELTA_ALLOWANCE=30;d.WMPointer._DELTA_TIMEOUT=0.2;d.WMSound.FADE_NONE=0;d.WMSound.FADE_IN=1;d.WMSound.FADE_OUT=-1;d.WorkinCloud.instance=new d.WorkinCloud;f.html.HtmlPlatform.instance=new f.html.HtmlPlatform;q.SignalBase.DISPATCHING_SENTINEL=new q.SignalConnection(null,null);D.root=new P;D.uncaughtError=new q.Signal1;D.hidden=new q.Value(!1);D.hasGPU=new q.Value(!1);D.volume=new M.AnimatedFloat(1);D._platform=f.html.HtmlPlatform.instance;D._calledInit=!1;x.window="undefined"!=typeof window?
window:null;x.document="undefined"!=typeof window?window.document:null;x.navigator="undefined"!=typeof window?window.navigator:null;o.Manifest.__meta__={obj:{assets:[{gameplay_audio:[{bytes:6979,md5:"d625a23f5891a1deba52d282f9f13cb8",name:"audio/biker.mp3"},{bytes:21086,md5:"b75d08610628246984ad9436a49ba6f6",name:"audio/biker.ogg"},{bytes:1571,md5:"2623f586c27db254c5018c85e371e5bc",name:"audio/blamp.mp3"},{bytes:5025,md5:"406bd53d703e5ac3e6415d629060c0f6",name:"audio/blamp.ogg"},{bytes:6952,md5:"d17ff8b42193f91c1bb066685c1990fc",
name:"audio/button.mp3"},{bytes:6625,md5:"50a7d1d8161f8eacc10034c3699bebaa",name:"audio/button.ogg"},{bytes:5644,md5:"4d35e99d463ebc375d2c74189b95b78f",name:"audio/buy.mp3"},{bytes:10557,md5:"4c40163dc896c36a93dfaf6c8cbd1417",name:"audio/buy.ogg"},{bytes:6125,md5:"37320173138e0bf3012264d53d306216",name:"audio/cabbage_crate.mp3"},{bytes:10502,md5:"a0baefb6fe60af43910affeb1ae13570",name:"audio/cabbage_crate.ogg"},{bytes:15680,md5:"b2ac7906ad76eec6eab502731282fa9e",name:"audio/defeated.mp3"},{bytes:21037,
md5:"1469c4c3faf107921dde2031527be280",name:"audio/defeated.ogg"},{bytes:1256,md5:"3ce245f671fd3f60e6bdfdf25b129e68",name:"audio/doo.mp3"},{bytes:4730,md5:"d39fc1d9b74ecda5e60b2c479ae6919a",name:"audio/doo.ogg"},{bytes:4713,md5:"4c6e395433ec00d33805b7be466cc564",name:"audio/electric_hit.mp3"},{bytes:9713,md5:"651d8534a345bff2417fd3ecd82a1b42",name:"audio/electric_hit.ogg"},{bytes:3306,md5:"cad37f276145b761704dd27b996f4633",name:"audio/equalizer_hit_01.mp3"},{bytes:7490,md5:"cdce8e813a658b62849f690c3d717864",
name:"audio/equalizer_hit_01.ogg"},{bytes:3150,md5:"eaafe3dea782eb37da4ba62f588583e5",name:"audio/equalizer_hit_02.mp3"},{bytes:5936,md5:"e442afc5443b5d2d34dd1c0d7a8b7a72",name:"audio/equalizer_hit_02.ogg"},{bytes:1897,md5:"390d6b7175064586ae583e0de0ece7bc",name:"audio/equalizer_hit_03.mp3"},{bytes:4914,md5:"01e779b49dac00ad83b438e9583db0c5",name:"audio/equalizer_hit_03.ogg"},{bytes:4337,md5:"3e4b6230d1b19d7b62323dec96188590",name:"audio/explode.mp3"},{bytes:10998,md5:"73ee695f64ad22c76d8ba5c39c8a4df6",
name:"audio/explode.ogg"},{bytes:7398,md5:"f30918aa75dce2f9f0f77e383e3c3033",name:"audio/explode_fire.mp3"},{bytes:10952,md5:"5353cb4d6decd4e6005068d73ebd872b",name:"audio/explode_fire.ogg"},{bytes:7398,md5:"f30918aa75dce2f9f0f77e383e3c3033",name:"audio/explode_fire0.mp3"},{bytes:3871,md5:"826b064ca0dc0b07df5e360f3ee450a3",name:"audio/explode_rock.mp3"},{bytes:10426,md5:"8075308a190b1909b07d54019bae0061",name:"audio/explode_rock.ogg"},{bytes:4264,md5:"d1ab5b307041b30b02eea3c4d2b07e8d",name:"audio/explode_water.mp3"},
{bytes:11338,md5:"f1ebd6f2d05ef9f8fbd4bb1d4693b01e",name:"audio/explode_water.ogg"},{bytes:1990,md5:"71243880f0ec985d4a82ce0194048228",name:"audio/fire_ferret.mp3"},{bytes:7810,md5:"2abcbe8114f286fa1d7aca33f496cf63",name:"audio/fire_ferret.ogg"},{bytes:7710,md5:"70a590b923b73f176dd257c4760ed116",name:"audio/gameover_02.mp3"},{bytes:15446,md5:"c3e4cac8514f890af5200fa40f1ba10c",name:"audio/gameover_02.ogg"},{bytes:5124,md5:"f1199aed75c064adabd0889ce5cfe406",name:"audio/impact_deep.mp3"},{bytes:12089,
md5:"6bec63a8853954f10e2708a0ed5a7217",name:"audio/impact_deep.ogg"},{bytes:5126,md5:"80bfe1a63d5667fc0d912dcef86304c4",name:"audio/korra_crackle.mp3"},{bytes:13693,md5:"f1789e3878c0237ad34591849d6250a4",name:"audio/korra_crackle.ogg"},{bytes:1204,md5:"d41492dc56221f40d01285528474d4d4",name:"audio/korra_hit.mp3"},{bytes:5007,md5:"515ac95ee95d935eaad80f50fa487162",name:"audio/korra_hit.ogg"},{bytes:1989,md5:"f41aa67b929b33d8d32dccbb6bb3db66",name:"audio/korra_ugh.mp3"},{bytes:7164,md5:"10b7968b3553e7da71a808bb6d994fb9",
name:"audio/korra_ugh.ogg"},{bytes:5591,md5:"873adb2b24b1671956297659405fa6fe",name:"audio/levelup.mp3"},{bytes:17653,md5:"f6dadb73b1f07d8446559edbb3508b46",name:"audio/levelup.ogg"},{bytes:3317,md5:"186b42fb3dd4ed785b49cc92de599b8d",name:"audio/mecha.mp3"},{bytes:10743,md5:"84c886473b781a185ea6e59b5eb8b19a",name:"audio/mecha.ogg"},{bytes:6452,md5:"fe0e71b2302ea9ee86b3184704247873",name:"audio/mount.mp3"},{bytes:14880,md5:"6410182bcc892e8638548f4cf2a13445",name:"audio/mount.ogg"},{bytes:1200,md5:"53e826b8935e27baf20ea491a5ab9a12",
name:"audio/naga.mp3"},{bytes:5617,md5:"d18bb36459c51663b853a8ca7512b3bb",name:"audio/naga.ogg"},{bytes:1755,md5:"7ede906693c6c7c0fc58d36ebc5c0ff0",name:"audio/naga_attack.mp3"},{bytes:6799,md5:"44854b4462f2b468eabd3402dc00fe09",name:"audio/naga_attack.ogg"},{bytes:1748,md5:"de85c74add672f1acff84f0733d8b8dc",name:"audio/nope.mp3"},{bytes:6121,md5:"45a4b6e942065545ec3a918074d97586",name:"audio/nope.ogg"},{bytes:2691,md5:"a203750541493758b9bb5f216ec61d82",name:"audio/pickup.mp3"},{bytes:8642,md5:"379c51e30b60824f0b5f4ef6c58559fb",
name:"audio/pickup.ogg"},{bytes:1224,md5:"b68090fffea45b69940bb6c4f8c37d0e",name:"audio/point_collect.mp3"},{bytes:7673,md5:"3370d500eb740deb24a9d0fbfa253b7a",name:"audio/point_collect.ogg"},{bytes:7161,md5:"062f16a68f3c4c61835f87c60e515492",name:"audio/sky_bison.mp3"},{bytes:17280,md5:"cc73af39ec6dad2ab773e112cea25965",name:"audio/sky_bison.ogg"},{bytes:1760,md5:"e1cbfaa5dd9695eb0a52245d5b128f9c",name:"audio/sky_bison_attack.mp3"},{bytes:6240,md5:"b62a14feb5469d5c8e0cc27f71d34974",name:"audio/sky_bison_attack.ogg"},
{bytes:7475,md5:"04ec22f9acbea26c9a680a7069d3ae2b",name:"audio/successful.mp3"},{bytes:19059,md5:"49a8d49755c59d85caa8201ada571721",name:"audio/successful.ogg"},{bytes:967,md5:"9c8e75483337cd95d8cf96aa10a5dc79",name:"audio/tap_01.mp3"},{bytes:4802,md5:"814d09fad2d9104474a8db16ac8f3f14",name:"audio/tap_01.ogg"},{bytes:1437,md5:"f1d8a08a6a32f381124c8106b957d352",name:"audio/tap_02.mp3"},{bytes:5835,md5:"35c65fb24c4ff7db770406cf5dbc9d49",name:"audio/tap_02.ogg"},{bytes:1514,md5:"a551967b3f354491f3c38fab97cf9493",
name:"audio/throw.mp3"},{bytes:5610,md5:"78449beea1f2fa5f08d0a5608ee5c265",name:"audio/throw.ogg"},{bytes:1359,md5:"14545eb1acc6a2f4d0cd2d6905c7f545",name:"audio/whoosh.mp3"},{bytes:5425,md5:"b78fe169a28b688164bd048595a85e6c",name:"audio/whoosh.ogg"},{bytes:1435,md5:"57aec4942dde7ea326ca7b1f4bda055f",name:"audio/yuan.mp3"},{bytes:6679,md5:"909a07947fd6e8582f65c7b803643c4d",name:"audio/yuan.ogg"}],initial_load:[{bytes:190408,md5:"3111890c03176c2dd243383007ac29d3",name:"audio/music_korra.mp3"},{bytes:331404,
md5:"af9f4fe2391b7fa0f88e1fb5b4103c4d",name:"audio/music_korra.ogg"},{bytes:926,md5:"23606d20fc24306e3752891742c6d88c",name:"ui/AssetBlank.png"},{bytes:134110,md5:"05e6d8ea9b64c253e76149f56fb2091e",name:"ui/AssetScreenSplash.jpg"}],initial_load_hd:[{bytes:258739,md5:"c0a317a650f423d4103d006fae88f68d",name:"audio/music_korra.mp3"},{bytes:331404,md5:"af9f4fe2391b7fa0f88e1fb5b4103c4d",name:"audio/music_korra.ogg"},{bytes:926,md5:"23606d20fc24306e3752891742c6d88c",name:"ui/AssetBlank.png"},{bytes:944715,
md5:"2aee16a21926bdf5687a686ccee4f943",name:"ui/AssetScreenSplash.jpg"},{bytes:636524,md5:"0caad18bb0308988b15dbb4e6f9befc3",name:"ui/AssetScreenSplash.png"}],gameplay_universal_hd:[{bytes:128313,md5:"bd040cedc896c61ca4bf90962ee8445d",name:"elements/AssetBgGround1.png"},{bytes:106849,md5:"78a46a4a557a914bf03bd66dc02d59a6",name:"elements/AssetBgGround2.png"},{bytes:183628,md5:"5383c7404a0b1b764985fdcacb940907",name:"elements/AssetBgGround3.png"},{bytes:55332,md5:"aaf6365b6fa0412d09af0b55d580678a",
name:"elements/AssetBgHorizon.jpg"},{bytes:191357,md5:"a2c0828affb6a83f99391b333b9150e2",name:"elements/AssetBgMid1.png"},{bytes:106580,md5:"a214a76ed00ec50d38034674487470e1",name:"elements/AssetBgMid2.png"},{bytes:59479,md5:"22b735a8cd9985b87982de1c7a7d3ce6",name:"elements/AssetBgMid3.png"},{bytes:806,md5:"381d082590d8097147354b91efa3aaf3",name:"elements/particles/particle_air.png"},{bytes:2763,md5:"62fdcc7d37201fa02ae4bf842e5e5fc1",name:"elements/particles/particle_cabbage.png"},{bytes:587,md5:"abedbf7b6d6f83d22a9df1bd0f8ab05f",
name:"elements/particles/particle_chi.png"},{bytes:1134,md5:"7aa5977d960e9a179600d6dd81182e8c",name:"elements/particles/particle_earth.png"},{bytes:12686,md5:"67b0e2f7d78bf986823af35a43e6860f",name:"elements/particles/particle_equalizer.png"},{bytes:560,md5:"3e3d85f51b56b827af30d973bcc2e3f2",name:"elements/particles/particle_fire.png"},{bytes:1919,md5:"21b4065f4b5c6339116f08a0e6dbbcf1",name:"elements/particles/particle_poof.png"},{bytes:877,md5:"2e792aa9ac443b0b499521e7e4ccd361",name:"elements/particles/particle_smoke.png"},
{bytes:1111,md5:"92e5336192bc02aef7258e433c5e8d60",name:"elements/particles/particle_sparkle_blue.png"},{bytes:757,md5:"ae9e2869f37b64691db4d7b4d2db0a36",name:"elements/particles/particle_sparkle_white.png"},{bytes:985,md5:"ad6d19c5420e14755885411e6d197ae0",name:"elements/particles/particle_sparkle_yellow.png"},{bytes:471,md5:"9af138befd14e2f10ef98907bed46402",name:"elements/particles/particle_star.png"},{bytes:3194,md5:"d25b24609fd2d8ec022e1f3bef7e4831",name:"elements/particles/particle_water.png"},
{bytes:10766,md5:"8913ee56ee23c23cf00d1cc9d9b8445d",name:"elements/pickups/chi.png"},{bytes:17119,md5:"3ca6018c023b7f8de3e0f341e489ed69",name:"elements/pickups/token_bison.png"},{bytes:17536,md5:"971bdc9cf1bc7bcf9766daf1e8472988",name:"elements/pickups/token_ferret.png"},{bytes:17078,md5:"0de7bb5df0f659aa33948a40fc684c33",name:"elements/pickups/token_naga.png"},{bytes:9171,md5:"e55584b217bca594178d68ec80ac8ba7",name:"elements/pickups/yuan.png"},{bytes:90350,md5:"696ad61e0d4d2599c7e17de30d5b2a99",
name:"flump_bits/atlas0.png"},{bytes:33791,md5:"64492de81e11903b8869afde2d6455a4",name:"flump_bits/atlas1.png"},{bytes:3156,md5:"ec5ca1a840acd02c49371959e401904b",name:"flump_bits/library.json"},{bytes:32,md5:"a761275d9ef132181aaf09ade02c88df",name:"flump_bits/md5"},{bytes:1,md5:"4f74da3a928fc44d3c4161537c6a2bec",name:"flump_bits/version"},{bytes:4343964,md5:"bd4f7a63ec18eedb53a49461bdf6c2e6",name:"flump_effects/atlas0.png"},{bytes:67473,md5:"f552ca6ea1d681bb2f5dbdea53f32088",name:"flump_effects/atlas1.png"},
{bytes:15516,md5:"8a6e85dad9f601a575d35c971ad75c5b",name:"flump_effects/atlas2.png"},{bytes:53617,md5:"703f7151c1bf9e07162b0d1b8616ac96",name:"flump_effects/library.json"},{bytes:32,md5:"ab84abaf24ede5228138571dcd0b8e17",name:"flump_effects/md5"},{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",name:"flump_effects/version"},{bytes:2302574,md5:"fd137aabdc4adda6189fbf8be4da7315",name:"flump_enemies/atlas0.png"},{bytes:457,md5:"64c34e187472ec28e430d0a9fc9d4c45",name:"flump_enemies/atlas1.png"},{bytes:63761,
md5:"5049d968bb6653e34e48ad8b4757ed28",name:"flump_enemies/library.json"},{bytes:32,md5:"6e8487b8a47ce1abe7c136ddcf991c1b",name:"flump_enemies/md5"},{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",name:"flump_enemies/version"},{bytes:1258120,md5:"e4779b58d58250aaca90549b30046c95",name:"flump_mounts/atlas0.png"},{bytes:170759,md5:"054c5792a08ba938e8135e29022be8e1",name:"flump_mounts/library.json"},{bytes:32,md5:"b673cf9e1fccfe7abdd797238db74c44",name:"flump_mounts/md5"},{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",
name:"flump_mounts/version"},{bytes:926,md5:"23606d20fc24306e3752891742c6d88c",name:"ui/AssetBlank.png"},{bytes:53507,md5:"6260e0fdc7029d2e5e6328487639ac01",name:"ui/AssetScreenEndGame.jpg"},{bytes:139335,md5:"5eb2ffa6a54134b8c7469187691a479e",name:"ui/AssetScreenGameplayHud.png"},{bytes:341800,md5:"b98d80eae1c45aa23c946fbabdc6b8c1",name:"ui/AssetScreenGameplayMenu.png"},{bytes:75663,md5:"f63b3229244f3d0907a5f810e8b8cd70",name:"ui/AssetScreenHelp.jpg"},{bytes:75711,md5:"9ab934d7457ae7c9d2f3bea554c9c0af",
name:"ui/AssetScreenHelpDesktop.jpg"},{bytes:6890,md5:"1761d8cecd26e4338ae4632be6d50c6d",name:"ui/AssetScreenOverlay.png"},{bytes:326157,md5:"b2af3e382a66a702b82f9a0b490a2b6d",name:"ui/AssetScreenQuitConfirm.png"},{bytes:51510,md5:"7adac3e4cc6bda109b009f89cadcd465",name:"ui/AssetScreenShop.jpg"},{bytes:4979,md5:"6680513cfc89c5bf8c068435113b3fdc",name:"ui/button_air_off.png"},{bytes:10667,md5:"309044ddc676da6562bad8304319b7cb",name:"ui/button_air_on.png"},{bytes:5363,md5:"bc9f9d69746c2a59632561a2d1dcf555",
name:"ui/button_earth_off.png"},{bytes:10061,md5:"30c8559d0c85f15425c2cff8f84dd020",name:"ui/button_earth_on.png"},{bytes:4539,md5:"165a93a9932812eba8654fcce199b64f",name:"ui/button_fire_off.png"},{bytes:9128,md5:"31aa0e13d168fcb079addf865d21ffc5",name:"ui/button_fire_on.png"},{bytes:5681,md5:"634cb51c0a1e29cf5950541e101ca032",name:"ui/button_water_off.png"},{bytes:10384,md5:"dc1fc6ab7aac4ce4d95024c1a80b4c3f",name:"ui/button_water_on.png"},{bytes:11854,md5:"c8903cb7e8530335a27d8d82e081607f",name:"ui/chi_back.png"},
{bytes:1352,md5:"468e983b132d9aa28b0742f3486b48f8",name:"ui/chi_fill.png"},{bytes:12365,md5:"bb8e8a756001865d349486427418b30f",name:"ui/endgame_button_play_up.png"},{bytes:12372,md5:"00502f89540fbe37816d7ffa66d8114b",name:"ui/help_button_close_up.png"},{bytes:11709,md5:"50b95a49931039810447cefde6f402a4",name:"ui/hud_button_pause_up.png"},{bytes:10908,md5:"e8a4f19fa6ce6ae64cf918e3d7ca09ca",name:"ui/hud_health_off.png"},{bytes:16642,md5:"e7a3b0e135156f3490f455f610b0367c",name:"ui/hud_health_on.png"},
{bytes:23640,md5:"0fb4866bc306cda862622d7797956464",name:"ui/hud_master_bend_up.png"},{bytes:15736,md5:"0aa84add8f3652c4e8a5f8482083eeb1",name:"ui/menu_button_back_up.png"},{bytes:15998,md5:"a6e5771ce8cd35854ec78701ede77f1a",name:"ui/menu_button_help_up.png"},{bytes:16335,md5:"5082c67cc36918fc5b1697e5d469b9d2",name:"ui/menu_button_quit_up.png"},{bytes:14887,md5:"85285efb241a6180941149226a1dfc02",name:"ui/menu_button_soundoff_up.png"},{bytes:15211,md5:"13015f90cd47766eb9c2f817eed87dd3",name:"ui/menu_button_soundon_up.png"},
{bytes:14023,md5:"492b461d6df4008b65e01100a72c76b8",name:"ui/popup_master_menu.png"},{bytes:14313,md5:"28d5eeab13a5ffb62e4f46c780428605",name:"ui/popup_master_menu_desktop.png"},{bytes:8002,md5:"4760d089ca34cc4e6ca476971f96aac2",name:"ui/popup_new_record.png"},{bytes:4297,md5:"d2d6b7e27843c310f50b2bf4c24f825b",name:"ui/popup_new_record_small.png"},{bytes:36296,md5:"3cc6012a667aacd49625c5714c52e9d2",name:"ui/quitconfirm_button_no_up.png"},{bytes:36575,md5:"8b98aca3cbadb5dafcdf71ae05368339",name:"ui/quitconfirm_button_yes_up.png"},
{bytes:28923,md5:"7a8d12a33f532a545366fab23488313f",name:"ui/shop_air_down.png"},{bytes:28502,md5:"8b477a48d49c60963a165280efd6afbf",name:"ui/shop_air_up.png"},{bytes:25221,md5:"fafba048ccc2694de854e891b5349f83",name:"ui/shop_bison_down.png"},{bytes:25105,md5:"8450511564da0eab26491a42769ca027",name:"ui/shop_bison_up.png"},{bytes:20188,md5:"35416996eae3ce50cae4dfcb57ce0349",name:"ui/shop_button_buy_up.png"},{bytes:12132,md5:"9837265107a59d0b04239b8843dabc1d",name:"ui/shop_button_play_up.png"},{bytes:16494,
md5:"31d9237be58c088c7805727d3be612ae",name:"ui/shop_button_up.png"},{bytes:27807,md5:"223f14a2a96938b00c9ba57f7ce5ab2d",name:"ui/shop_earth_down.png"},{bytes:27396,md5:"16f79a5fb67c1eb236ccde75db264b9d",name:"ui/shop_earth_up.png"},{bytes:26108,md5:"7c07fb992b95d356881d170e04ab4c25",name:"ui/shop_ferret_down.png"},{bytes:25919,md5:"3d8ca9413cbee35f95eef56e1fcd52f0",name:"ui/shop_ferret_up.png"},{bytes:28210,md5:"5de0e2a890b2e422eec5fe5b9613e4bb",name:"ui/shop_fire_down.png"},{bytes:27890,md5:"cc28b83d26cba7be6101a51e462f5bf7",
name:"ui/shop_fire_up.png"},{bytes:26201,md5:"f61a250e68580272952c225d867d06c0",name:"ui/shop_naga_down.png"},{bytes:26063,md5:"5cdcc7c5c2c8a18c31088d63b50a6cb7",name:"ui/shop_naga_up.png"},{bytes:28761,md5:"1ac7c7e9c57ed93a44997e0002449aff",name:"ui/shop_water_down.png"},{bytes:28481,md5:"df40a3af14a8a7dce54d300228a99bc2",name:"ui/shop_water_up.png"},{bytes:27840,md5:"c96f2bd890dfdddf1451c3e0e67035fa",name:"ui/shop_yuan_down.png"},{bytes:27871,md5:"e5633271b055886a863c8ea642265957",name:"ui/shop_yuan_up.png"},
{bytes:52217,md5:"9dbbf48fac146a57d956279f05f8fe6d",name:"ui/splash_button_play_up.png"},{bytes:15532,md5:"cb8d0a5245b510a32bcd6f4a57e1295d",name:"ui/upgrade_air.png"},{bytes:13531,md5:"aa1aa1bc1bbb3209c5163bc9a557e901",name:"ui/upgrade_bison.png"},{bytes:16582,md5:"cfb0c1ea9e2e47ed589d5737630241f4",name:"ui/upgrade_earth.png"},{bytes:12354,md5:"a932b657b97ff93accf63341fd0ed5f5",name:"ui/upgrade_ferret.png"},{bytes:15326,md5:"217ba9e3bd2691d341187944c547f8b5",name:"ui/upgrade_fire.png"},{bytes:14488,
md5:"b22f7bbcef93310261d9288fcd8f0a15",name:"ui/upgrade_naga.png"},{bytes:16190,md5:"d6de022366957ca49d1be14dabe763b6",name:"ui/upgrade_water.png"},{bytes:12601,md5:"8337ccde7fba1e35425db5d10074df24",name:"ui/upgrade_yuans.png"},{bytes:88294,md5:"55b5d48c3392462d044109e96d2a1a10",name:"ui_unbaked/AssetScreenEndGame.jpg"},{bytes:125300,md5:"906a1b4578ae1741f877b51fa41b245f",name:"ui_unbaked/AssetScreenGameplayHud.png"},{bytes:306831,md5:"f4d0f5131975692e4cfc4aac8b1d49f6",name:"ui_unbaked/AssetScreenGameplayMenu.png"},
{bytes:493663,md5:"fb4d6772e7025b324d1ff4093c9adeb0",name:"ui_unbaked/AssetScreenHelp.jpg"},{bytes:314793,md5:"41635548ca1690128100184f029578b2",name:"ui_unbaked/AssetScreenQuitConfirm.png"},{bytes:85281,md5:"834853e67c44c8280a38133c63d3b355",name:"ui_unbaked/AssetScreenShop.jpg"},{bytes:9364,md5:"b7b28eaa0009d63b35e057cff62570d7",name:"ui_unbaked/popup_master.png"},{bytes:36094,md5:"9627fb5c3f386dc3db075756c80af58b",name:"ui_unbaked/quitconfirm_button_yes_up.png"},{bytes:20019,md5:"3a0f23476f29a3dbdbe66f11f6fc42bf",
name:"ui_unbaked/shop_button_buy_up.png"}],gameplay_universal:[{bytes:128313,md5:"bd040cedc896c61ca4bf90962ee8445d",name:"elements/AssetBgGround1.png"},{bytes:106849,md5:"78a46a4a557a914bf03bd66dc02d59a6",name:"elements/AssetBgGround2.png"},{bytes:183628,md5:"5383c7404a0b1b764985fdcacb940907",name:"elements/AssetBgGround3.png"},{bytes:55332,md5:"aaf6365b6fa0412d09af0b55d580678a",name:"elements/AssetBgHorizon.jpg"},{bytes:191357,md5:"a2c0828affb6a83f99391b333b9150e2",name:"elements/AssetBgMid1.png"},
{bytes:106580,md5:"a214a76ed00ec50d38034674487470e1",name:"elements/AssetBgMid2.png"},{bytes:59479,md5:"22b735a8cd9985b87982de1c7a7d3ce6",name:"elements/AssetBgMid3.png"},{bytes:806,md5:"381d082590d8097147354b91efa3aaf3",name:"elements/particles/particle_air.png"},{bytes:2763,md5:"62fdcc7d37201fa02ae4bf842e5e5fc1",name:"elements/particles/particle_cabbage.png"},{bytes:587,md5:"abedbf7b6d6f83d22a9df1bd0f8ab05f",name:"elements/particles/particle_chi.png"},{bytes:1134,md5:"7aa5977d960e9a179600d6dd81182e8c",
name:"elements/particles/particle_earth.png"},{bytes:12686,md5:"67b0e2f7d78bf986823af35a43e6860f",name:"elements/particles/particle_equalizer.png"},{bytes:560,md5:"3e3d85f51b56b827af30d973bcc2e3f2",name:"elements/particles/particle_fire.png"},{bytes:1919,md5:"21b4065f4b5c6339116f08a0e6dbbcf1",name:"elements/particles/particle_poof.png"},{bytes:877,md5:"2e792aa9ac443b0b499521e7e4ccd361",name:"elements/particles/particle_smoke.png"},{bytes:1111,md5:"92e5336192bc02aef7258e433c5e8d60",name:"elements/particles/particle_sparkle_blue.png"},
{bytes:757,md5:"ae9e2869f37b64691db4d7b4d2db0a36",name:"elements/particles/particle_sparkle_white.png"},{bytes:985,md5:"ad6d19c5420e14755885411e6d197ae0",name:"elements/particles/particle_sparkle_yellow.png"},{bytes:471,md5:"9af138befd14e2f10ef98907bed46402",name:"elements/particles/particle_star.png"},{bytes:3194,md5:"d25b24609fd2d8ec022e1f3bef7e4831",name:"elements/particles/particle_water.png"},{bytes:10766,md5:"8913ee56ee23c23cf00d1cc9d9b8445d",name:"elements/pickups/chi.png"},{bytes:17119,md5:"3ca6018c023b7f8de3e0f341e489ed69",
name:"elements/pickups/token_bison.png"},{bytes:17536,md5:"971bdc9cf1bc7bcf9766daf1e8472988",name:"elements/pickups/token_ferret.png"},{bytes:17078,md5:"0de7bb5df0f659aa33948a40fc684c33",name:"elements/pickups/token_naga.png"},{bytes:9171,md5:"e55584b217bca594178d68ec80ac8ba7",name:"elements/pickups/yuan.png"},{bytes:1147286,md5:"47b3942dcf37728e9abf5ede6a1d91c3",name:"flump_effects/atlas0.png"},{bytes:51801,md5:"4d0ca3deb62c9378ee148e06d640f382",name:"flump_effects/atlas1.png"},{bytes:53666,md5:"f357ca4daed0446b1db8835c89a2d929",
name:"flump_effects/library.json"},{bytes:32,md5:"ab84abaf24ede5228138571dcd0b8e17",name:"flump_effects/md5"},{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",name:"flump_effects/version"},{bytes:500497,md5:"2c5395dae7562ed76b31355e8c02cc66",name:"flump_enemies/atlas0.png"},{bytes:14528,md5:"38c63d764e9f72b59c845a5a15f14f00",name:"flump_enemies/atlas1.png"},{bytes:64359,md5:"06d5e9c3604574d153e5279f5409e832",name:"flump_enemies/library.json"},{bytes:32,md5:"6e8487b8a47ce1abe7c136ddcf991c1b",name:"flump_enemies/md5"},
{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",name:"flump_enemies/version"},{bytes:199032,md5:"0073ae4c2da571cc0e4579c60a6e3a7b",name:"flump_mounts/atlas0.png"},{bytes:171572,md5:"91f51c22cb5e6bad228d3df67b3fd779",name:"flump_mounts/library.json"},{bytes:32,md5:"b673cf9e1fccfe7abdd797238db74c44",name:"flump_mounts/md5"},{bytes:1,md5:"094c64a7fe18dfa1a09b2633dff12006",name:"flump_mounts/version"},{bytes:926,md5:"23606d20fc24306e3752891742c6d88c",name:"ui/AssetBlank.png"},{bytes:4979,md5:"6680513cfc89c5bf8c068435113b3fdc",
name:"ui/button_air_off.png"},{bytes:10667,md5:"309044ddc676da6562bad8304319b7cb",name:"ui/button_air_on.png"},{bytes:5363,md5:"bc9f9d69746c2a59632561a2d1dcf555",name:"ui/button_earth_off.png"},{bytes:10061,md5:"30c8559d0c85f15425c2cff8f84dd020",name:"ui/button_earth_on.png"},{bytes:4539,md5:"165a93a9932812eba8654fcce199b64f",name:"ui/button_fire_off.png"},{bytes:9128,md5:"31aa0e13d168fcb079addf865d21ffc5",name:"ui/button_fire_on.png"},{bytes:5681,md5:"634cb51c0a1e29cf5950541e101ca032",name:"ui/button_water_off.png"},
{bytes:10384,md5:"dc1fc6ab7aac4ce4d95024c1a80b4c3f",name:"ui/button_water_on.png"},{bytes:11854,md5:"c8903cb7e8530335a27d8d82e081607f",name:"ui/chi_back.png"},{bytes:1352,md5:"468e983b132d9aa28b0742f3486b48f8",name:"ui/chi_fill.png"},{bytes:12365,md5:"bb8e8a756001865d349486427418b30f",name:"ui/endgame_button_play_up.png"},{bytes:12372,md5:"00502f89540fbe37816d7ffa66d8114b",name:"ui/help_button_close_up.png"},{bytes:11709,md5:"50b95a49931039810447cefde6f402a4",name:"ui/hud_button_pause_up.png"},{bytes:10908,
md5:"e8a4f19fa6ce6ae64cf918e3d7ca09ca",name:"ui/hud_health_off.png"},{bytes:16642,md5:"e7a3b0e135156f3490f455f610b0367c",name:"ui/hud_health_on.png"},{bytes:23640,md5:"0fb4866bc306cda862622d7797956464",name:"ui/hud_master_bend_up.png"},{bytes:15736,md5:"0aa84add8f3652c4e8a5f8482083eeb1",name:"ui/menu_button_back_up.png"},{bytes:15998,md5:"a6e5771ce8cd35854ec78701ede77f1a",name:"ui/menu_button_help_up.png"},{bytes:16335,md5:"5082c67cc36918fc5b1697e5d469b9d2",name:"ui/menu_button_quit_up.png"},{bytes:14887,
md5:"85285efb241a6180941149226a1dfc02",name:"ui/menu_button_soundoff_up.png"},{bytes:15211,md5:"13015f90cd47766eb9c2f817eed87dd3",name:"ui/menu_button_soundon_up.png"},{bytes:28923,md5:"7a8d12a33f532a545366fab23488313f",name:"ui/shop_air_down.png"},{bytes:28502,md5:"8b477a48d49c60963a165280efd6afbf",name:"ui/shop_air_up.png"},{bytes:25221,md5:"fafba048ccc2694de854e891b5349f83",name:"ui/shop_bison_down.png"},{bytes:25105,md5:"8450511564da0eab26491a42769ca027",name:"ui/shop_bison_up.png"},{bytes:12132,
md5:"9837265107a59d0b04239b8843dabc1d",name:"ui/shop_button_play_up.png"},{bytes:16494,md5:"31d9237be58c088c7805727d3be612ae",name:"ui/shop_button_up.png"},{bytes:27807,md5:"223f14a2a96938b00c9ba57f7ce5ab2d",name:"ui/shop_earth_down.png"},{bytes:27396,md5:"16f79a5fb67c1eb236ccde75db264b9d",name:"ui/shop_earth_up.png"},{bytes:26108,md5:"7c07fb992b95d356881d170e04ab4c25",name:"ui/shop_ferret_down.png"},{bytes:25919,md5:"3d8ca9413cbee35f95eef56e1fcd52f0",name:"ui/shop_ferret_up.png"},{bytes:28210,md5:"5de0e2a890b2e422eec5fe5b9613e4bb",
name:"ui/shop_fire_down.png"},{bytes:27890,md5:"cc28b83d26cba7be6101a51e462f5bf7",name:"ui/shop_fire_up.png"},{bytes:26201,md5:"f61a250e68580272952c225d867d06c0",name:"ui/shop_naga_down.png"},{bytes:26063,md5:"5cdcc7c5c2c8a18c31088d63b50a6cb7",name:"ui/shop_naga_up.png"},{bytes:28761,md5:"1ac7c7e9c57ed93a44997e0002449aff",name:"ui/shop_water_down.png"},{bytes:28481,md5:"df40a3af14a8a7dce54d300228a99bc2",name:"ui/shop_water_up.png"},{bytes:27840,md5:"c96f2bd890dfdddf1451c3e0e67035fa",name:"ui/shop_yuan_down.png"},
{bytes:27871,md5:"e5633271b055886a863c8ea642265957",name:"ui/shop_yuan_up.png"}],air:[{bytes:4912,md5:"dc1b6528f2e9312e068aad2f53366b7e",name:"Default-568h@2x.png"},{bytes:4588,md5:"6617a9132c7566551711a15f42584d38",name:"Default.png"},{bytes:34016,md5:"0c8d573ff622474a53b7e4c76b75cda7",name:"icons/icon128.png"},{bytes:3411,md5:"9160a9857f1d99d4d1a5722de41941ba",name:"icons/icon16.png"},{bytes:6111,md5:"db4c0e02b46c24bfabbcf33c6807fbb8",name:"icons/icon32.png"},{bytes:9187,md5:"e310873f7870789ec2ddffb01e3b9c23",
name:"icons/icon48.png"}],bootstrap:[{bytes:2114,md5:"ba9e6829ba32e427142251a85cbd4fbb",name:"audio/silent.mp3"},{bytes:5514,md5:"3526550092a0e091f382852de5ef2315",name:"audio/silent.ogg"},{bytes:2110,md5:"f334b05f739fe8153b9d188c4ffc34bb",name:"config/config.xml"},{bytes:12226,md5:"b409fb3b256bf0219ab996984551e1bc",name:"config/translation_cn.xml"},{bytes:12227,md5:"59c16ec2b885f90075458bbde69acd83",name:"config/translation_en.xml"},{bytes:12226,md5:"b409fb3b256bf0219ab996984551e1bc",name:"config/translation_jp.xml"},
{bytes:12226,md5:"b409fb3b256bf0219ab996984551e1bc",name:"config/translation_kr.xml"},{bytes:12227,md5:"59c16ec2b885f90075458bbde69acd83",name:"config/translation_la.xml"},{bytes:12227,md5:"59c16ec2b885f90075458bbde69acd83",name:"config/translation_ru.xml"},{bytes:71071,md5:"734018527fcec86e7aa4ca95dc84df10",name:"ui/AssetScreenLoadLevel.jpg"},{bytes:451274,md5:"11438bab246f790f942d5e851aea86be",name:"ui/AssetScreenSplashLocal.jpg"},{bytes:29540,md5:"7f1e92c954e4000b33b9688dd4dd67c4",name:"ui/loading_icon.png"}],
gameplay_english:[{bytes:53507,md5:"6260e0fdc7029d2e5e6328487639ac01",name:"ui/AssetScreenEndGame.jpg"},{bytes:139335,md5:"5eb2ffa6a54134b8c7469187691a479e",name:"ui/AssetScreenGameplayHud.png"},{bytes:341800,md5:"b98d80eae1c45aa23c946fbabdc6b8c1",name:"ui/AssetScreenGameplayMenu.png"},{bytes:75663,md5:"f63b3229244f3d0907a5f810e8b8cd70",name:"ui/AssetScreenHelp.jpg"},{bytes:75711,md5:"9ab934d7457ae7c9d2f3bea554c9c0af",name:"ui/AssetScreenHelpDesktop.jpg"},{bytes:6890,md5:"1761d8cecd26e4338ae4632be6d50c6d",
name:"ui/AssetScreenOverlay.png"},{bytes:326157,md5:"b2af3e382a66a702b82f9a0b490a2b6d",name:"ui/AssetScreenQuitConfirm.png"},{bytes:51510,md5:"7adac3e4cc6bda109b009f89cadcd465",name:"ui/AssetScreenShop.jpg"},{bytes:14023,md5:"492b461d6df4008b65e01100a72c76b8",name:"ui/popup_master_menu.png"},{bytes:14313,md5:"28d5eeab13a5ffb62e4f46c780428605",name:"ui/popup_master_menu_desktop.png"},{bytes:8002,md5:"4760d089ca34cc4e6ca476971f96aac2",name:"ui/popup_new_record.png"},{bytes:4297,md5:"d2d6b7e27843c310f50b2bf4c24f825b",
name:"ui/popup_new_record_small.png"},{bytes:36296,md5:"3cc6012a667aacd49625c5714c52e9d2",name:"ui/quitconfirm_button_no_up.png"},{bytes:36575,md5:"8b98aca3cbadb5dafcdf71ae05368339",name:"ui/quitconfirm_button_yes_up.png"},{bytes:20188,md5:"35416996eae3ce50cae4dfcb57ce0349",name:"ui/shop_button_buy_up.png"},{bytes:52217,md5:"9dbbf48fac146a57d956279f05f8fe6d",name:"ui/splash_button_play_up.png"},{bytes:15532,md5:"cb8d0a5245b510a32bcd6f4a57e1295d",name:"ui/upgrade_air.png"},{bytes:13531,md5:"aa1aa1bc1bbb3209c5163bc9a557e901",
name:"ui/upgrade_bison.png"},{bytes:16582,md5:"cfb0c1ea9e2e47ed589d5737630241f4",name:"ui/upgrade_earth.png"},{bytes:12354,md5:"a932b657b97ff93accf63341fd0ed5f5",name:"ui/upgrade_ferret.png"},{bytes:15326,md5:"217ba9e3bd2691d341187944c547f8b5",name:"ui/upgrade_fire.png"},{bytes:14488,md5:"b22f7bbcef93310261d9288fcd8f0a15",name:"ui/upgrade_naga.png"},{bytes:16190,md5:"d6de022366957ca49d1be14dabe763b6",name:"ui/upgrade_water.png"},{bytes:12601,md5:"8337ccde7fba1e35425db5d10074df24",name:"ui/upgrade_yuans.png"}],
fonts_ru:[{bytes:70806,md5:"7cdc2f52c12901c6fe455f85b367211e",name:"Basic.fnt"},{bytes:370123,md5:"9e99d327ac6ba4b2021f1fd62e67241b",name:"Basic.png"}],fonts_la:[{bytes:70806,md5:"7cdc2f52c12901c6fe455f85b367211e",name:"Basic.fnt"},{bytes:370123,md5:"9e99d327ac6ba4b2021f1fd62e67241b",name:"Basic.png"}],fonts_kr:[{bytes:70806,md5:"7cdc2f52c12901c6fe455f85b367211e",name:"Basic.fnt"},{bytes:370123,md5:"9e99d327ac6ba4b2021f1fd62e67241b",name:"Basic.png"}],fonts_jp:[{bytes:70806,md5:"7cdc2f52c12901c6fe455f85b367211e",
name:"Basic.fnt"},{bytes:370123,md5:"9e99d327ac6ba4b2021f1fd62e67241b",name:"Basic.png"}],fonts_ex:[{bytes:25155,md5:"a0e96df3ee1859e9a082bb8b061791c5",name:"Basic.fnt"},{bytes:622185,md5:"6a36225f74ea1a7793667cffcb1047ce",name:"Basic.png"}],fonts_en:[{bytes:25732,md5:"a7cdd1ce9e90d6468b38d08f08cbb56b",name:"Basic.fnt"},{bytes:113523,md5:"1a0e3ebd51d28eb7b2a0d02401221f0d",name:"Basic.png"}],fonts_cn:[{bytes:70806,md5:"7cdc2f52c12901c6fe455f85b367211e",name:"Basic.fnt"},{bytes:370123,md5:"9e99d327ac6ba4b2021f1fd62e67241b",
name:"Basic.png"}],gameplay_international:[{bytes:88294,md5:"55b5d48c3392462d044109e96d2a1a10",name:"ui_unbaked/AssetScreenEndGame.jpg"},{bytes:125300,md5:"906a1b4578ae1741f877b51fa41b245f",name:"ui_unbaked/AssetScreenGameplayHud.png"},{bytes:306831,md5:"f4d0f5131975692e4cfc4aac8b1d49f6",name:"ui_unbaked/AssetScreenGameplayMenu.png"},{bytes:493663,md5:"fb4d6772e7025b324d1ff4093c9adeb0",name:"ui_unbaked/AssetScreenHelp.jpg"},{bytes:314793,md5:"41635548ca1690128100184f029578b2",name:"ui_unbaked/AssetScreenQuitConfirm.png"},
{bytes:85281,md5:"834853e67c44c8280a38133c63d3b355",name:"ui_unbaked/AssetScreenShop.jpg"},{bytes:9364,md5:"b7b28eaa0009d63b35e057cff62570d7",name:"ui_unbaked/popup_master.png"},{bytes:36094,md5:"9627fb5c3f386dc3db075756c80af58b",name:"ui_unbaked/quitconfirm_button_yes_up.png"},{bytes:20019,md5:"3a0f23476f29a3dbdbe66f11f6fc42bf",name:"ui_unbaked/shop_button_buy_up.png"}]}]}};Q=o.Manifest;ga=(new $("\\b(Android)\\b","")).match(x.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;
Q._supportsCrossOrigin=ga;l.Sprite._scratchPoint=new J.Point;l.Font.NEWLINE=new l.Glyph(10);f.BasicKeyboard._sharedEvent=new e.KeyboardEvent;f.BasicMouse._sharedEvent=new e.MouseEvent;f.BasicPointer._sharedEvent=new e.PointerEvent;f.html.CanvasRenderer.CANVAS_TEXTURES=(new $("(iPhone|iPod|iPad)","")).match(x.window.navigator.userAgent);f.html.HtmlAssetPackLoader._mediaRefCount=0;f.html.HtmlAssetPackLoader._detectBlobSupport=!0;f.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];f.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=
x.window.top==x.window&&(new $("Mobile(/.*)? Safari","")).match(x.navigator.userAgent);f.html.WebAudioSound._detectSupport=!0;f.html.WebGLGraphics._scratchMatrix=new J.Matrix;W.USE_CACHE=!1;W.USE_ENUM_INDEX=!1;W.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";T.DEFAULT_RESOLVER=N;T.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";B.ObjectMap.count=0;H.Parser.escapes=function(){var a=new B.StringMap;a.set("lt","<");a.set("gt",">");a.set("amp","&");
a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);t.InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];t.InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];t.InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];t.InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,
513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];t.InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];O.main()})();
