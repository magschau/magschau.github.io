<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<title>social votes (kca 2016)</title>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
	<style>
		body {
			font-family:'Open Sans';
			padding:10px;
			margin:0px;
		}
		table {
			width:300px;
			padding-bottom:40px;
			display:none;
		}
		tr.top {
		}
		td {
			width:50%;
		}
		td.headings {
			text-decoration: underline;
		}
		span {
			font-size:18px;
			font-weight:bold;
		}
		div#loading {
			font-size:20px;
			font-weight:bold;
			width:300px;
		}
		div#loading img{
			width:100%;
			max-width:300px;

		}
	</style>
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script type="text/javascript">
		var categoryCount=1;
		var total=0;
		var timestamp=new Date().getTime();
		$(document).ready(function () {
			ajax0();
		});
		function numberWithCommas(x) 
		{
			if ( x % 1 === 0 )
		    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}
		function sortByTitle(a, b){
			var aName = a.title.toLowerCase();
			var bName = b.title.toLowerCase(); 
			return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
		}
		function displayResult(x) {
			console.log(x);
			name = x["name"];
			//name = name.substring(0,name.indexOf("-"));
			buckets = x["buckets"];

			totalArray = buckets.total;
			totalArray.sort(sortByTitle);

			console.log(name + ": " + buckets.total.length);
			$("table").append('<tr><td colspan=2 class=headings><span>&nbsp;</span></td></tr>');
			$("table").append('<tr><td class=headings align=left><span>' + categoryCount + '. ' + name + '</span></td><td align=right>' + numberWithCommas(buckets.total_count) + '</td></tr>');
			if ( buckets.total.length > 0 ){
				for (i=0; i<buckets.total.length; i++){
					console.log(buckets.total[i].title);
					trclass = '';
					title = buckets.total[i].title;
					count = buckets.total[i].count;
					total = total + buckets.total[i].count;
					if (buckets.top.length > 0 && buckets.top[0].title === buckets.total[i].title)
						trclass = ' class="top"';
					$("table").append('<tr' + trclass + '><td align=left>' + title + '</td><td align=right>' + numberWithCommas(count) + '</td></tr>');
				}
			}
			categoryCount++;
		}
		function displayTotal() {
			$("h1").html("Total: " + numberWithCommas(total));
			$("div#loading").hide();
			$("table").show();
		}

		function ajax0() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-african-blogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax1();
			});
		}
		function ajax1() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-arab-act/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax2();
	    });
		}
		function ajax2() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favorite-pinoy-personality/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax3();
	    });
		}
		function ajax3() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favorite-asian-sports-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax4();
	    });
		}
		function ajax4() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-au-nz-old-fart/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax5();
	    });
		}
		function ajax5() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-au-nz-pop-sensation/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax6();
	    });
		}
		function ajax6() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-au-nz-social-media-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax7();
	    });
		}
		function ajax7() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-au-nz-sports-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax25();
	    });
		}
		function ajax25() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-au-nz-sports-team/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax8();
	    });
		}
		function ajax8() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-belgian-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax9();
	    });
		}
		function ajax9() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-brazilian-artist/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax26();
	    });
		}
		function ajax26() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-de-at-ch-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax10();
	    });
		}
		function ajax10() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-de-at-ch-videoblogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax11();
	    });
		}
		function ajax11() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-danish-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax12();
	    });
		}
		function ajax12() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-french-musical-artist/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax13();
	    });
		}
		function ajax13() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-italian-singer/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax14();
	    });
		}
		function ajax14() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-italian-youtuber/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax15();
	    });
		}
		function ajax15() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-latin-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax16();
	    });
		}
		function ajax16() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-nl-be-videoblogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax17();
	    });
		}
		function ajax17() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-netherlands-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax18();
	    });
		}
		function ajax18() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-norwegian-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax19();
	    });
		}
		function ajax19() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-polish-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax20();
	    });
		}
		function ajax20() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-portuguese-musical-artist/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax21();
	    });
		}
		function ajax21() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-russian-actor/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax22();
	    });
		}
		function ajax22() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-russian-actress/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax23();
	    });
		}
		function ajax23() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-russian-music-act/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax24();
	    });
		}
		function ajax24() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-russian-tv-personality/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax25();
	    });
		}
		function ajax25() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-russian-vlogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax26();
	    });
		}
		function ajax26() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-swedish-blogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax27();
	    });
		}
		function ajax27() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-swedish-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax28();
	    });
		}
		function ajax28() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-spanish-musical-act/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax29();
	    });
		}
		function ajax29() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-famous-cat/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax30();
	    });
		}
		function ajax30() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-fan-family/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax31();
	    });
		}
		function ajax31() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-music-act/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax32();
	    });
		}
		function ajax32() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-music-video/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax33();
	    });
		}
		function ajax33() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-sports-star/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax34();
	    });
		}
		function ajax34() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-tipster/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  ajax35();
	    });
		}
		function ajax35() {
	    return $.ajax({
        url: "http://api.massrelevance.com/mtvema/favourite-uk-breakthrough-blogger/meta.json?" + timestamp,
        
        dataType: "json"
	    }).done(function(a) {
		  displayResult(a);
		  displayTotal();
	    });
		}
  </script>
</head>

<body>
	<div id="loading">
		please hold while hover cats are fetching data...<br><img src="http://awesomegifs.com/wp-content/uploads/hover-kitty.gif">
		<!--
		#wiggle #wiggle<br><img src="http://i.imgur.com/q3e87zR.gif">
		-->
	</div>
	<h1></h1>
	<table></table>
</body>

</html>